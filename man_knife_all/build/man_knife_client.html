

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>client &mdash; Opscode: Knife Reference</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0.1-1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Opscode: Knife Reference" href="index.html" />
    <link rel="next" title="configure" href="man_knife_configure.html" />
    <link rel="prev" title="bootstrap" href="man_knife_bootstrap.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="man_knife_configure.html" title="configure"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="man_knife_bootstrap.html" title="bootstrap"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Opscode: Knife Reference</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/opscode_html_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">client</a><ul>
<li><a class="reference internal" href="#bulk-delete">bulk delete</a></li>
<li><a class="reference internal" href="#create">create</a></li>
<li><a class="reference internal" href="#delete">delete</a></li>
<li><a class="reference internal" href="#edit">edit</a></li>
<li><a class="reference internal" href="#list">list</a></li>
<li><a class="reference internal" href="#reregister">reregister</a></li>
<li><a class="reference internal" href="#show">show</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="man_knife_bootstrap.html"
                        title="previous chapter">bootstrap</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="man_knife_configure.html"
                        title="next chapter">configure</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/man_knife_client.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="client">
<h1>client<a class="headerlink" href="#client" title="Permalink to this headline">¶</a></h1>
<p>A chef-client is an agent that runs locally on every node that is registered with the Chef server. When a chef-client is run, it will perform all of the steps that are required to bring the node into the expected state, including:</p>
<ul class="simple">
<li>Building, registering, and authenticating the node with the Chef server</li>
<li>Synchronizing each required cookbook with the local file cache</li>
<li>Compiling the resource collection by loading each of the required cookbooks, including recipes, attributes, and all other dependencies</li>
<li>Taking the appropriate and required actions to configure the node</li>
<li>Looking for exceptions and notifications, handling each as required</li>
</ul>
<p>The <tt class="docutils literal"><span class="pre">client</span></tt> sub-command is used to manage one or more instances of a chef-client, including ensuring they are properly registered with the Chef server and have a valid RSA key pair.</p>
<p>This sub-command has the following syntax:</p>
<div class="highlight-python"><pre>knife client [ARGUMENT] (options)</pre>
</div>
<div class="section" id="bulk-delete">
<h2>bulk delete<a class="headerlink" href="#bulk-delete" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">bulk</span> <span class="pre">delete</span></tt> argument is used to delete clients that match a pattern defined by a regular expression. The regular expression must be within quotes and not be surrounded by forward slashes (/).</p>
<p>This argument has the following syntax:</p>
<div class="highlight-python"><pre>knife client bulk delete REGEX</pre>
</div>
<p>This argument does not have any options.</p>
<p>For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>knife client bulk delete <span class="s2">&quot;^[0-9]{3}$&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="create">
<h2>create<a class="headerlink" href="#create" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">create</span></tt> argument is used to create a new chef-client. This process will generate an RSA key pair for the named chef-client. The public key will be stored on the Chef server and the private key will be displayed on STDOUT or written to a named file.</p>
<p>For the chef-client, the private key should be copied to the system as /etc/chef/client.pem. The private key is typically copied to ~/.chef/client_name.pem and referenced in the knife.rb configuration file. If the private key is not copied, a 403 error will be returned. This is because the file in which the private key is located does not exist and the user who is trying to run the chef-client does not have permission to re-create the private key.</p>
<p>This argument has the following syntax:</p>
<div class="highlight-python"><pre>knife client create CLIENT_NAME (options)</pre>
</div>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-a</span></tt>, <tt class="docutils literal"><span class="pre">--admin</span></tt></dt>
<dd>Indicates that a client will be created as an admin client. This is required when users of Open Source Chef Server need to access the API as an administrator. This option only works when used with Open Source Chef Server and will have no effect when used with Hosted Chef or Private Chef.</dd>
<dt><tt class="docutils literal"><span class="pre">-f</span> <span class="pre">FILE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--file</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>Indicates that the private key will be saved to a specified file name.</dd>
</dl>
<p>For example, to create a Chef Admin Client with the name &#8220;exampleorg-validator&#8221; and save its private key to a file, enter:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>knife client create exampleorg-validator -a -f <span class="s2">&quot;/etc/chef/client.pem&quot;</span>
</pre></div>
</div>
<p>When running the <tt class="docutils literal"><span class="pre">create</span></tt> argument on Hosted Chef or Private Chef, be sure to omit the <tt class="docutils literal"><span class="pre">-a</span></tt> option:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>knife client create exampleorg-validator -f <span class="s2">&quot;/etc/chef/client.pem&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="delete">
<h2>delete<a class="headerlink" href="#delete" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">delete</span></tt> argument is used to delete a registered client.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Deleting a client will not delete any corresponding API clients.</p>
</div>
<p>This argument has the following syntax:</p>
<div class="highlight-python"><pre>knife client delete CLIENT_NAME</pre>
</div>
<p>This argument does not have any options.</p>
<p>For example, to delete a client with the name &#8220;exampleorg-validator&#8221;, enter:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>knife client delete exampleorg-validator
</pre></div>
</div>
<p>Type <tt class="docutils literal"><span class="pre">Y</span></tt> to confirm a deletion.</p>
</div>
<div class="section" id="edit">
<h2>edit<a class="headerlink" href="#edit" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">edit</span></tt> argument is used to edit the details of a registered Chef client. When this argument is run, Knife will open $EDITOR to enable editing of ENVIRONMENT attributes. When finished, Knife will update the Chef server with those changes.</p>
<p>This argument has the following syntax:</p>
<div class="highlight-python"><pre>knife client edit CLIENT_NAME</pre>
</div>
<p>This argument does not have any options.</p>
<p>For example, to edit a client with the name &#8220;exampleorg-validator&#8221;, enter:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>knife client edit exampleorg-validator
</pre></div>
</div>
</div>
<div class="section" id="list">
<h2>list<a class="headerlink" href="#list" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">list</span></tt> argument is used to view a list of registered clients.</p>
<p>This argument has the following syntax:</p>
<div class="highlight-python"><pre>knife client list (options)</pre>
</div>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-w</span></tt>, <tt class="docutils literal"><span class="pre">--with-uri</span></tt></dt>
<dd>Indicates that the corresponding URIs will be shown.</dd>
</dl>
<p>For example, enter:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>knife client list
</pre></div>
</div>
<p>to return something similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre>exampleorg-validator
i-12345678
rs-123456
</pre></div>
</div>
<p>To get the list of clients for a specific organization, use the <tt class="docutils literal"><span class="pre">-u</span></tt> and <tt class="docutils literal"><span class="pre">-k</span></tt> options:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>knife client list -u ORGNAME-validator -k .chef/ORGNAME-validator.pem
</pre></div>
</div>
</div>
<div class="section" id="reregister">
<h2>reregister<a class="headerlink" href="#reregister" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">reregister</span></tt> argument is used to regenerate an RSA key pair for a chef-client. The public key will be stored on the Chef server and the private key will be displayed on STDOUT or written to a named file.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Running this argument will invalidate the previous RSA key pair, making it unusable during authentication to the Chef server.</p>
</div>
<p>This argument has the following syntax:</p>
<div class="highlight-python"><pre>knife client reregister CLIENT_NAME (options)</pre>
</div>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-f</span> <span class="pre">FILE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--file</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>Indicates that the private key will be saved to a specified file name.</dd>
</dl>
<p>For example, to regenerate the RSA key pair for a client named &#8220;testclient&#8221; and save it to a file named &#8220;rsa_key&#8221;, enter:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>knife client regenerate testclient -f rsa_key
</pre></div>
</div>
</div>
<div class="section" id="show">
<h2>show<a class="headerlink" href="#show" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">show</span></tt> argument is used to show the details of a Chef client.</p>
<p>This argument has the following syntax:</p>
<div class="highlight-python"><pre>knife client show CLIENT_NAME (options)</pre>
</div>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-a</span> <span class="pre">ATTR</span></tt>, <tt class="docutils literal"><span class="pre">--attribute</span> <span class="pre">ATTR</span></tt></dt>
<dd>Indicates that only a single attribute is shown, as defined by the <tt class="docutils literal"><span class="pre">ATTR</span></tt> value.</dd>
</dl>
<p>For example, to view a client named &#8220;testclient&#8221;, enter:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>knife client show testclient
</pre></div>
</div>
<p>to return something like:</p>
<div class="highlight-bash"><div class="highlight"><pre>admin:       <span class="nb">false</span>
chef_type:   client
json_class:  Chef::ApiClient
name:        testclient
public_key:
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="man_knife_configure.html" title="configure"
             >next</a></li>
        <li class="right" >
          <a href="man_knife_bootstrap.html" title="bootstrap"
             >previous</a> |</li>
        <li><a href="index.html">Opscode: Knife Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Opscode, Inc.
    </div>
  </body>
</html>