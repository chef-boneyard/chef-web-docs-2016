.TH "KNIFE" "1" "December 20, 2012" "0.0.1" "Knife"
.SH NAME
knife \- Man page for Knife.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.\" Man page generated from reStructuredText.
.
.sp
Knife is a command\-line tool that provides an interface between a local Chef repository and the Chef server. Knife helps users of Chef to manage:
.INDENT 0.0
.IP \(bu 2
Nodes
.IP \(bu 2
Cookbooks and recipes
.IP \(bu 2
Roles
.IP \(bu 2
Stores of JSON data (data bags), including encrypted data
.IP \(bu 2
Environments
.IP \(bu 2
Cloud resources, including provisioning
.IP \(bu 2
The installation of Chef on management workstations
.IP \(bu 2
Searching of indexed data on the Chef server
.UNINDENT
.IP Note
The Knife Quick Reference provides an all\-in\-one quick reference of Knife commands. View a web\-based PNG file here: \fI\%http://docs.opscode.com/_images/qr_knife_web.png\fP. Or download the source files from here: \fI\%https://github.com/opscode/quick-reference\fP. Print the front/back source files and laminate them for best effect.
.RE
.SH WORKING WITH KNIFE
.sp
Knife runs from a management workstation and sits in\-between a Chef server and an organization\(aqs infrastructure. Knife interacts with a Chef server by using the same REST API that is used by a chef\-client. Role\-based authentication controls (RBAC) can be used to authorize changes when Knife is run with Hosted Chef or Private Chef. Knife is configured during workstation setup, but subsequent modifications can be made using the knife.rb configuration file.
.SS JSON Data Format
.sp
Most data is entered using a text editor in JSON format, unless the \fB\-\-disable\-editing\fP option is entered as part of a command. (Encrypted data bags use YAML, which is a superset of JSON.) JSON is a common, language\-independent data format that provides a simple text representation of arbitrary data structures. For more information about JSON, see \fI\%http://www.json.org/\fP or \fI\%http://en.wikipedia.org/wiki/JSON\fP.
.SS Using Quotes
.sp
Values can be entered with double quotes (" ") or single quotes (\(aq \(aq), but this should be done consistently.
.SS Sub\-commands
.sp
Knife comes with a collection of built in sub\-commands that work together to provide all of the functionality required to take specific actions against any object in a Chef environment, including cookbooks, nodes, roles, data bags, and environments. A Knife plugin extends the functionality beyond built\-in sub\-commands.
.sp
Knife has the following sub\-commands: \fBbootstrap\fP, \fBclient\fP, \fBconfigure\fP, \fBcookbook\fP, \fBcookbook site\fP, \fBdata bag\fP, \fBenvironment\fP, \fBexec\fP, \fBindex rebuild\fP, \fBnode\fP, \fBrecipe list\fP, \fBrole\fP, \fBsearch\fP, \fBssh\fP, \fBstatus\fP, and \fBtag\fP.
.IP Note
The following sub\-command runs only against the Open Source Chef server: \fBindex rebuild\fP.
.RE
.SS Verb Sub\-commands
.sp
Knife includes a series of sub\-commands that are built around a common set of verbs: \fBcreate\fP, \fBdelete\fP, \fBdownload\fP, \fBlist\fP, \fBshow\fP, and \fBupload\fP. These sub\-commands allow a user of Knife to build commands that interact with any object stored in the Chef repository or stored on the Chef server. Some important principles behind these sub\-commands include:
.INDENT 0.0
.IP \(bu 2
A single command that works with objects in the Chef repository. The sub\-commands specify the desired action with the verb, and then the object by specifying the directory in which that object resides: \fBcookbooks/\fP, \fBdata_bags/\fP, \fBenvironments/\fP, and \fBroles/\fP. These sub\-commands allow simply the syntax required for tasks because most Chef objects can uploaded, downloaded, viewed as a list, printed to JSON, and so on.
.IP \(bu 2
Using the Chef server as if it were a file system, allowing the repository on the Chef server to behave like a mirror of the Chef repository on the workstation. The Chef server will have the same objects as the local Chef repository. To make changes to the files on the Chef server, just download files from the Chef server or upload files from the Chef repository.
.IP \(bu 2
The context from which a command is run matters. For example, when working in the \fBroles/\fP directory, Knife will know what is being worked with. Enter \fBknife show base.json\fP and Knife will return the base role from the Chef server. From the repository root, enter \fBknife show roles/base.json\fP to get the same result.
.UNINDENT
.SS Wildcard Search
.sp
A wildcard matching pattern can be used for substring matches that replace zero (or more) characters. There are two types of wildcard patterns:
.INDENT 0.0
.IP \(bu 2
A question mark (”?”) can be used to replace exactly one character (as long as that character is not the first character)
.IP \(bu 2
An asterisk (“*”) can be used to replace any number of characters (including zero)
.UNINDENT
.sp
Wildcard patterns must be escaped (using a backslash) so that the wildcard itself can reach the Chef server. If they are not escaped, the wildcard is expanded into the actual filenames and Knife will not know the wildcard was intended to be used. For example, if the Chef server has data bags named \fBaardvarks\fP, \fBanagrams\fP, and \fBarp_tables\fP, but the local file system only has \fBaardvarks\fP and \fBanagrams\fP, escaping vs. not escaping the wildcard pattern will yield different results:
.sp
.nf
.ft C
$ knife list data_bags/a\e*
.ft P
.fi
.sp
asks the Chef server for everything starting with the letter "a" and will return:
.sp
.nf
.ft C
$ aardvarks/ anagrams/ arp_tables/
.ft P
.fi
.sp
But, the following:
.sp
.nf
.ft C
$ knife list data_bags/a*
.ft P
.fi
.sp
will return:
.sp
.nf
.ft C
$ aardvarks/ anagrams/
.ft P
.fi
.sp
Which is the same as entering:
.sp
.nf
.ft C
$ knife list data_bags/aardvarks data_bags/aardvarks
.ft P
.fi
.sp
to return:
.sp
.nf
.ft C
$ aardvarks/ anagrams/
.ft P
.fi
.SS Plug\-ins
.sp
A Knife plugin is a set of one (or more) sub\-commands that can be added to Knife to support additional functionality that is not built\-in to the base set of Knife sub\-commands. Many of the Knife plugins are built by members of the Opscode community and several of them are built and maintained by Opscode. A Knife plugin is installed to the ~/.chef/plugins/knife/ directory, from where it can be run just like any other Knife sub\-command.
.sp
Opscode provides the following plug\-ins, which work the same as built\-in sub\-commands (including common options), but must be installed separately (using RubyGems): \fBazure\fP, \fBbluebox\fP, \fBec2\fP, \fBeucalyptus\fP, \fBgoogle\fP, \fBhp\fP, \fBlinode\fP, \fBopenstack\fP, \fBrackspace\fP, \fBslicehost\fP, \fBterremark\fP, and \fBwindows\fP.
.sp
The Chef community provides many other plugins for Knife: \fI\%http://community.opscode.com/\fP.
.SS Syntax
.sp
All Knife sub\-commands have the following syntax:
.sp
.nf
.ft C
knife subcommand [ARGUMENT] (options)
.ft P
.fi
.sp
Each sub\-command has its own set of arguments and options.
.IP Note
All syntax examples in this document show variables in ALL_CAPS. For example \fB\-u PORT_LIST\fP (where PORT_LIST is a comma\-separated list of local and public UDP ports) or \fB\-F FORMAT\fP (where FORMAT determines the output format, either \fBsummary\fP, \fBtext\fP, \fBjson\fP, \fByaml\fP, or \fBpp\fP). These variables often require specific values that are unique to your organization\(aqs Chef environment.
.RE
.SS Common Options
.sp
The following options can be run with all Knife sub\-commands and plug\-ins:
.INDENT 0.0
.TP
.B \fB\-c CONFIG\fP, \fB\-\-config CONFIG\fP
The configuration file to use.
.TP
.B \fB\-\-color\fP
Indicates that colored output will be used.
.TP
.B \fB\-d\fP, \fB\-\-disable\-editing\fP
Indicates that $EDITOR will not be opened; data will be accepted as\-is.
.TP
.B \fB\-\-defaults\fP
Indicates that Knife will use the default value, instead of asking a user to provide one.
.TP
.B \fB\-e EDITOR\fP, \fB\-\-editor EDITOR\fP
The $EDITOR that is used for all interactive commands.
.TP
.B \fB\-E ENVIRONMENT\fP, \fB\-\-environment ENVIRONMENT\fP
The name of the Chef server environment. When this option is added to a command, the command will run only against the named environment.
.TP
.B \fB\-F FORMAT\fP, \fB\-\-format FORMAT\fP
The output format: \fBsummary\fP (default), \fBtext\fP, \fBjson\fP, \fByaml\fP, and \fBpp\fP.
.TP
.B \fB\-h\fP, \fB\-\-help\fP
Shows help for Knife or for a sub\-command.
.TP
.B \fB\-k KEY\fP, \fB\-\-key KEY\fP
The private key that Knife will use to sign requests made by the API client to the Chef server.
.TP
.B \fB\-\-no\-color\fP
Indicates that color will not be used in the output.
.TP
.B \fB\-\-print\-after\fP
Indicates that data will be shown after a destructive operation.
.TP
.B \fB\-\-repo\-mode MODE\fP
The layout of the local repository. The \fBdefault\fP repository includes cookbooks, data bags, environments, and roles. The \fBeverything\fP repository adds nodes, API client, and users. Default value: \fBdefault\fP.
.TP
.B \fB\-s URL\fP, \fB\-\-server\-url URL\fP
The URL for the Chef server.
.TP
.B \fB\-u USER\fP, \fB\-\-user USER\fP
A user name that Knife will use to sign requests made by the API client to the Chef server. If this option is used, be sure to ensure that the user name matches the private key or authentication will fail.
.TP
.B \fB\-v\fP, \fB\-\-version\fP
Shows the version of Chef.
.TP
.B \fB\-V\fP, \fB\-\-verbose\fP
Set for more verbose outputs. Use \fB\-VV\fP for maximum verbosity.
.TP
.B \fB\-y\fP, \fB\-\-yes\fP
Indicates that "yes" will be the response to all confirmation prompts (and that Knife will not ask a user for confirmation).
.UNINDENT
.sp
Contents:
.SS azure (plug\-in)
.sp
Windows Azure is a cloud hosting platform from Microsoft that provides virtual machines for Linux and Windows Server, cloud and database services, and more. The \fBazure\fP sub\-command is used to manage API\-driven cloud servers that are hosted by Windows Azure.
.sp
The \fBazure\fP sub\-command must use a management certificate for secure communication with Windows Azure.
.sp
This plugin should be installed using RubyGems.
.IP Note
This plugin requires the \fBknife windows\fP plugin to be present on the same machine.
.RE
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife azure [ARGUMENT] (options)
.ft P
.fi
.SS image list
.sp
The \fBimage list\fP argument is used to get a list of images that exist in a Windows Azure environment. Any image in this list may be used for provisioning.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife azure image list (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-H HOST_NAME\fP, \fB\-\-azure_host_name HOST_NAME\fP
The host name for the Windows Azure environment.
.TP
.B \fB\-p FILE_NAME\fP, \fB\-\-azure\-mgmt\-cert FILE_NAME\fP
The name of the file that contains the SSH public key that is used when authenticating to Windows Azure.
.TP
.B \fB\-S ID\fP, \fB\-\-azure\-subscription\-id ID\fP
The subscription identifier for the Windows Azure portal.
.TP
.B \fB\-\-verify\-ssl\-cert\fP
The SSL certificate that is used to verify communication over HTTPS.
.UNINDENT
.SS server create
.sp
The \fBserver create\fP argument is used to create a new Windows Azure cloud instance. This will provision a new image in Windows Azure, perform a Chef bootstrap (using the SSH protocol), and then install Chef on the target system so that it can be run as a chef\-client and communicate with a Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife azure server create (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-a STORAGE_ACCOUNT_NAME\fP, \fB\-\-storage\-account STORAGE_ACCOUNT_NAME\fP
The name of the storage account used with the hosted service.
.TP
.B \fB\-\-bootstrap\-protocol PROTOCOL\fP
The protocol used to bootstrap on a machine that is running Windows Server: \fBwinrm\fP or \fBssh\fP. Default value: \fBwinrm\fP.
.TP
.B \fB\-\-bootstrap\-version VERSION\fP
The version of Chef to install.
.TP
.B \fB\-d DISTRO\fP, \fB\-\-distro DISTRO\fP
The template file to be used during a bootstrap operation. Use this option if the specific location of the template file is unknown. The following distributions are supported: \fBchef\-full\fP (the default bootstrap), \fBcentos5\-gems\fP, \fBfedora13\-gems\fP, \fBubuntu10.04\-gems\fP, \fBubuntu10.04\-apt\fP, and \fBubuntu12.04\-gems\fP. If this option is used, Knife will search for the template file in the following order: a \fBbootstrap/\fP folder in the current working directory, a \fBbootstrap/\fP folder in the Chef repository, a \fBbootstrap/\fP folder in \fB~/.chef/\fP, or a bootstrap file shipped with Chef. Do not use the \fB\-\-template\-file\fP option when \fB\-\-distro\fP is specified.
.TP
.B \fB\-D DESCRIPTION\fP
The description for the host.
.TP
.B \fB\-H HOST_NAME\fP, \fB\-\-azure_host_name HOST_NAME\fP
The host name for the virtual machine.
.TP
.B \fB\-\-host_name HOST_NAME\fP
The host name for the Windows Azure environment.
.TP
.B \fB\-i IDENTITY_FILE\fP, \fB\-\-identity\-file IDENTITY_FILE\fP
The SSH identity file used for authentication. Key\-based authentication is recommended.
.TP
.B \fB\-I IMAGE\fP, \fB\-\-source\-image IMAGE\fP
The name of the disk image that will be used to create the virtual machine.
.TP
.B \fB\-m LOCATION\fP, \fB\-\-service\-location LOCATION\fP
The geographic location for a virtual machine and its services.
.TP
.B \fB\-N NAME\fP, \fB\-\-node\-name NAME\fP
The name of the node. Node names in Chef, when used with Windows Azure, must be 91 characters or shorter.
.TP
.B \fB\-\-[no\-]host\-key\-verify\fP
Use \fB\-\-no\-host\-key\-verify\fP to disable host key verification. Default setting: \fB\-\-host\-key\-verify\fP.
.TP
.B \fB\-o DISK_NAME\fP, \fB\-\-os\-disk\-name DISK_NAME\fP
The operating system type of the Windows Azure OS image: \fBLinux\fP or \fBWindows\fP.
.TP
.B \fB\-p FILE_NAME\fP, \fB\-\-azure\-mgmt\-cert FILE_NAME\fP
The name of the file that contains the SSH public key that is used when authenticating to Windows Azure.
.TP
.B \fB\-P PASSWORD\fP, \fB\-\-ssh\-password PASSWORD\fP
The SSH password. This can be used to pass the password directly on the command line. If this option is not specified (and a password is required) Knife will prompt for the password.
.TP
.B \fB\-\-prerelease\fP
Indicates that pre\-release Chef gems should be installed.
.TP
.B \fB\-r RUN_LIST\fP, \fB\-\-run\-list RUN_LIST\fP
A comma\-separated list of roles and/or recipes to be applied.
.TP
.B \fB\-R ROLE_NAME\fP, \fB\-\-role\-name ROLE_NAME\fP
The name of the virtual machine.
.TP
.B \fB\-s SERVICE_NAME\fP, \fB\-\-hosted\-service\-name SERVICE_NAME\fP
The name of the hosted service.
.TP
.B \fB\-S ID\fP, \fB\-\-azure\-subscription\-id ID\fP
The subscription identifier for the Windows Azure portal.
.TP
.B \fB\-t PORT_LIST\fP, \fB\-\-tcp\-endpoints PORT_LIST\fP
A comma\-separated list of local and public TCP ports that will be opened, for example: \fB80:80,433:5000\fP.
.TP
.B \fB\-\-template\-file TEMPLATE\fP
The path to a template file that will be used during a bootstrap operation. Do not use the \fB\-\-distro\fP option when \fB\-\-template\-file\fP is specified.
.TP
.B \fB\-u PORT_LIST\fP, \fB\-\-\-udp\-endpoints PORT_LIST\fP
A comma\-separated list of local and public UDP ports that will be opened, for example: \fB80:80,433:5000\fP.
.TP
.B \fB\-\-verify\-ssl\-cert\fP
The SSL certificate that is used to verify communication over HTTPS.
.TP
.B \fB\-x USER_NAME\fP, \fB\-\-ssh\-user USER_NAME\fP
The SSH user name.
.TP
.B \fB\-z SIZE\fP, \fB\-\-role\-size SIZE\fP
The size of the virtual machine: \fBExtraSmall\fP, \fBSmall\fP, \fBMedium\fP, \fBLarge\fP, or \fBExtraLarge\fP.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to provision a medium\-sized CentOS machine configured as a web server in the "West US" data center, while also creating new hosted service and storage accounts, enter something like:
.sp
.nf
.ft C
$ knife azure server create \-r "role[webserver]" \-\-service\-location "West US" \-\-ssh\-user foo
  \-\-ssh\-\-password password \-\-role\-name web\-apache\-0001 \-\-host\-name web\-apache
  \-\-tcp\-endpoints 80:80,8080:8080 \-\-source\-image name_of_source_image \-\-role\-size Medium
.ft P
.fi
.sp
To provision a medium\-sized CentOS machine configured as a web server in the "West US" data center, while reusing existing hosted service and storage accounts, enter something like:
.sp
.nf
.ft C
$ knife azure server create \-r "role[webserver]" \-\-service\-location "West US"
  \-\-hosted\-service\-name webservers \-\-storage\-account webservers\-storage \-\-ssh\-user foo
  \-\-ssh\-\-password password \-\-role\-name web\-apache\-0001 \-\-host\-name web\-apache
  \-\-tcp\-endpoints 80:80,8080:8080 \-\-source\-image name_of_source_image \-\-role\-size Medium
.ft P
.fi
.SS server delete
.sp
The \fBserver delete\fP argument is used to delete one or more instances that are running in the Windows Azure cloud. To find a specific cloud instance, use \fBknife azure server list\fP. Use the \fB\-\-purge\fP option to delete all associated node and client objects from the Chef server or use the \fBknife node delete\fP and \fBknife client delete\fP sub\-commands to delete specific node and client objects.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife azure server delete [SERVER...] (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-H HOST_NAME\fP, \fB\-\-azure_host_name HOST_NAME\fP
The host name for the Windows Azure environment.
.TP
.B \fB\-N NODE_NAME\fP, \fB\-\-node\-name NODE_NAME\fP
The name of the node to be deleted, if different from the server name. This must be used with the \fB\-\-purge\fP option. This must be used with the \fB\-p\fP (purge) option.
.TP
.B \fB\-p FILE_NAME\fP, \fB\-\-azure\-mgmt\-cert FILE_NAME\fP
The name of the file that contains the SSH public key that is used when authenticating to Windows Azure.
.TP
.B \fB\-P\fP, \fB\-\-purge\fP
Indicates that all corresponding nodes and clients on the Chef server will be destroyed, in addition to the Windows Azure node itself. This action (by itself) assumes that the node and client have the same name as the server; if they do not have the same names, then the \fB\-\-node\-name\fP option must be used to specify the name of the node.
.TP
.B \fB\-\-purge\-os\-disk\fP
Indicates that all corresponding operating system disks will be destroyed, in addition to the Windows Azure node itself.
.TP
.B \fB\-S ID\fP, \fB\-\-azure\-subscription\-id ID\fP
The subscription identifier for the Windows Azure portal.
.TP
.B \fB\-\-verify\-ssl\-cert\fP
The SSL certificate that is used to verify communication over HTTPS.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to delete an instance named "devops12", enter:
.sp
.nf
.ft C
$ knife azure server delete devops12
.ft P
.fi
.SS server describe
.sp
The \fBserver describe\fP argument is used to view a detailed description of one or more roles that exist in a Windows Azure cloud instance. For each specified role name, information such as status, size, hosted service name, deployment name, ports (open, local, public) and IP are displayed.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife azure server describe [ROLE_NAME...]
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-H HOST_NAME\fP, \fB\-\-azure_host_name HOST_NAME\fP
The host name for the Windows Azure environment.
.TP
.B \fB\-p FILE_NAME\fP, \fB\-\-azure\-mgmt\-cert FILE_NAME\fP
The name of the file that contains the SSH public key that is used when authenticating to Windows Azure.
.TP
.B \fB\-S ID\fP, \fB\-\-azure\-subscription\-id ID\fP
The subscription identifier for the Windows Azure portal.
.TP
.B \fB\-\-verify\-ssl\-cert\fP
The SSL certificate that is used to verify communication over HTTPS.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to view the details for a role named "admin", enter:
.sp
.nf
.ft C
$ knife azure server describe admin
.ft P
.fi
.SS server list
.sp
The \fBserver list\fP argument is used to find instances that are associated with a Windows Azure account. The results may show instances that are not currently managed by the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife azure server list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-H HOST_NAME\fP, \fB\-\-azure_host_name HOST_NAME\fP
The host name for the Windows Azure environment.
.TP
.B \fB\-p FILE_NAME\fP, \fB\-\-azure\-mgmt\-cert FILE_NAME\fP
The name of the file that contains the SSH public key that is used when authenticating to Windows Azure.
.TP
.B \fB\-S ID\fP, \fB\-\-azure\-subscription\-id ID\fP
The subscription identifier for the Windows Azure portal.
.TP
.B \fB\-\-verify\-ssl\-cert\fP
The SSL certificate that is used to verify communication over HTTPS.
.UNINDENT
.SS bluebox (plug\-in)
.sp
Blue Box provides on\-demand computing that is backed by a proprietary cloud operating system. The \fBbluebox\fP sub\-command is used to manage API\-driven cloud servers that are hosted by Blue Box.
.sp
This plugin should be installed using RubyGems.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife bluebox [ARGUMENT] (options)
.ft P
.fi
.SS images list
.sp
The \fBimages list\fP argument is used to view a list of images that are running on servers that are hosted by Blue Box, including returning a list of each server (and server ID). The results may show instances that are not currently managed by the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife bluebox images list
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.SS server create
.sp
The \fBserver create\fP argument is used to create a new Blue Box cloud instance. A comma\-separated run\-list of roles and/or recipes must be specified.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife bluebox server create [RUN_LIST...] (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-b LB_APP\fP, \fB\-\-load_balancer LB_APP\fP
The load balancing application to which a server should be added.
.TP
.B \fB\-\-block_startup_timeout TIME\fP
The amount of time that should elapse before the deployment process is stopped.
.TP
.B \fB\-d DISTRO\fP, \fB\-\-distro DISTRO\fP
The template file to be used during a bootstrap operation. Use this option if the specific location of the template file is unknown. The following distributions are supported: \fBchef\-full\fP (the default bootstrap), \fBcentos5\-gems\fP, \fBfedora13\-gems\fP, \fBubuntu10.04\-gems\fP, \fBubuntu10.04\-apt\fP, and \fBubuntu12.04\-gems\fP. If this option is used, Knife will search for the template file in the following order: a \fBbootstrap/\fP folder in the current working directory, a \fBbootstrap/\fP folder in the Chef repository, a \fBbootstrap/\fP folder in \fB~/.chef/\fP, or a bootstrap file shipped with Chef. Do not use the \fB\-\-template\-file\fP option when \fB\-\-distro\fP is specified.
.TP
.B \fB\-\-disable\-bootstrap\fP
Indicates that the bootstrap process should be disabled.
.TP
.B \fB\-f FLAVOR\fP, \fB\-\-flavor FLAVOR\fP
The name of the flavor that identifies the hardware configuration of the server, including disk space, memory capacity, and CPU priority.
.TP
.B \fB\-i IMAGE\fP, \fB\-\-image IMAGE\fP
The name of the image that identifies the operating system (and version) that will be used to create the virtual machine.
.TP
.B \fB\-I IDENTITY_FILE\fP, \fB\-\-identity\-file IDENTITY_FILE\fP
The SSH identity file used for authentication. Key\-based authentication is recommended.
.TP
.B \fB\-N NAME\fP, \fB\-\-node\-name NAME\fP
The name of the node.
.TP
.B \fB\-P PASSWORD\fP, \fB\-\-ssh\-password PASSWORD\fP
The SSH password. This can be used to pass the password directly on the command line. If this option is not specified (and a password is required) Knife will prompt for the password.
.TP
.B \fB\-U KEY\fP, \fB\-\-username USERNAME\fP
The user name for the Blue Box server.
.UNINDENT
.SS server delete
.sp
The \fBserver delete\fP argument is used to delete one or more instances that are running in the Blue Box cloud. A block represents the on\-demand virtual computing resource; a hostname is specific to a block. To find a specific cloud instance, use the \fBknife bluebox server list\fP argument. Use the \fBknife node delete\fP and \fBknife client delete\fP sub\-commands to delete associated node and client objects (if required).
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife bluebox server delete BLOCK_HOSTNAME
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example, to delete an instance at block "12345" with a hostname of "dev", enter:
.sp
.nf
.ft C
$ knife bluebox server delete block12345\-dev.blueboxgrid.com
.ft P
.fi
.SS server list
.sp
The \fBserver list\fP argument is used to find instances that are associated with a Blue Box account.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife bluebox server list
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.SS bluelock (plug\-in)
.sp
Bluelock is a VMware vCloud Datacenter service provider that provides mid\-size and large enterprises flexible IT infrastructure solutions that are hosted in the public cloud.
.sp
This plugin should be installed using RubyGems.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife bluelock [ARGUMENT] (options)
.ft P
.fi
.SS images list
.sp
The \fBimages list\fP argument is used to view a list of images that are running on servers that are hosted by Bluelock, including returning a list of each server (and server ID). The results may show instances that are not currently managed by the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife bluelock images list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A USER_NAME\fP, \fB\-\-bluelock\-username USER_NAME\fP
The user name for the Bluelock account.
.TP
.B \fB\-K PASSWORD\fP, \fB\-\-bluelock\-password PASSWORD\fP
The password for the Bluelock account.
.UNINDENT
.SS server create
.sp
The \fBserver create\fP argument is used to create a new Bluelock cloud instance. A comma\-separated run\-list of roles and/or recipes must be specified.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife bluelock server create NAME [RUN_LIST...] (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A USER_NAME\fP, \fB\-\-bluelock\-username USER_NAME\fP
The user name for the Bluelock account.
.TP
.B \fB\-d DISTRO\fP, \fB\-\-distro DISTRO\fP
The template file to be used during a bootstrap operation. Use this option if the specific location of the template file is unknown. The following distributions are supported: \fBchef\-full\fP (the default bootstrap), \fBcentos5\-gems\fP, \fBfedora13\-gems\fP, \fBubuntu10.04\-gems\fP, \fBubuntu10.04\-apt\fP, and \fBubuntu12.04\-gems\fP. If this option is used, Knife will search for the template file in the following order: a \fBbootstrap/\fP folder in the current working directory, a \fBbootstrap/\fP folder in the Chef repository, a \fBbootstrap/\fP folder in \fB~/.chef/\fP, or a bootstrap file shipped with Chef. Do not use the \fB\-\-template\-file\fP option when \fB\-\-distro\fP is specified.
.TP
.B \fB\-\-[no\-]enable\-firewall\fP
Indicates whether to install a firewall with which public network access can be controlled. Default value: \fBfalse\fP.
.TP
.B \fB\-i IMAGE\fP, \fB\-\-bluelock\-image IMAGE\fP
The name of the image that identifies the operating system (and version) that will be used to create the virtual machine.
.TP
.B \fB\-K PASSWORD\fP, \fB\-\-bluelock\-password PASSWORD\fP
The password for the Bluelock account.
.TP
.B \fB\-m MEMORY\fP, \fB\-\-memory MEMORY\fP
The amount of memory, in megabytes. Possible values: \fB512\fP, \fB1024\fP, \fB1536\fP, \fB2048\fP, \fB4096\fP, \fB8192\fP, \fB12288\fP, or \fB16384\fP.
.TP
.B \fB\-N NAME\fP, \fB\-\-node\-name NAME\fP
The name of the node.
.TP
.B \fB\-P PASSWORD\fP, \fB\-\-ssh\-password PASSWORD\fP
The SSH password. This can be used to pass the password directly on the command line. If this option is not specified (and a password is required) Knife will prompt for the password.
.TP
.B \fB\-r RUN_LIST\fP, \fB\-\-run\-list RUN_LIST\fP
A comma\-separated list of roles and/or recipes to be applied.
.TP
.B \fB\-S NAME\fP, \fB\-\-server\-name NAME\fP
The name of the server.
.TP
.B \fB\-T X,Y,Z\fP, \fB\-\-tcp X,Y,Z\fP
A comma\-separated list of local and public TCP ports that will be available.
.TP
.B \fB\-\-template\-file TEMPLATE\fP
The path to a template file that will be used during a bootstrap operation. Do not use the \fB\-\-distro\fP option when \fB\-\-template\-file\fP is specified.
.TP
.B \fB\-U X,Y,Z\fP, \fB\-\-udp X,Y,Z\fP
A comma\-separated list of local and public UDP ports that will be available.
.TP
.B \fB\-vcpus VCPUS\fP
The number of virtual CPUs that are available per virtual machine. Possible values: \fB1\fP, \fB2\fP, \fB4\fP, or \fB8\fP.
.UNINDENT
.SS server delete
.sp
The \fBserver delete\fP argument is used to delete one or more instances that are running in the Bluelock cloud. A block represents the on\-demand virtual computing resource; a hostname is specific to a block. To find a specific cloud instance, use the \fBknife bluelock server list\fP argument. Use the \fBknife node delete\fP and \fBknife client delete\fP sub\-commands to delete associated node and client objects (if required).
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife bluelock server delete SERVER_NAME (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A USER_NAME\fP, \fB\-\-bluelock\-username USER_NAME\fP
The user name for the Bluelock account.
.TP
.B \fB\-K PASSWORD\fP, \fB\-\-bluelock\-password PASSWORD\fP
The password for the Bluelock account.
.TP
.B \fB\-N NODE_NAME\fP, \fB\-\-node\-name NODE_NAME\fP
The name of the node to be deleted, if different from the server name. This must be used with the \fB\-\-purge\fP option.
.TP
.B \fB\-p\fP, \fB\-\-purge\fP
Indicates that all corresponding nodes on the Chef server will be destroyed, in addition to the Bluelock node itself. This option (by itself) assumes that the node and client have the same name as the server. If they do not, use the \fB\-\-node\-name\fP option to specify the correct name for the node.
.UNINDENT
.SS server list
.sp
The \fBserver list\fP argument is used to find instances that are associated with a Bluelock account.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife bluelock server list (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A USER_NAME\fP, \fB\-\-bluelock\-username USER_NAME\fP
The user name for the Bluelock account.
.TP
.B \fB\-K PASSWORD\fP, \fB\-\-bluelock\-password PASSWORD\fP
The password for the Bluelock account.
.UNINDENT
.SS bootstrap
.sp
A bootstrap is a process that installs Chef on a target system so that it can run as a chef\-client and communicate with a Chef server.
.sp
The \fBbootstrap\fP sub\-command is used run a bootstrap operation that installs Chef on the target system. The bootstrap operation must specify the IP address or FQDN of the target system.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife bootstrap FQDN_or_IP_ADDRESS (options)
.ft P
.fi
.sp
This sub\-command has the following options:
.INDENT 0.0
.TP
.B \fB\-\-bootstrap\-proxy PROXY_URL\fP
The proxy server for the node that is the target of a bootstrap operation.
.TP
.B \fB\-\-bootstrap\-version VERSION\fP
The version of Chef to install.
.TP
.B \fB\-d DISTRO\fP, \fB\-\-distro DISTRO\fP
The template file to be used during a bootstrap operation. Use this option if the specific location of the template file is unknown. The following distributions are supported: \fBchef\-full\fP (the default bootstrap), \fBcentos5\-gems\fP, \fBfedora13\-gems\fP, \fBubuntu10.04\-gems\fP, \fBubuntu10.04\-apt\fP, and \fBubuntu12.04\-gems\fP. If this option is used, Knife will search for the template file in the following order: a \fBbootstrap/\fP folder in the current working directory, a \fBbootstrap/\fP folder in the Chef repository, a \fBbootstrap/\fP folder in \fB~/.chef/\fP, or a bootstrap file shipped with Chef. Do not use the \fB\-\-template\-file\fP option when \fB\-\-distro\fP is specified.
.TP
.B \fB\-G GATEWAY\fP, \fB\-\-ssh\-gateway GATEWAY\fP
The SSH tunnel or gateway that is used to run a bootstrap action on a machine that is not accessible from the workstation.
.TP
.B \fB\-\-hint HINT_NAME[=HINT_FILE]\fP
Indicates that an Ohai hint will be set on the target of the bootstrap. Use multiple \fB\-\-hint\fP options to specify multiple hints.
.TP
.B \fB\-i IDENTITY_FILE\fP, \fB\-\-identity\-file IDENTITY_FILE\fP
The SSH identity file used for authentication. Key\-based authentication is recommended.
.TP
.B \fB\-j JSON_ATTRIBS\fP, \fB\-\-json\-attributes JSON_ATTRIBS\fP
A JSON string that is added to the first run of a chef\-client.
.TP
.B \fB\-N NAME\fP, \fB\-\-node\-name NAME\fP
The name of the node.
.TP
.B \fB\-\-[no\-]host\-key\-verify\fP
Use \fB\-\-no\-host\-key\-verify\fP to disable host key verification. Default setting: \fB\-\-host\-key\-verify\fP.
.TP
.B \fB\-p PORT\fP, \fB\-\-ssh\-port PORT\fP
The SSH port.
.TP
.B \fB\-P PASSWORD\fP, \fB\-\-ssh\-password PASSWORD\fP
The SSH password. This can be used to pass the password directly on the command line. If this option is not specified (and a password is required) Knife will prompt for the password.
.TP
.B \fB\-\-prerelease\fP
Indicates that pre\-release Chef gems should be installed.
.TP
.B \fB\-r RUN_LIST\fP, \fB\-\-run\-list RUN_LIST\fP
A comma\-separated list of roles and/or recipes to be applied.
.TP
.B \fB\-\-sudo\fP
Indicates that a bootstrap operation should be executed using sudo.
.TP
.B \fB\-\-template\-file TEMPLATE\fP
The path to a template file that will be used during a bootstrap operation. Do not use the \fB\-\-distro\fP option when \fB\-\-template\-file\fP is specified.
.TP
.B \fB\-x USERNAME\fP, \fB\-\-ssh\-user USERNAME\fP
The SSH user name.
.UNINDENT
.sp
For example, to pass an SSH password as part of the command:
.sp
.nf
.ft C
$ knife bootstrap 192.168.1.1 \-x username \-P PASSWORD \-\-sudo
.ft P
.fi
.sp
To use a file that contains a private key:
.sp
.nf
.ft C
$ knife bootstrap 192.168.1.1 \-x username \-i ~/.ssh/id_rsa \-\-sudo
.ft P
.fi
.SS client
.sp
When a node runs chef\-client for the first time, it generally does not yet have an API client identity, and so it cannot make authenticated requests to the server. This is where the validation client (named chef\-validator) comes in. When the chef\-client runs, it checks if it has a client key. If the client key does not exist, it then attempts to borrow the validation client\(aqs identity to register itself with the Chef server. In order to register with the Chef server, the validation client\(aqs private key needs to be copied to the host and placed in /etc/chef/validation.pem.
.sp
Once the chef\-client has registered itself with the Chef server, it no longer uses the validation client for anything. It is recommended that you delete the validation client\(aqs private key from the host after the host has registered or use the \fBdelete_validation\fP recipe that can be found in the \fBchef\-client\fP cookbook (\fI\%http://community.opscode.com/cookbooks/chef-client\fP).
.sp
The \fBclient\fP sub\-command is used to manage an API client list and their associated RSA public key\-pairs. This allows authentication requests to be made to the Chef server by any entity that uses the Chef Server API, such as the chef\-client and Knife.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife client [ARGUMENT] (options)
.ft P
.fi
.SS bulk delete
.sp
The \fBbulk delete\fP argument is used to delete any API client that matches a pattern defined by a regular expression. The regular expression must be within quotes and not be surrounded by forward slashes (/).
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife client bulk delete REGEX
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife client bulk delete "^[0\-9]{3}$"
.ft P
.fi
.SS create
.sp
The \fBcreate\fP argument is used to create a new API client. This process will generate an RSA key pair for the named API client. The public key will be stored on the Chef server and the private key will be displayed on STDOUT or written to a named file.
.INDENT 0.0
.IP \(bu 2
For the chef\-client, the private key should be copied to the system as /etc/chef/client.pem.
.IP \(bu 2
For Knife, the private key is typically copied to ~/.chef/client_name.pem and referenced in the knife.rb configuration file.
.UNINDENT
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife client create CLIENT_NAME (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-a\fP, \fB\-\-admin\fP
Indicates that a client will be created as an admin client. This is required when users of Open Source Chef need to access the API as an administrator. This option only works when used with Open Source Chef and will have no effect when used with Hosted Chef or Private Chef.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to create a Chef Admin client with the name "exampleorg" and save its private key to a file, enter:
.sp
.nf
.ft C
$ knife client create exampleorg \-a \-f "/etc/chef/client.pem"
.ft P
.fi
.sp
When running the \fBcreate\fP argument on Hosted Chef or Private Chef, be sure to omit the \fB\-a\fP option:
.sp
.nf
.ft C
$ knife client create exampleorg \-f "/etc/chef/client.pem"
.ft P
.fi
.SS delete
.sp
The \fBdelete\fP argument is used to delete a registered API client.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife client delete CLIENT_NAME
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example, to delete a client with the name "client_foo", enter:
.sp
.nf
.ft C
$ knife client delete client_foo
.ft P
.fi
.sp
Type \fBY\fP to confirm a deletion.
.SS edit
.sp
The \fBedit\fP argument is used to edit the details of a registered API client. When this argument is run, Knife will open $EDITOR to enable editing of the \fBadmin\fP attribute. (None of the other attributes should be changed using this argument.) When finished, Knife will update the Chef server with those changes.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife client edit CLIENT_NAME
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example, to edit a client with the name "exampleorg", enter:
.sp
.nf
.ft C
$ knife client edit exampleorg
.ft P
.fi
.SS list
.sp
The \fBlist\fP argument is used to view a list of registered API client.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife client list (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-w\fP, \fB\-\-with\-uri\fP
Indicates that the corresponding URIs will be shown.
.UNINDENT
.sp
\fBExamples\fP
.sp
To verify the API client list for the Chef server, enter:
.sp
.nf
.ft C
$ knife client list
.ft P
.fi
.sp
to return something similar to:
.sp
.nf
.ft C
exampleorg
i\-12345678
rs\-123456
.ft P
.fi
.sp
To verify that an API client can authenticate to the
Chef server correctly, try getting a list of clients using \fB\-u\fP and \fB\-k\fP options to specify its name and private key:
.sp
.nf
.ft C
$ knife client list \-u ORGNAME \-k .chef/ORGNAME.pem
.ft P
.fi
.SS reregister
.sp
The \fBreregister\fP argument is used to regenerate an RSA key pair for an API client. The public key will be stored on the Chef server and the private key will be displayed on STDOUT or written to a named file.
.IP Note
Running this argument will invalidate the previous RSA key pair, making it unusable during authentication to the Chef server.
.RE
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife client reregister CLIENT_NAME (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-f FILE_NAME\fP, \fB\-\-file FILE_NAME\fP
Indicates that the private key will be saved to a specified file name.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to regenerate the RSA key pair for a client named "testclient" and save it to a file named "rsa_key", enter:
.sp
.nf
.ft C
$ knife client regenerate testclient \-f rsa_key
.ft P
.fi
.SS show
.sp
The \fBshow\fP argument is used to show the details of an API client.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife client show CLIENT_NAME (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-a ATTR\fP, \fB\-\-attribute ATTR\fP
Indicates that only a single attribute is shown, as defined by the \fBATTR\fP value.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to view a client named "testclient", enter:
.sp
.nf
.ft C
$ knife client show testclient
.ft P
.fi
.sp
to return something like:
.sp
.nf
.ft C
admin:       false
chef_type:   client
json_class:  Chef::ApiClient
name:        testclient
public_key:
.ft P
.fi
.sp
To view information in JSON format, use the \fB\-F\fP common option as part of the command like this:
.sp
.nf
.ft C
$ knife client show testclient \-F json
.ft P
.fi
.sp
Other formats available include \fBtext\fP, \fByaml\fP, and \fBpp\fP.
.SS configure
.sp
The \fBconfigure\fP sub\-command is used to create the knife.rb and client.rb files so that they can be distributed to workstations and nodes.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife configure (options)
.ft P
.fi
.sp
This sub\-command has the following options:
.INDENT 0.0
.TP
.B \fB\-\-client DIRECTORY\fP
Use to create a client configuration. This will read from the knife.rb config file to generate a config file suitable for use in /etc/chef/client.rb, and will then copy the validation certificate into the specified directory.
.TP
.B \fB\-i\fP, \fB\-\-initial\fP
Use to create a API client, typically an administrator client on a freshly\-installed Chef server.
.TP
.B \fB\-r REPO\fP, \fB\-\-repository REPO\fP
The path to the Chef repository.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to create a knife.rb file, enter:
.sp
.nf
.ft C
$ knife configure
.ft P
.fi
.sp
To configure a client.rb, enter:
.sp
.nf
.ft C
$ knife configure client \(aq/directory\(aq
.ft P
.fi
.SS cookbook site
.sp
The Cookbooks Site API is used to provide access to the cookbooks community hosted at \fI\%https://cookbooks.opscode.com\fP. All of the cookbooks in the community are accessible through a REST API located at \fI\%https://cookbooks.opscode.com/api/v1/\fP by using any of the supported endpoints. In most cases, using Knife and the \fBknife cookbook site\fP sub\-command (and any of its arguments) is the recommended method of interacting with these cookbooks, but in some cases, using the REST API directly may make sense.
.sp
The \fBcookbook site\fP sub\-command is used to interact with cookbooks that are located at \fI\%https://cookbooks.opscode.com\fP. A user account is required for any community actions that write data to this site. The following arguments do not require a user account: \fBdownload\fP, \fBsearch\fP, \fBinstall\fP, and \fBlist\fP.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife cookbook site [ARGUMENT] (options)
.ft P
.fi
.SS download
.sp
The \fBdownload\fP argument is used to download a cookbook from the community website. A cookbook will be downloaded as a tar.gz archive and placed in the current working directory. If a cookbook (or cookbook version) has been deprecated and the \fB\-\-force\fP option is not used, Knife will alert the user that the cookbook is deprecated and then will provide the name of the most recent non\-deprecated version of that cookbook.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife cookbook site download COOKBOOK_NAME [COOKBOOK_VERSION] (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fBCOOKBOOK_VERSION\fP
The version of a cookbook to be downloaded. If a cookbook has only one version, this option does not need to be specified. If a cookbook has more than one version and this option is not specified, Knife will prompt for a version.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife cookbook site download getting\-started
.ft P
.fi
.sp
to return something like:
.sp
.nf
.ft C
Downloading getting\-started from the cookbooks site at version 0.3.0 to
  /Users/sdanna/opscodesupport/getting\-started\-0.3.0.tar.gz
Cookbook saved: /Users/sdanna/opscodesupport/getting\-started\-0.3.0.tar.gz
.ft P
.fi
.SS install
.sp
The \fBinstall\fP argument is used to install a cookbook that has been downloaded from the community site to a local git repository . This action uses the git version control system in conjunction with the \fI\%https://cookbooks.opscode.com\fP site to install community\-contributed cookbooks to the local repository. Using this argument does the following:
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP 1. 3
A new "pristine copy" branch is created in git for tracking the upstream.
.IP 2. 3
All existing versions of a cookbook are removed from the branch.
.IP 3. 3
The cookbook is downloaded from \fI\%https://cookbooks.opscode.com\fP in the tar.gz format.
.IP 4. 3
The downloaded cookbook is untarred and its contents are committed to git and a tag is created.
.IP 5. 3
The "pristine copy" branch is merged into the master branch.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
This process allows the upstream cookbook in the master branch to be modified while letting git maintain changes as a separate patch. When an updated upstream version becomes available, those changes can be merged while maintaining any local modifications.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife cookbook site install COOKBOOK_NAME [COOKBOOK_VERSION] (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-b\fP, \fB\-\-use\-current\-branch\fP
Indicates that the current branch will be used.
.TP
.B \fB\-B BRANCH\fP, \fB\-\-branch BRANCH\fP
The name of the default branch. This will default to the master branch.
.TP
.B \fBCOOKBOOK_VERSION\fP
The version of the cookbook to be installed. If a version is not specified, the most recent version of the cookbook will be installed.
.TP
.B \fB\-D\fP, \fB\-\-skip\-dependencies\fP
Indicates that all cookbooks to which the installed cookbook has a dependency will not be installed.
.TP
.B \fB\-o PATH:PATH\fP, \fB\-\-cookbook\-path PATH:PATH\fP
A colon\-separated path at which cookbooks are located.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to install the cookbook "getting\-started", enter:
.sp
.nf
.ft C
$ knife cookbook site install getting\-started
.ft P
.fi
.sp
to return something like:
.sp
.nf
.ft C
Installing getting\-started to /Users/sdanna/opscodesupport/.chef/../cookbooks
Checking out the master branch.
Creating pristine copy branch chef\-vendor\-getting\-started
Downloading getting\-started from the cookbooks site at version 0.3.0 to
  /Users/sdanna/opscodesupport/.chef/../cookbooks/getting\-started.tar.gz
Cookbook saved: /Users/sdanna/opscodesupport/.chef/../cookbooks/getting\-started.tar.gz
Removing pre\-existing version.
Uncompressing getting\-started version /Users/sdanna/opscodesupport/.chef/../cookbooks.
removing downloaded tarball
1 files updated, committing changes
Creating tag cookbook\-site\-imported\-getting\-started\-0.3.0
Checking out the master branch.
Updating 4d44b5b..b4c32f2
Fast\-forward
 cookbooks/getting\-started/README.rdoc              |    4 +++
 cookbooks/getting\-started/attributes/default.rb    |    1 +
 cookbooks/getting\-started/metadata.json            |   29 ++++++++++++++++++++
 cookbooks/getting\-started/metadata.rb              |    6 ++++
 cookbooks/getting\-started/recipes/default.rb       |   23 +++++++++++++++
 .../templates/default/chef\-getting\-started.txt.erb |    5 +++
 6 files changed, 68 insertions(+), 0 deletions(\-)
 create mode 100644 cookbooks/getting\-started/README.rdoc
 create mode 100644 cookbooks/getting\-started/attributes/default.rb
 create mode 100644 cookbooks/getting\-started/metadata.json
 create mode 100644 cookbooks/getting\-started/metadata.rb
 create mode 100644 cookbooks/getting\-started/recipes/default.rb
 create mode 100644 cookbooks/getting\-started/templates/default/chef\-getting\-started.txt.erb
Cookbook getting\-started version 0.3.0 successfully installed
.ft P
.fi
.SS list
.sp
The \fBlist\fP argument is used to view a list of cookbooks that are currently available at \fI\%https://cookbooks.opscode.com\fP.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife cookbook site list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-w\fP, \fB\-\-with\-uri\fP
Indicates that the corresponding URIs will be shown.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to view a list of cookbooks at \fI\%https://cookbooks.opscode.com\fP server, enter:
.sp
.nf
.ft C
$ knife cookbook site list
.ft P
.fi
.sp
to return:
.sp
.nf
.ft C
1password             homesick              rabbitmq
7\-zip                 hostname              rabbitmq\-management
AmazonEC2Tag          hosts                 rabbitmq_chef
R                     hosts\-awareness       rackspaceknife
accounts              htop                  radiant
ack\-grep              hudson                rails
activemq              icinga                rails_enterprise
ad                    id3lib                redis\-package
ad\-likewise           iftop                 redis2
ant                   iis                   redmine
[...truncated...]
.ft P
.fi
.SS search
.sp
The \fBsearch\fP argument is used to search for a cookbook at \fI\%https://cookbooks.opscode.com\fP. A search query is used to return a list of cookbooks at \fI\%https://cookbooks.opscode.com\fP and uses the same syntax as the \fBsearch\fP sub\-command.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife cookbook site search SEARCH_QUERY (options)
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example, to search for all of the cookbooks that can be used with Apache, enter:
.sp
.nf
.ft C
$ knife cookbook site search apache*
.ft P
.fi
.sp
to return something like:
.sp
.nf
.ft C
apache2:
  cookbook:              http://cookbooks.opscode.com/api/v1/cookbooks/apache2
  cookbook_description:  Installs and configures apache2 using Debian symlinks with helper definitions
  cookbook_maintainer:   opscode
  cookbook_name:         apache2
instiki:
  cookbook:              http://cookbooks.opscode.com/api/v1/cookbooks/instiki
  cookbook_description:  Installs instiki, a Ruby on Rails wiki server under passenger+Apache2.
  cookbook_maintainer:   jtimberman
  cookbook_name:         instiki
kickstart:
  cookbook:              http://cookbooks.opscode.com/api/v1/cookbooks/kickstart
  cookbook_description:  Creates apache2 vhost and serves a kickstart file.
  cookbook_maintainer:   opscode
  cookbook_name:         kickstart
[...truncated...]
.ft P
.fi
.SS share
.sp
The \fBshare\fP argument is used to add a cookbook to \fI\%https://cookbooks.opscode.com\fP. This action will require a user account and a certificate for community.opscode.com. By default, Knife will use the user name and API key that is identified in the configuration file used during the upload; otherwise these values must be specified on the command line or in an alternate configuration file. If a cookbook already exists on \fI\%https://cookbooks.opscode.com\fP, then only an owner or maintainer of that cookbook can make updates.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife cookbook site share COOKBOOK_NAME CATEGORY (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fBCATEGORY\fP
The cookbook category: \fBDatabases\fP, \fBWeb Servers\fP, \fBProcess Management\fP, \fBMonitoring and Trending\fP, \fBProgramming Languages\fP, \fBPackage Management\fP, \fBApplications\fP, \fBNetworking\fP, \fBOperations Systems and Virtualization\fP, \fBUtilities\fP, or \fBOther\fP.
.TP
.B \fB\-o PATH:PATH\fP, \fB\-\-cookbook\-path PATH:PATH\fP
A colon\-separated path at which cookbooks are located.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife cookbook site share "apache2" "Web Servers"
.ft P
.fi
.SS show
.sp
The \fBshow\fP argument is used to view information about a cookbook on \fI\%https://cookbooks.opscode.com\fP.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife cookbook site show COOKBOOK_NAME [COOKBOOK_VERSION]
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fBCOOKBOOK_VERSION\fP
The version of a cookbook to be shown. If a cookbook has only one version, this option does not need to be specified. If a cookbook has more than one version and this option is not specified, a list of cookbook versions will be returned.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife cookbook site show haproxy
.ft P
.fi
.sp
to return something like:
.sp
.nf
.ft C
average_rating:
category:        Networking
created_at:      2009\-10\-25T23:51:07Z
description:     Installs and configures haproxy
external_url:
latest_version:  http://cookbooks.opscode.com/api/v1/cookbooks/haproxy/versions/1_0_3
maintainer:      opscode
name:            haproxy
updated_at:      2011\-06\-30T21:53:25Z
versions:
   http://cookbooks.opscode.com/api/v1/cookbooks/haproxy/versions/1_0_3
   http://cookbooks.opscode.com/api/v1/cookbooks/haproxy/versions/1_0_2
   http://cookbooks.opscode.com/api/v1/cookbooks/haproxy/versions/1_0_1
   http://cookbooks.opscode.com/api/v1/cookbooks/haproxy/versions/1_0_0
   http://cookbooks.opscode.com/api/v1/cookbooks/haproxy/versions/0_8_1
   http://cookbooks.opscode.com/api/v1/cookbooks/haproxy/versions/0_8_0
   http://cookbooks.opscode.com/api/v1/cookbooks/haproxy/versions/0_7_0
.ft P
.fi
.sp
To view information in JSON format, use the \fB\-F\fP common option as part of the command like this:
.sp
.nf
.ft C
$ knife cookbook site show haproxy \-F json
.ft P
.fi
.sp
Other formats available include \fBtext\fP, \fByaml\fP, and \fBpp\fP.
.SS unshare
.sp
The \fBunshare\fP argument is used to stop the sharing of a cookbook at \fI\%https://cookbooks.opscode.com\fP. Only the maintainer of a cookbook may perform this action.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife cookbook site unshare COOKBOOK_NAME
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example, to unshare a cookbook named "getting\-started", enter:
.sp
.nf
.ft C
$ knife cookbook site unshare getting\-started
.ft P
.fi
.SS cookbook
.sp
A cookbook is the fundamental unit of configuration and policy distribution in Chef. Each cookbook defines a scenario, such as everything needed to install and configure MySQL, and then it contains all of the components that are required to support that scenario, including:
.INDENT 0.0
.IP \(bu 2
Attribute values that are set on nodes
.IP \(bu 2
Definitions that allow the creation of reusable collections of resources
.IP \(bu 2
File distributions
.IP \(bu 2
Libraries that extend Chef and/or provide helpers to Ruby code
.IP \(bu 2
Recipes that specify which resources to manage and the order in which those resources will be applied
.IP \(bu 2
Custom resources and providers
.IP \(bu 2
Templates
.IP \(bu 2
Metadata about recipes (including dependencies), version constraints, supported platforms, and so on
.UNINDENT
.sp
The \fBcookbook\fP sub\-command is used to interact with cookbooks that are located on the Chef server or the local Chef repository.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife cookbook [ARGUMENT] (options)
.ft P
.fi
.SS bulk delete
.sp
The \fBbulk delete\fP argument is used to delete cookbook files that match a pattern defined by a regular expression. The regular expression must be within quotes and not be surrounded by forward slashes (/).
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife cookbook bulk delete REGEX (options)
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife cookbook bulk delete "^[0\-9]{3}$" \-p
.ft P
.fi
.SS create
.sp
The \fBcreate\fP argument is used to create a new cookbook directory on the local machine, including the following directories and files:
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
cookbook/attributes
.IP \(bu 2
cookbook/definitions
.IP \(bu 2
cookbook/files/default
.IP \(bu 2
cookbook/libraries
.IP \(bu 2
cookbook/metadata.rb
.IP \(bu 2
cookbook/providers
.IP \(bu 2
cookbook/readme.md (or .rdoc)
.IP \(bu 2
cookbook/recipes/default.rb
.IP \(bu 2
cookbook/resources
.IP \(bu 2
cookbook/templates/default
.UNINDENT
.UNINDENT
.UNINDENT
.sp
After the cookbook is created, it can be uploaded to the Chef server using the \fBknife upload\fP argument.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife cookbook create COOKBOOK_NAME (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-c COPYRIGHT_HOLDER\fP, \fB\-\-copyright COPYRIGHT_HOLDER\fP
The name of the copyright holder. This option will place a copyright notice that contains the name of the copyright holder in each of the pre\-created files. If this option is not specified, a copyright name of "your_company_name" will be used instead; it can be easily modified later.
.TP
.B \fB\-i LICENSE\fP, \fB\-\-license LICENSE\fP
The type of license under which a cookbook is distributed: \fBapachev2\fP, \fBgplv2\fP, \fBgplv3\fP, \fBmit\fP, or \fBnone\fP (default). This option will place the appropriate license notice in the pre\-created files. Be aware of the licenses for files inside of a cookbook and be sure to follow any restrictions they describe.
.TP
.B \fB\-m EMAIL\fP, \fB\-\-email EMAIL\fP
The email address for the individual who maintains the cookbook. This option will place an email address in each of the pre\-created files. If this option is not specified, an email name of "your_email" will be used instead; it can be easily modified later.
.TP
.B \fB\-o PATH\fP, \fB\-\-cookbook\-path PATH\fP
The directory in which the cookbook will be created.
.TP
.B \fB\-r FORMAT\fP, \fB\-\-readme\-format FORMAT\fP
The document format of the readme file: \fBmd\fP (markdown) and \fBrdoc\fP (Ruby docs).
.UNINDENT
.sp
The cookbook copyright, license, email, and readme format settings can be configured in a knife.rb file or using the Knife command prompt:
.sp
.nf
.ft C
cookbook_copyright "your_company_name"
cookbook_license "none"
cookbook_email "your_email"
readme_format "md"
.ft P
.fi
.sp
\fBExamples\fP
.sp
For example, to create a cookbook named "my_cookbook" with copyright, email, license, and readme format options specified, enter:
.sp
.nf
.ft C
$ knife cookbook create my_cookbook \-c "My Name" \-e "my@email.com" \-l apachev2 \-r md
.ft P
.fi
.sp
to return something like:
.sp
.nf
.ft C
** Creating cookbook my_cookbook
** Creating README for cookbook: my_cookbook
** Creating metadata for cookbook: my_cookbook
.ft P
.fi
.SS delete
.sp
The \fBdelete\fP argument is used to delete a specified cookbook or cookbook version on the Chef server (and not locally).
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife cookbook delete COOKBOOK_NAME [COOKBOOK_VERSION] (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-a\fP, \fB\-\-all\fP
Indicates that a cookbook and every version of that cookbook will be deleted.
.TP
.B \fBCOOKBOOK_VERSION\fP
The version of a cookbook to be deleted. If a cookbook has only one version, this option does not need to be specified. If a cookbook has more than one version and this option is not specified, Knife will prompt for a version.
.TP
.B \fB\-p\fP, \fB\-\-purge\fP
Indicates that a cookbook (or cookbook version) will be removed entirely from the Chef server. This action should be used carefully because only one copy of any single file is stored on the Chef server. Consequently, purging a cookbook will disable any other cookbook that references one or more files from a cookbook that has been purged.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to delete version "0.8" from a cookbook named "smartmon", enter:
.sp
.nf
.ft C
$ knife cookbook delete smartmon version 0.8
.ft P
.fi
.sp
Type \fBY\fP to confirm a deletion.
.SS download
.sp
The \fBdownload\fP argument is used to download a cookbook from the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife cookbook download COOKBOOK_NAME [COOKBOOK_VERSION] (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-d DOWNLOAD_DIRECTORY\fP, \fB\-\-dir DOWNLOAD_DIRECTORY\fP
The directory into which a cookbook will be downloaded.
.TP
.B \fB\-f\fP, \fB\-\-force\fP
Indicates that an existing directory will be overwritten.
.TP
.B \fB\-N\fP, \fB\-\-latest\fP
Indicates that the most recent version of a cookbook will be downloaded.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to download a cookbook named "smartmon", enter:
.sp
.nf
.ft C
$ knife cookbook download smartmon
.ft P
.fi
.SS list
.sp
The \fBlist\fP argument is used to view a list of cookbooks that are currently available on the Chef server. The list will contain only the most recent version for each cookbook by default.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife cookbook list (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-a\fP, \fB\-\-all\fP
Indicates that all available versions of each cookbook will be returned.
.TP
.B \fB\-w\fP, \fB\-\-with\-uri\fP
Indicates that the corresponding URIs will be shown.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife cookbook list
.ft P
.fi
.SS metadata
.sp
The \fBmetadata\fP argument is used to generate the metadata for one or more cookbooks.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife cookbook metadata (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-a\fP, \fB\-\-all\fP
Indicates that metadata should be generated for all cookbooks, and not just for a specified cookbook.
.TP
.B \fB\-o PATH:PATH\fP, \fB\-\-cookbook\-path PATH:PATH\fP
A colon\-separated path at which cookbooks are located.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to generate metadata for all cookbooks:
.sp
.nf
.ft C
$ knife cookbook metadata \-a
.ft P
.fi
.SS metadata from file
.sp
The \fBmetadata from file\fP argument is used to load the metadata for a cookbook from a file.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife cookbook metadata from file FILE
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife cookbook metadta from file /path/to/file
.ft P
.fi
.SS show
.sp
The \fBshow\fP argument is used to view information about a cookbook, parts of a cookbook (attributes, definitions, files, libraries, providers, recipes, resources, and templates), or a file that is associated with a cookbook (including attributes such as checksum or specificity).
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife cookbook show COOKBOOK_NAME [COOKBOOK_VERSION] [PART...] [FILE_NAME] (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fBCOOKBOOK_VERSION\fP
The version of a cookbook to be shown. If a cookbook has only one version, this option does not need to be specified. If a cookbook has more than one version and this option is not specified, a list of cookbook versions will be returned.
.TP
.B \fB\-f FQDN\fP, \fB\-\-fqdn FQDN\fP
The FQDN of the host.
.TP
.B \fBFILE_NAME\fP
The name of a file that is associated with a cookbook.
.TP
.B \fB\-p PLATFORM\fP, \fB\-\-platform PLATFORM\fP
The platform for which a cookbook is designed.
.TP
.B \fBPART\fP
The part of the cookbook to show: \fBattributes\fP, \fBdefinitions\fP, \fBfiles\fP, \fBlibraries\fP, \fBproviders\fP, \fBrecipes\fP, \fBresources\fP, or \fBtemplates\fP. More than one part can be specified.
.TP
.B \fB\-V PLATFORM_VERSION\fP, \fB\-\-platform\-version PLATFORM_VERSION\fP
The version of the platform.
.TP
.B \fB\-w\fP, \fB\-\-with\-uri\fP
Indicates that the corresponding URIs will be shown.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to get the list of available versions of a cookbook named "getting\-started", enter:
.sp
.nf
.ft C
$ knife cookbook show getting\-started
.ft P
.fi
.sp
to return something like:
.sp
.nf
.ft C
getting\-started   0.3.0  0.2.0
.ft P
.fi
.sp
To show a list of data about a cookbook using the name of the cookbook and the version, enter:
.sp
.nf
.ft C
$ knife cookbook show getting\-started 0.3.0
.ft P
.fi
.sp
to return something like:
.sp
.nf
.ft C
attributes:
  checksum:     fa0fc4abf3f6787aeb5c3c5c35de667c
  name:         default.rb
  path:         attributes/default.rb
  specificity:  default
  url:          https://somelongurlhere.com
chef_type:      cookbook_version
cookbook_name:  getting\-started
definitions:    []
files:          []
frozen?:        false
json_class:     Chef::CookbookVersion
libraries:      []
.ft P
.fi
.sp
To only view data about "templates", enter:
.sp
.nf
.ft C
$ knife cookbook show getting\-started 0.3.0 templates
.ft P
.fi
.sp
to return something like:
.sp
.nf
.ft C
checksum:     a29d6f254577b830091f140c3a78b1fe
name:         chef\-getting\-started.txt.erb
path:         templates/default/chef\-getting\-started.txt.erb
specificity:  default
url:          https://someurlhere.com
.ft P
.fi
.sp
To see if a cookbook named "redis" with a version number of "0.1.6" is frozen, enter:
.sp
.nf
.ft C
$ knife cookbook show redis 0.1.6 | grep frozen
.ft P
.fi
.sp
If the cookbook is frozen, something like the following is returned:
.sp
.nf
.ft C
frozen?:        true
.ft P
.fi
.sp
To view information in JSON format, use the \fB\-F\fP common option as part of the command like this:
.sp
.nf
.ft C
$ knife cookbook show getting\-started \-F json
.ft P
.fi
.sp
Other formats available include \fBtext\fP, \fByaml\fP, and \fBpp\fP.
.SS test
.sp
The \fBtest\fP argument is used to test a cookbook for syntax errors. This argument uses Ruby syntax checking to verify every file in a cookbook that ends in .rb and erb.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife cookbook test COOKBOOK_NAME (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-a\fP, \fB\-\-all\fP
Indicates that all cookbooks will be tested.
.TP
.B \fB\-o PATH:PATH\fP, \fB\-\-cookbook\-path PATH:PATH\fP
A colon\-separated path at which cookbooks are located.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to test a cookbook named "getting\-started", enter:
.sp
.nf
.ft C
$ knife cookbook test getting\-started
.ft P
.fi
.SS upload
.sp
The \fBupload\fP argument is used to upload one or more cookbooks (and any files that are associated with those cookbooks) from a local repository to the Chef server. Only files that do not already exist on the Chef server will be uploaded.
.IP Note
Use a chefignore file to prevent the upload of specific files and file types, such as temporary files or files placed in folders by version control systems. The chefignore file must be located in the root of the cookbook repository and must use rules similar to filename globbing (as defined by the Ruby File.fnmatch syntax).
.RE
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife cookbook upload [COOKBOOK_NAME...] (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-a\fP, \fB\-\-all\fP
Indicates that all cookbooks will be uploaded.
.TP
.B \fB\-d\fP, \fB\-\-include\-dependencies\fP
Indicates that when a cookbook has a dependency on one or more other cookbooks, those cookbooks will also be uploaded.
.TP
.B \fB\-\-force\fP
Indicates that a cookbook should be updated even if the \fB\-\-freeze\fP flag has been set.
.TP
.B \fB\-\-freeze\fP
Indicates that a cookbook cannot be modified; any changes to this cookbook must be included as a new version. Only the \fB\-\-force\fP option can override this setting.
.TP
.B \fB\-o PATH:PATH\fP, \fB\-\-cookbook\-path PATH:PATH\fP
A colon\-separated path at which cookbooks are located.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife cookbook upload getting\-started
.ft P
.fi
.sp
To upload a cookbook, and then prevent other users from being able to make changes to it, enter:
.sp
.nf
.ft C
$ knife cookbook upload redis \-\-freeze
.ft P
.fi
.sp
To return:
.sp
.nf
.ft C
Uploading redis...
Upload completed
.ft P
.fi
.sp
If a cookbook is frozen and the \fB\-\-force\fP option is not specified, Knife will return an error message similar to the following:
.sp
.nf
.ft C
Uploading redis...
ERROR: Version 0.1.6 of cookbook redis is frozen. Use \-\-force to override.
.ft P
.fi
.SS data bag
.sp
A data bag is a global variable that is stored as JSON data and is accessible from a Chef server. A data bag is indexed for searching and can be loaded by a recipe or accessed during a search. The contents of a data bag can vary, but they often include sensitive information (such as database passwords).
.sp
The contents of a data bag can be encrypted.
.INDENT 0.0
.IP \(bu 2
An encrypted data bag is always written using JSON as the serialization format. Chef and Knife support reading encrypted data bag items in both JSON (default) and YAML (backup).
.IP \(bu 2
Data is encrypted using a combination of JSON, AES\-256\-CBC (as defined by the \fBopenssl\fP package in the Ruby Standard Library), and Base64 encoding. This allows a data bag to store confidential information (such as a database password) or to be managed in a source control system (without plain\-text data appearing in revision history).
.IP \(bu 2
The system uses shared\-key encryption. An encrypted file can only be decrypted by a node or a user with the same shared\-key. Only designated nodes are able to decrypt values stored in an encrypted data bag.
.IP \(bu 2
A recipe can load encrypted data as long as the shared secret is present in a file on the node or is accessible from a URI path.
.IP \(bu 2
Only the values of a data bag item are decrypted; keys are still searchable. The values associated with the \fBid\fP key of a data bag item are not encrypted (because they are needed by Chef when tracking the data bag item).
.UNINDENT
.sp
The \fBdata bag\fP sub\-command is used to manage arbitrary stores of globally available JSON data.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife data bag [ARGUMENT] (options)
.ft P
.fi
.SS create
.sp
The \fBcreate\fP argument is used to add a data bag to the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife data bag create DATA_BAG_NAME [DATA_BAG_ITEM] (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fBDATA_BAG_ITEM\fP
The name of a specific item within a data bag.
.TP
.B \fB\-\-secret SECRET\fP
The encryption key that is used for values contained within a data bag.
.TP
.B \fB\-\-secret\-file FILE\fP
The path to the file that contains the encryption key.
.UNINDENT
.IP Note
For encrypted data bag items, use \fIeither\fP \fB\-\-secret\fP or \fB\-\-secret\-file\fP, not both.
.RE
.sp
\fBExamples\fP
.sp
For example, to create a data bag named "admins", enter:
.sp
.nf
.ft C
$ knife data bag create admins
.ft P
.fi
.sp
to return:
.sp
.nf
.ft C
Created data_bag[admins]
.ft P
.fi
.SS delete
.sp
The \fBdelete\fP argument is used to delete a data bag or a data bag item from a Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife data bag delete DATA_BAG_NAME [DATA_BAG_ITEM] (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fBDATA_BAG_ITEM\fP
The name of a specific item within a data bag.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife data bag delete admins
.ft P
.fi
.sp
Or, to delete an item named "charlie", enter:
.sp
.nf
.ft C
$ knife data bag delete admins charlie
.ft P
.fi
.sp
Type \fBY\fP to confirm a deletion.
.SS edit
.sp
The \fBedit\fP argument is used to edit the data contained in a data bag. If encryption is being used, the data bag will be decrypted, the data will be made available in the $EDITOR, and then encrypted again before saving it to the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife data bag edit DATA_BAG_NAME [DATA_BAG_ITEM] (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fBDATA_BAG_ITEM\fP
The name of a specific item within a data bag.
.TP
.B \fB\-\-secret SECRET\fP
The encryption key that is used for values contained within a data bag.
.TP
.B \fB\-\-secret\-file FILE\fP
The path to the file that contains the encryption key.
.UNINDENT
.IP Note
For encrypted data bag items, use \fIeither\fP \fB\-\-secret\fP or \fB\-\-secret\-file\fP, not both.
.RE
.sp
\fBExamples\fP
.sp
For example, to edit the contents of a data bag, enter:
.sp
.nf
.ft C
$ knife data bag edit admins
.ft P
.fi
.sp
To edit an item named "charlie" that is contained in a data bag named "admins", enter:
.sp
.nf
.ft C
$ knife data bag edit admins charlie
.ft P
.fi
.sp
to open the $EDITOR. Once opened, you can update the data before saving it to the Chef server. For example, by changing:
.sp
.nf
.ft C
{
   "id": "charlie"
}
.ft P
.fi
.sp
to:
.sp
.nf
.ft C
{
   "id": "charlie",
   "uid": 1005,
   "gid":"ops",
   "shell":"/bin/zsh",
   "comment":"Crazy Charlie"
}
.ft P
.fi
.SS from file
.sp
The \fBfrom file\fP argument is used to create a data bag using an existing data bag data as a template. The path to the data bag file must specify one of the following:
.INDENT 0.0
.IP \(bu 2
the name of a data bag
.IP \(bu 2
a relative or absolute path to a file
.UNINDENT
.sp
If the name of a data bag is specified, Knife will search for the data bag in ./data_bags/bag_name/file. Once opened, the JSON file should be a hash that contains at least an ID key which represents the name of the data bag item.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife data bag from file DATA_BAG_NAME_or_PATH
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-a\fP, \fB\-\-all\fP
Indicates that all data bags found at the specified path will be uploaded.
.TP
.B \fB\-\-secret SECRET\fP
The encryption key that is used for values contained within a data bag.
.TP
.B \fB\-\-secret\-file FILE\fP
The path to the file that contains the encryption key.
.UNINDENT
.IP Note
For encrypted data bag items, use \fIeither\fP \fB\-\-secret\fP or \fB\-\-secret\-file\fP, not both.
.RE
.sp
\fBExamples\fP
.sp
To create a data bag on the Chef server from a file:
.sp
.nf
.ft C
$ knife data bag from file "path to JSON file"
.ft P
.fi
.sp
To create a data bag named "devops_data" that contains encrypted data, enter:
.sp
.nf
.ft C
$ knife data bag from file devops_data \-\-secret\-file "path to decryption file"
.ft P
.fi
.SS list
.sp
The \fBlist\fP argument is used to view a list of data bags that are currently available on the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife data bag list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-w\fP, \fB\-\-with\-uri\fP
Indicates that the corresponding URIs will be shown.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to view a list of data bags on the Chef server, enter:
.sp
.nf
.ft C
$ knife data bag list
.ft P
.fi
.SS show
.sp
The \fBshow\fP argument is used to view the contents of a data bag.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife data bag show DATA_BAG_NAME (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fBDATA_BAG_ITEM\fP
The name of a specific item within a data bag.
.TP
.B \fB\-\-secret SECRET\fP
The encryption key that is used for values contained within a data bag.
.TP
.B \fB\-\-secret\-file FILE\fP
The path to the file that contains the encryption key.
.UNINDENT
.IP Note
For encrypted data bag items, use \fIeither\fP \fB\-\-secret\fP or \fB\-\-secret\-file\fP, not both.
.RE
.sp
\fBExamples\fP
.sp
For example, to show the contents of a data bag, enter:
.sp
.nf
.ft C
$ knife data bag show admins
.ft P
.fi
.sp
to return:
.sp
.nf
.ft C
charlie
.ft P
.fi
.sp
To show the contents of a specific item within data bag, enter:
.sp
.nf
.ft C
$ knife data bag show admins charlie
.ft P
.fi
.sp
to return:
.sp
.nf
.ft C
comment:  Crazy Charlie
gid:      ops
id:       charlie
shell:    /bin/zsh
uid:      1005
.ft P
.fi
.sp
To show the contents of a data bag named "passwords" with an item that contains encrypted data named "mysql", enter:
.sp
.nf
.ft C
$ knife data bag show passwords mysql
.ft P
.fi
.sp
to return:
.sp
.nf
.ft C
## sample:
{
  "id": "mysql",
  "pass": "trywgFA6R70NO28PNhMpGhEvKBZuxouemnbnAUQsUyo=\en",
  "user": "e/p+8WJYVHY9fHcEgAAReg==\en"
}
.ft P
.fi
.sp
To show the decrypted contents of the same databag, enter:
.sp
.nf
.ft C
$ knife data bag show \-\-secret\-file /path/to/decryption/file passwords mysql
.ft P
.fi
.sp
to return:
.sp
.nf
.ft C
## sample:
{
   "id": "mysql",
   "pass": "thesecret123",
   "user": "fred"
}
.ft P
.fi
.sp
To view information in JSON format, use the \fB\-F\fP common option as part of the command like this:
.sp
.nf
.ft C
$ knife data bag show admins \-F json
.ft P
.fi
.sp
Other formats available include \fBtext\fP, \fByaml\fP, and \fBpp\fP.
.SS delete
.sp
The \fBdelete\fP sub\-command is used to delete an object from a Chef server. This sub\-command works similar to \fBknife cookbook delete\fP, \fBknife data bag delete\fP, \fBknife environment delete\fP, \fBknife node delete\fP, and \fBknife role delete\fP, but with a single verb (and a single action).
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife delete [PATTERN...] (options)
.ft P
.fi
.sp
This sub\-command has the following options:
.INDENT 0.0
.TP
.B \fB\-\-recurse\fP
Use \fB\-\-recurse\fP to delete directories recursively. Default: \fB\-\-no\-recurse\fP.
.UNINDENT
.SS diff
.sp
The \fBdiff\fP sub\-command is used to compare the differences between files and directories on the Chef server and in the Chef repository. For example, to compare files on the Chef server prior to an uploading or downloading files using the \fBknife download\fP and \fBknife upload\fP sub\-commands, or to ensure that certain files in multiple production environments are the same. This sub\-command is similar to the \fBgit diff\fP command that can be used to diff what is in the Chef repository with what is synced to a github repository.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife diff [PATTERN...] (options)
.ft P
.fi
.sp
This sub\-command has the following options:
.INDENT 0.0
.TP
.B \fB\-\-name\-only\fP
Indicates that only the names of modified files will be shown.
.TP
.B \fB\-\-name\-status\fP
Indicates that only the names of files with a status of \fBAdded\fP, \fBDeleted\fP, \fBModified\fP, or \fBType Changed\fP will be shown.
.TP
.B \fB\-\-no\-recurse\fP
Use \fB\-\-no\-recurse\fP to disable listing a directory recursively. Default: \fB\-\-recurse\fP.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to compare the differences between the local Chef repository and the files that are on the Chef server, enter:
.sp
.nf
.ft C
$ knife diff
.ft P
.fi
.sp
To compare the "base.json" role to a "webserver.json" role, enter:
.sp
.nf
.ft C
$ knife diff roles/base.json roles/webserver.json
.ft P
.fi
.sp
To diff a node named \fBnode\-lb\fP and then only return files that have been added, deleted, modified, or changed, enter:
.sp
.nf
.ft C
$ knife diff \-\-name\-status node\-lb
.ft P
.fi
.sp
to return something like:
.sp
.nf
.ft C
node\-lb/recipes/eip.rb
node\-lb/recipes/heartbeat\-int.rb
node\-lb/templates/default/corpsite.conf.erb
node\-lb/files/default/wildcard.node.com.crt
node\-lb/files/default/wildcard.node.com.crt\-2009
node\-lb/files/default/wildcard.node.com.key
node\-lb/.gitignore
node\-lb/Rakefile
.ft P
.fi
.SS download
.sp
The \fBdownload\fP sub\-command is used to download roles, cookbooks, environments, nodes, and data bags from the Chef server to the current working directory.. It can be used to back up data on the Chef server, inspect the state of one or more files, or to extract out\-of\-process changes users may have made to files on the Chef server, such as if a user made a change that bypassed version source control. This sub\-command is often used in conjunction with \fBknife diff\fP, which can be used to see exactly what changes will be downloaded, and then \fBknife upload\fP, which does the opposite of \fBknife download\fP.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife download [PATTERN...] (options)
.ft P
.fi
.sp
This sub\-command has the following options:
.INDENT 0.0
.TP
.B \fB\-n\fP, \fB\-\-dry\-run\fP
Indicates that no action is taken and that results are only printed out.
.TP
.B \fB\-\-purge\fP
Use \fB\-\-purge\fP to delete local files and directories that do not exist on the Chef server.  By default, if a role, cookbook, etc. does not exist on the Chef server, the local file for said role will be left alone and NOT deleted.  Default: \fB\-\-no\-purge\fP.
.TP
.B \fB\-\-no\-recurse\fP
Use \fB\-\-no\-recurse\fP to disable downloading a directory recursively.  Default: \fB\-\-recurse\fP.
.TP
.B \fB\-\-force\fP
Use \fB\-\-force\fP to download files even when the file on the hard drive is identical to the object on the server (role, cookbook, etc.).  By default, files are compared to see if they have equivalent content, and local files are only overwritten if they are different.  Default: \fB\-\-no\-force\fP.
.UNINDENT
.sp
\fBExamples\fP
.sp
To download the entire Chef repository from the Chef server, browse to the top level of the Chef repository and enter:
.sp
.nf
.ft C
$ knife download
.ft P
.fi
.sp
or from anywhere in the Chef repository, enter:
.sp
.nf
.ft C
$ knife download /
.ft P
.fi
.sp
To download the \fBcookbooks/\fP directory from the Chef server, browse to the top level of the Chef repository and enter:
.sp
.nf
.ft C
$ knife download cookbooks
.ft P
.fi
.sp
or from anywhere in the Chef repository, enter:
.sp
.nf
.ft C
$ knife download /cookbooks
.ft P
.fi
.sp
To download the \fBenvironments/\fP directory from the Chef server, browse to the top level of the Chef repository and enter:
.sp
.nf
.ft C
$ knife download environments
.ft P
.fi
.sp
or from anywhere in the Chef repository, enter:
.sp
.nf
.ft C
$ knife download /environments
.ft P
.fi
.sp
To download an environment named "production" from the Chef server, browse to the top level of the Chef repository and enter:
.sp
.nf
.ft C
$ knife download environments/production.json
.ft P
.fi
.sp
or from the \fBenvironments/\fP directory, enter:
.sp
.nf
.ft C
$ knife download production.json
.ft P
.fi
.sp
To download the \fBroles/\fP directory from the Chef server, browse to the top level of the Chef repository and enter:
.sp
.nf
.ft C
$ knife download roles
.ft P
.fi
.sp
or from anywhere in the Chef repository, enter:
.sp
.nf
.ft C
$ knife download /roles
.ft P
.fi
.sp
To download all cookbooks that start with "apache" and belong to the "webserver" role, browse to the top level of the Chef repository and enter:
.sp
.nf
.ft C
$  knife download cookbooks/apache\e* roles/webserver.json
.ft P
.fi
.SS ec2 (plug\-in)
.sp
Amazon EC2 is a web service that provides resizable compute capacity in the cloud, based on pre\-configured operating systems and virtual application software using Amazon Machine Images (AMI). The \fBec2\fP sub\-command is used to manage API\-driven cloud servers that are hosted by Amazon EC2.
.sp
This plugin should be installed using RubyGems.
.IP Note
This plugin requires the \fBknife windows\fP plugin to be present on the same machine.
.RE
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife ec2 [ARGUMENT] (options)
.ft P
.fi
.SS instance data
.sp
The \fBinstance data\fP argument is used to generate instance metadata used with custom Opscode Amazon Machine Images (AMI). This process will read the validation certificate and Chef server URL from the Knife configuration file (~/.chef/knife.rb) and will output the data in JSON format.
.IP Warning
Using this sub\-command is an older way of launching Amazon EC2 instances for Chef and should be considered deprecated. Using the \fBserver create\fP sub\-command is preferred (and more flexible). Although this sub\-command will remain, the Opscode custom Amazon Machine Images (AMI) are out of date.
.RE
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife ec2 instance data (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A KEY\fP, \fB\-\-aws\-access\-key\-id KEY\fP
The access key identifier used with Amazon EC2.
.TP
.B \fB\-e\fP, \fB\-\-edit\fP
Indicates that instance data should be edited using the default text editor.
.TP
.B \fB\-K SECRET\fP, \fB\-\-aws\-secret\-access\-key SECRET\fP
The secret access key for the API endpoint used with Amazon EC2.
.TP
.B \fB\-r RUN_LIST\fP, \fB\-\-run\-list RUN_LIST\fP
A comma\-separated list of roles and/or recipes to be applied.
.TP
.B \fB\-\-region REGION\fP
The name of the region from which instances of hosted applications are launched. Each region has a unique endpoint.
.UNINDENT
.SS server create
.sp
The \fBserver create\fP argument is used to create a new Amazon EC2 cloud instance. This will provision a new image in Amazon EC2, perform a Chef bootstrap (using the SSH protocol), and then install Chef on the target system so that it can be run as a chef\-client and communicate with a Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife ec2 server create (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A KEY\fP, \fB\-\-aws\-access\-key\-id KEY\fP
The access key identifier used with Amazon EC2.
.TP
.B \fB\-bootstrap\-protocol PROTOCOL\fP
The protocol used to bootstrap on a machine that is running Windows Server: \fBwinrm\fP or \fBssh\fP.
.TP
.B \fB\-\-bootstrap\-version VERSION\fP
The version of Chef to install.
.TP
.B \fB\-d DISTRO\fP, \fB\-\-distro DISTRO\fP
The template file to be used during a bootstrap operation. Use this option if the specific location of the template file is unknown. The following distributions are supported: \fBchef\-full\fP (the default bootstrap), \fBcentos5\-gems\fP, \fBfedora13\-gems\fP, \fBubuntu10.04\-gems\fP, \fBubuntu10.04\-apt\fP, and \fBubuntu12.04\-gems\fP. If this option is used, Knife will search for the template file in the following order: a \fBbootstrap/\fP folder in the current working directory, a \fBbootstrap/\fP folder in the Chef repository, a \fBbootstrap/\fP folder in \fB~/.chef/\fP, or a bootstrap file shipped with Chef. Do not use the \fB\-\-template\-file\fP option when \fB\-\-distro\fP is specified.
.TP
.B \fB\-\-ebs\-size SIZE\fP
The size of the Amazon Elastic Block Store volume, in GB. This option is only available for instances that are backed with Amazon Elastic Block Store.
.TP
.B \fB\-\-ebs\-no\-delete\-on\-term\fP
Indicates that the Amazon Elastic Block Store volume will not be deleted upon instance termination. This option is only available for instances that are backed with Amazon Elastic Block Store.
.TP
.B \fB\-ephemeral DEVICE\fP
A comma\-separated list of device locations to be mapped to ephemeral devices.
.TP
.B \fB\-f FLAVOR\fP, \fB\-\-flavor FLAVOR\fP
The name of the flavor that identifies the hardware configuration of the server, including disk space, memory capacity, and CPU priority.
.TP
.B \fB\-fqdn FQDN\fP
A pre\-defined FQDN.
.TP
.B \fB\-g X,Y,Z\fP, \fB\-\-security\-group\-ids X,Y,Z\fP
A comma\-separated list of security group identifiers. Required when using Amazon Virtual Private Cloud.
.TP
.B \fB\-G X,Y,Z\fP, \fB\-\-groups X,Y,Z\fP
A comma\-separated list of security groups. Not supported when using Amazon Virtual Private Cloud.
.TP
.B \fB\-hint HINT_NAME[=HINT_FILE]\fP
Indicates that an Ohai hint will be set on the target of the bootstrap. Use multiple \fB\-\-hint\fP options to specify multiple hints.
.TP
.B \fB\-i IDENTITY_FILE\fP, \fB\-\-identity\-file IDENTITY_FILE\fP
The SSH identity file used for authentication. Key\-based authentication is recommended.
.TP
.B \fB\-I IMAGE\fP, \fB\-\-image IMAGE\fP
The name of the image that identifies the operating system (and version) that will be used to create the virtual machine.
.TP
.B \fB\-K SECRET\fP, \fB\-\-aws\-secret\-access\-key SECRET\fP
The secret access key for the API endpoint used with Amazon EC2.
.TP
.B \fB\-N NAME\fP, \fB\-\-node\-name NAME\fP
The name of the node.
.TP
.B \fB\-\-[no\-]host\-key\-verify\fP
Use \fB\-\-no\-host\-key\-verify\fP to disable host key verification. Default setting: \fB\-\-host\-key\-verify\fP.
.TP
.B \fB\-p PORT\fP, \fB\-\-ssh\-port PORT\fP
The SSH port.
.TP
.B \fB\-P PASSWORD\fP, \fB\-\-ssh\-password PASSWORD\fP
The SSH password. This can be used to pass the password directly on the command line. If this option is not specified (and a password is required) Knife will prompt for the password.
.TP
.B \fB\-\-prerelease\fP
Indicates that pre\-release Chef gems should be installed.
.TP
.B \fB\-r RUN_LIST\fP, \fB\-\-run\-list RUN_LIST\fP
A comma\-separated list of roles and/or recipes to be applied.
.TP
.B \fB\-\-region REGION\fP
The name of the region from which instances of hosted applications are launched. Each region has a unique endpoint.
.TP
.B \fB\-s SUBNET_ID\fP, \fB\-\-subnet SUBNET_ID\fP
The Amazon Virtual Private Cloud instance in which a node will be created.
.TP
.B \fB\-S KEY\fP, \fB\-\-ssh\-key KEY\fP
The SSH key for the Amazon EC2 environment.
.TP
.B \fB\-server\-connect\-attribute ATTRIBUTE\fP
The attribute that is used when opening the SSH connection. This should be an Amazon EC2 server attribute.
.TP
.B \fB\-\-T Tag=Value[,Tag=Value]\fP, \fB\-\-tags Tag=Value[,Tag=Value]\fP
The tags for this server.
.TP
.B \fB\-\-template\-file TEMPLATE\fP
The path to a template file that will be used during a bootstrap operation. Do not use the \fB\-\-distro\fP option when \fB\-\-template\-file\fP is specified.
.TP
.B \fB\-u USER_DATA_FILE\fP, \fB\-\-user\-data USER_DATA_FILE\fP
The Amazon EC2 user data file used during instance provisioning.
.TP
.B \fB\-w GATEWAY\fP, \fB\-\-ssh\-gateway GATEWAY\fP
The SSH tunnel or gateway that is used to run a bootstrap action on a machine that is not accessible from the workstation.
.TP
.B \fB\-x USERNAME\fP, \fB\-\-ssh\-user USERNAME\fP
The SSH user name.
.TP
.B \fB\-Z ZONE"\fP, \fB\-\-availability\-zone ZONE\fP
The name of the Amazon EC2 availability zone. Each availability zone is unique within a region. Default: \fBus\-east\-1b\fP.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to launch a new Amazon EC2 instance with the "webserver" role, enter:
.sp
.nf
.ft C
$ knife ec2 server create \-r "role[webserver]" \-I ami\-2d4aa444 \-\-flavor m1.small \-G www,default \-x ubuntu \-N server01
.ft P
.fi
.sp
To launch a new Amazon EC2 instance with multiple roles, enter:
.sp
.nf
.ft C
$ knife ec2 server create \-r "role[base],role[webserver]" \-I ami\-2d4aa444 \-G www,default \-x ubuntu \-\-node\-name server01
.ft P
.fi
.SS server delete
.sp
The \fBserver delete\fP argument is used to delete one or more nodes that are running in the Amazon EC2 cloud. To find a specific cloud instance, use the \fBknife ec2 server list\fP argument. Use the \fB\-\-purge\fP option to delete all associated node and client objects from the Chef server or use the \fBknife node delete\fP and \fBknife client delete\fP sub\-commands to delete specific node and client objects.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife ec2 server delete SERVER [NODE_NAME...] (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A KEY\fP, \fB\-\-aws\-access\-key\-id KEY\fP
The access key identifier used with Amazon EC2.
.TP
.B \fB\-K SECRET\fP, \fB\-\-aws\-secret\-access\-key SECRET\fP
The secret access key for the API endpoint used with Amazon EC2.
.TP
.B \fB\-N NODE_NAME\fP, \fB\-\-node\-name NODE_NAME\fP
The name of the node to be deleted, if different from the server name. This must be used with the \fB\-\-purge\fP option.
.TP
.B \fB\-p\fP, \fB\-\-purge\fP
Indicates that all corresponding nodes and clients on the Chef server will be destroyed, in addition to the Amazon EC2 node itself. This action (by itself) assumes that the node and client have the same name as the server; if they do not have the same names, then the \fB\-\-node\-name\fP option must be used to specify the name of the node.
.TP
.B \fB\-\-region REGION\fP
The name of the region from which instances of hosted applications are launched. Each region has a unique endpoint.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to delete a node called "preprod" in an instance named "operations", enter:
.sp
.nf
.ft C
$ knife ec2 server delete operations preprod
.ft P
.fi
.SS server list
.sp
The \fBserver list\fP argument is used to find instances that are associated with a Amazon EC2 account. The results may show instances that are not currently managed by the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife ec2 server list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A KEY\fP, \fB\-\-aws\-access\-key\-id KEY\fP
The access key identifier used with Amazon EC2.
.TP
.B \fB\-n\fP, \fB\-\-no\-name\fP
Indicates that tag names will not be displayed in the output.
.TP
.B \fB\-\-region REGION\fP
The name of the region from which instances of hosted applications are launched. Each region has a unique endpoint.
.TP
.B \fB\-t TAG1, TAG2\fP, \fB\-\-tags TAG1, TAG2\fP
A list of tags that will be displayed in the output.
.UNINDENT
.SS environment
.sp
An environment is a way to map an organization\(aqs real\-life workflow to what can be configured and managed when using Chef server. Every Chef organization begins with a single environment called the \fB_default\fP environment, which cannot be modified (or deleted). Additional environments can be created, such as production, staging, testing, and development. Generally, an environment is also associated with one (or more) cookbook versions.
.sp
The \fBenvironment\fP sub\-command is used to manage environments within a single organization on the Chef server.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife environment [ARGUMENT] (options)
.ft P
.fi
.SS create
.sp
The \fBcreate\fP argument is used to add an environment object to the Chef server. When this argument is run, Knife will open $EDITOR to enable editing of the ENVIRONMENT description field (unless a description is specified as part of the command). When finished, Knife will add the environment to the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife environment create ENVIRONMENT_NAME \-d DESCRIPTION
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-d DESCRIPTION\fP, \fB\-\-description DESCRIPTION\fP
The description of the environment. This value will populate the description field for the environment on the Chef server.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife environment create dev \-d "The development environment."
.ft P
.fi
.SS delete
.sp
The \fBdelete\fP argument is used to delete an environment from a Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife environment delete ENVIRONMENT_NAME
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example, to delete an environment named "dev", enter:
.sp
.nf
.ft C
$ knife environment delete dev
.ft P
.fi
.sp
Type \fBY\fP to confirm a deletion.
.SS edit
.sp
The \fBedit\fP argument is used to edit the attributes of an environment. When this argument is run, Knife will open $EDITOR to enable editing of ENVIRONMENT attributes. When finished, Knife will update the Chef server with those changes.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife environment edit ENVIRONMENT_NAME
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example, to edit an environment named "devops", enter:
.sp
.nf
.ft C
$ knife environment edit devops
.ft P
.fi
.SS from file
.sp
The \fBfrom file\fP argument is used to add or update an environment using a JSON or Ruby DSL description. It must be run with the \fBcreate\fP or \fBedit\fP arguments.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife environment [create | edit] from file FILE (options)
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife environment create devops from file "path to JSON file"
.ft P
.fi
.sp
or:
.sp
.nf
.ft C
$ knife environment edit devops from file "path to JSON file"
.ft P
.fi
.SS list
.sp
The \fBlist\fP argument is used to list all of the environments that are currently available on the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife environment list \-w
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-w\fP, \fB\-\-with\-uri\fP
Indicates that the corresponding URIs will be shown.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife environment list \-w
.ft P
.fi
.SS show
.sp
The \fBshow\fP argument is used to display information about the specified environment.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife environment show ENVIRONMENT_NAME
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example, to view information about the "dev" environment enter:
.sp
.nf
.ft C
$ knife environment show dev
.ft P
.fi
.sp
to return:
.sp
.nf
.ft C
% knife environment show dev
chef_type:            environment
cookbook_versions:
default_attributes:
description:
json_class:           Chef::Environment
name:                 dev
override_attributes:

\e\e
\e\e
\e\e
\e\e
.ft P
.fi
.sp
To view information in JSON format, use the \fB\-F\fP common option as part of the command like this:
.sp
.nf
.ft C
$ knife environment show dev \-F json
.ft P
.fi
.sp
Other formats available include \fBtext\fP, \fByaml\fP, and \fBpp\fP.
.SS eucalyptus (plug\-in)
.sp
Eucalyptus is an infrastructure as a service (IaaS) platform that supports hybrid\-IaaS configurations that allow data to move between hosted and on\-premise data centers. The \fBeucalyptus\fP sub\-command is used to manage API\-driven cloud servers that are hosted by Eucalyptus.
.sp
This plugin should be installed using RubyGems.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife eucalyptus [ARGUMENT] (options)
.ft P
.fi
.SS flavor list
.sp
The \fBflavor list\fP argument is used to get a list of servers from the Eucalyptus environment, listed by ID, architecture, RAM, and disks, and cores.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife eucalyptus flavor list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A ID\fP, \fB\-\-euca\-access\-key\-id ID\fP
The access key identifier for Eucalyptus.
.TP
.B \fB\-\-euca\-api\-endpoint ENDPOINT\fP
The Eucalyptus API endpoint.
.TP
.B \fB\-K SECRET\fP, \fB\-\-euca\-secret\-access\-key SECRET\fP
The secret access key for Eucalyptus.
.TP
.B \fB\-\-region REGION\fP
The name of the region from which instances of hosted applications are launched.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, enter:
.sp
.nf
.ft C
$ knife eucalyptus flavor list
.ft P
.fi
.SS image list
.sp
The \fBimage list\fP argument is used to list of images from the Eucalyptus environment, listed by ID, kernel ID, architecture, and location.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife eucalyptus image list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A ID\fP, \fB\-\-euca\-access\-key\-id ID\fP
The access key identifier for Eucalyptus.
.TP
.B \fB\-E ENVIRONMENT\fP, \fB\-\-environment ENVIRONMENT\fP
The name of the Chef server environment. When this option is added to a command, the command will run only against the named environment.
.TP
.B \fB\-\-euca\-api\-endpoint ENDPOINT\fP
The Eucalyptus API endpoint.
.TP
.B \fB\-K SECRET\fP, \fB\-\-euca\-secret\-access\-key SECRET\fP
The secret access key for Eucalyptus.
.TP
.B \fB\-\-region REGION\fP
The name of the region from which instances of hosted applications are launched.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, enter:
.sp
.nf
.ft C
$ knife eucalyptus flavor list
.ft P
.fi
.SS server create
.sp
The \fBserver create\fP argument is used to create a new Eucalyptus cloud instance. This will provision a new image in Eucalyptus, perform a Chef bootstrap (using the SSH protocol), and then install Chef on the target system so that it can be run as a chef\-client and communicate with a Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife eucalyptus server create (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A ID\fP, \fB\-\-euca\-access\-key\-id ID\fP
The access key identifier for Eucalyptus.
.TP
.B \fB\-\-bootstrap\-version VERSION\fP
The version of Chef to install.
.TP
.B \fB\-\-euca\-api\-endpoint ENDPOINT\fP
The Eucalyptus API endpoint.
.TP
.B \fB\-f FLAVOR\fP, \fB\-\-flavor FLAVOR\fP
The name of the flavor that identifies the hardware configuration of the server, including disk space, memory capacity, and CPU priority.
.TP
.B \fB\-G X,Y,Z\fP, \fB\-\-groups X,Y,Z\fP
A comma\-separated list of security groups.
.TP
.B \fB\-i IDENTITY_FILE\fP, \fB\-\-identity\-file IDENTITY_FILE\fP
The SSH identity file used for authentication. Key\-based authentication is recommended.
.TP
.B \fB\-I IMAGE\fP, \fB\-\-image IMAGE\fP
The name of the image that identifies the operating system (and version) that will be used to create the virtual machine.
.TP
.B \fB\-K SECRET\fP, \fB\-\-euca\-secret\-access\-key SECRET\fP
The secret access key for Eucalyptus.
.TP
.B \fB\-N NAME\fP, \fB\-\-node\-name NAME\fP
The name of the node.
.TP
.B \fB\-\-[no\-]host\-key\-verify\fP
Use \fB\-\-no\-host\-key\-verify\fP to disable host key verification. Default setting: \fB\-\-host\-key\-verify\fP.
.TP
.B \fB\-P PASSWORD\fP, \fB\-\-ssh\-password PASSWORD\fP
The SSH password. This can be used to pass the password directly on the command line. If this option is not specified (and a password is required) Knife will prompt for the password.
.TP
.B \fB\-\-prerelease\fP
Indicates that pre\-release Chef gems should be installed.
.TP
.B \fB\-r RUN_LIST\fP, \fB\-\-run\-list RUN_LIST\fP
A comma\-separated list of roles and/or recipes to be applied.
.TP
.B \fB\-\-region REGION\fP
The name of the region from which instances of hosted applications are launched.
.TP
.B \fB\-S KEY\fP, \fB\-\-ssh\-key KEY\fP
The SSH key for the Eucalyptus environment.
.TP
.B \fB\-\-template\-file TEMPLATE\fP
The path to a template file that will be used during a bootstrap operation. Do not use the \fB\-\-distro\fP option when \fB\-\-template\-file\fP is specified.
.TP
.B \fB\-x USER_NAME\fP, \fB\-\-ssh\-user USER_NAME\fP
The SSH user name.
.TP
.B \fB\-Z ZONE\fP, \fB\-\-availability\-zone ZONE\fP
The name of the Eucalyptus availability zone. Each availability zone is unique within a region. Default: \fBus\-east\-1b\fP.
.UNINDENT
.SS server delete
.sp
The \fBserver delete\fP argument is used to delete one or more instances that are running in the Eucalyptus cloud. To find a specific cloud instance, use the \fBknife eucalyptus server list\fP argument. Use the \fBknife node delete\fP and \fBknife client delete\fP sub\-commands to delete associated node and client objects (if required).
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife eucalyptus server delete [SERVER_ID...]
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A ID\fP, \fB\-\-euca\-access\-key\-id ID\fP
The access key identifier for Eucalyptus.
.TP
.B \fB\-\-euca\-api\-endpoint ENDPOINT\fP
The Eucalyptus API endpoint.
.TP
.B \fB\-k KEY\fP, \fB\-\-key KEY\fP
The private key that Knife will use to sign requests made by the API client to the Chef server.
.TP
.B \fB\-K SECRET\fP, \fB\-\-euca\-secret\-access\-key SECRET\fP
The secret access key for Eucalyptus.
.TP
.B \fB\-\-region REGION\fP
The name of the region from which instances of hosted applications are launched.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to delete an instance named "devops2012", enter:
.sp
.nf
.ft C
$ knife eucalyptus server delete devops2012
.ft P
.fi
.SS server list
.sp
The \fBserver list\fP argument is used to find instances that are associated with a Eucalyptus account. The results may show instances that are not currently managed by the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife eucalyptus server list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A ID\fP, \fB\-\-euca\-access\-key\-id ID\fP
The access key identifier for Eucalyptus.
.TP
.B \fB\-\-euca\-api\-endpoint ENDPOINT\fP
The Eucalyptus API endpoint.
.TP
.B \fB\-K SECRET\fP, \fB\-\-euca\-secret\-access\-key SECRET\fP
The secret access key for Eucalyptus.
.TP
.B \fB\-\-region REGION\fP
The name of the region from which instances of hosted applications are launched.
.UNINDENT
.SS exec
.sp
The \fBexec\fP sub\-command uses the Knife configuration file to execute Ruby scripts in the context of a fully configured chef\-client. This sub\-command is most often used to run scripts that will only access Chef server one time (or otherwise very infrequently). Use this command any time that an operation does not warrant full usage of the Knife sub\-command library.
.sp
For Ruby scripts that will be run using the \fBexec\fP sub\-command, note the following:
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
The Ruby script must be located on the system from which Knife is run (and not be located on any of the systems that Knife will be managing).
.IP \(bu 2
Shell commands will be run from a management workstation. For example, something like \fB%x[ls \-lash /opt/only\-on\-a\-node]\fP would give you the directory listing for the "opt/only\-on\-a\-node" directory or a "No such file or directory" error if the file does not already exist locally.
.IP \(bu 2
When the Shef DSL is available, the chef\-client DSL will not be (unless the management workstation is also a chef\-client). Without the chef\-client DSL, a bash block cannot be used to run bash commands.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife exec SCRIPT (options)
.ft P
.fi
.sp
This sub\-command has the following options:
.INDENT 0.0
.TP
.B \fB\-E CODE\fP, \fB\-\-exec CODE\fP
A string of code that will be executed.
.TP
.B \fB\-p PATH:PATH\fP, \fB\-\-script\-path PATH:PATH\fP
A colon\-separated path at which Ruby scripts are located.
.UNINDENT
.sp
\fBExamples\fP
.sp
There are three ways to use \fBknife exec\fP to run Ruby script files. For example:
.sp
.nf
.ft C
$ knife exec /path/to/script_file
.ft P
.fi
.sp
Or:
.sp
.nf
.ft C
$ knife exec \-E \(aqRUBY CODE\(aq
.ft P
.fi
.sp
Or:
.sp
.nf
.ft C
$ knife exec
RUBY CODE
^D
.ft P
.fi
.sp
For example, to list all of the available search indexes, enter:
.sp
.nf
.ft C
$ knife exec \-E \(aqputs api.get("search").keys\(aq
.ft P
.fi
.sp
Or to show the available free memory for all nodes, enter:
.sp
.nf
.ft C
$ knife exec \-E \(aqnodes.all {|n| puts "#{n.name} has #{n.memory.total} free memory"}\(aq
.ft P
.fi
.sp
Or to check the status of Knife using a Ruby script named "status.rb" (which looks like):
.sp
.nf
.ft C
printf "%\-5s %\-12s %\-8s %s\en", "Check In", "Name", "Ruby", "Recipes"
nodes.all do |n|
   checkin = Time.at(n[\(aqohai_time\(aq]).strftime("%F %R")
   rubyver = n[\(aqlanguages\(aq][\(aqruby\(aq][\(aqversion\(aq]
   recipes = n.run_list.expand.recipes.join(", ")
   printf "%\-20s %\-12s %\-8s %s\en", checkin, n.name, rubyver, recipes
end
.ft P
.fi
.sp
and is located in a directory named "scripts", enter:
.sp
.nf
.ft C
$ knife exec scripts/status.rb
.ft P
.fi
.sp
To query a node for multiple attributes using a Ruby script named search_attributes.rb (which looks like):
.sp
.nf
.ft C
% cat scripts/search_attributes.rb
query = ARGV[2]
attributes = ARGV[3].split(",")
puts "Your query: #{query}"
puts "Your attributes: #{attributes.join(" ")}"
results = {}
search(:node, query) do |n|
   results[n.name] = {}
   attributes.each {|a| results[n.name][a] = n[a]}
end

puts results
exit 0
.ft P
.fi
.sp
enter:
.sp
.nf
.ft C
% knife exec scripts/search_attributes.rb "hostname:test_system" ipaddress,fqdn
.ft P
.fi
.sp
to return something like:
.sp
.nf
.ft C
Your query: hostname:test_system
Your attributes: ipaddress fqdn
{"test_system.example.com"=>{"ipaddress"=>"10.1.1.200", "fqdn"=>"test_system.example.com"}}
.ft P
.fi
.SS google (plug\-in)
.sp
Google Compute Engine is a cloud hosting platform that offers scalable and flexible virtual machine computing. The \fBgoogle\fP sub\-command is used to manage API\-driven cloud servers that are hosted by Google Compute Engine.
.sp
This plugin should be installed using RubyGems.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife google [ARGUMENT] (options)
.ft P
.fi
.SS server create
.sp
The \fBserver create\fP argument is used to create a new Google Compute Engine cloud instance. This will provision a new image in Google Compute Engine, perform a Chef bootstrap (using the SSH protocol), and then install Chef on the target system so that it can be run as a chef\-client and communicate with a Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife google server create SERVER_NAME [RUN_LIST] (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-d DISTRO\fP, \fB\-\-distro DISTRO\fP
The template file to be used during a bootstrap operation. Use this option if the specific location of the template file is unknown. The following distributions are supported: \fBchef\-full\fP (the default bootstrap), \fBcentos5\-gems\fP, \fBfedora13\-gems\fP, \fBubuntu10.04\-gems\fP, \fBubuntu10.04\-apt\fP, and \fBubuntu12.04\-gems\fP. If this option is used, Knife will search for the template file in the following order: a \fBbootstrap/\fP folder in the current working directory, a \fBbootstrap/\fP folder in the Chef repository, a \fBbootstrap/\fP folder in \fB~/.chef/\fP, or a bootstrap file shipped with Chef. Do not use the \fB\-\-template\-file\fP option when \fB\-\-distro\fP is specified.
.TP
.B \fB\-e IP_ADDRESS\fP, \fB\-\-external\-ip\-address IP_ADDRESS\fP
A static IP address that is provided by Google Compute Engine.
.TP
.B \fB\-f FLAVOR\fP, \fB\-\-flavor FLAVOR\fP
The name of the flavor that identifies the hardware configuration of the server, including disk space, memory capacity, and CPU priority.
.TP
.B \fB\-i PRIVATE_KEY_FILE\fP, \fB\-\-private\-key\-file PRIVATE_KEY_FILE\fP
The file in which the SSH private key used for authentication is located.
.TP
.B \fB\-I IMAGE\fP, \fB\-\-google\-image IMAGE\fP
The name of the virtual application template or image that will be used to create the virtual machine. Default: \fBgcompute8\-standard\fP.
.TP
.B \fB\-k PUBLIC_KEY_FILE\fP, \fB\-\-public\-key\-file PUBLIC_KEY_FILE\fP]
The file in which the SSH public key used for authentication is located.
.TP
.B \fB\-n NETWORK_NAME\fP, \fB\-\-network NETWORK_NAME\fP
The name of the network in which the virtual machine will be created.
.TP
.B \fB\-N NODE_NAME\fP, \fB\-\-node\-name NODE_NAME\fP
The name of the node.
.TP
.B \fB\-p PROJECT\fP, \fB\-\-project_id PROJECT\fP
The identifier for the Google Compute Engine project.
.TP
.B \fB\-P IP_ADDRESS\fP, \fB\-\-internal\-ip\-address IP_ADDRESS\fP
A static IP address that is provided by Google Compute Engine.
.TP
.B \fB\-r RUN_LIST\fP, \fB\-\-run\-list RUN_LIST\fP
A comma\-separated list of roles and/or recipes to be applied.
.TP
.B \fB\-s SERVER_NAME\fP, \fB\-\-server\-name SERVER_NAME\fP
The name of the server.
.TP
.B \fB\-\-template\-file TEMPLATE\fP
The path to a template file that will be used during a bootstrap operation. Do not use the \fB\-\-distro\fP option when \fB\-\-template\-file\fP is specified.
.TP
.B \fB\-x USER_NAME\fP, \fB\-\-ssh\-user USER_NAME\fP
The SSH user name.
.TP
.B \fB\-Z ZONE\fP, \fB\-\-availability\-zone ZONE\fP
The name of the Google Compute Engine availability zone. Each availability zone is unique within a region. Default: \fBus\-east\-a\fP.
.UNINDENT
.SS server delete
.sp
The \fBserver delete\fP argument is used to delete one or more instances that are running in the Google Compute Engine cloud. To find a specific cloud instance, use the \fBknife google server list\fP argument. Use the \fBknife node delete\fP and \fBknife client delete\fP sub\-commands to delete associated node and client objects (if required).
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife google server delete SERVER_NAME (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-p PROJECT_NAME\fP, \fB\-\-project\-id PROJECT_NAME\fP
The identifier for the Google Compute Engine project.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to delete a server named "devops01" from a project named "engineering", enter:
.sp
.nf
.ft C
$ knife google server delete devops1 engineering
.ft P
.fi
.SS server list
.sp
The \fBserver list\fP argument is used to find instances that are associated with a Google Compute Engine account. The results may show instances that are not currently managed by the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife google server list (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-p PROJECT_NAME\fP, \fB\-\-project\-id PROJECT_NAME\fP
The identifier for the Google Compute Engine project.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to view a list of instances associated with a project named "dev\-01", enter:
.sp
.nf
.ft C
$ knife google server list \-p dev\-01
.ft P
.fi
.SS hp (plug\-in)
.sp
HP Cloud Compute is a cloud hosting platform that provides computing, storage, identity, and other services across private, managed, and public clouds. The \fBhp\fP sub\-command is used to manage API\-driven cloud servers that are hosted by HP Cloud Compute.
.sp
This plugin should be installed using RubyGems.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife hp [ARGUMENT] (options)
.ft P
.fi
.SS flavor list
.sp
The \fBflavor list\fP argument is used to get a list of servers from the HP Cloud Compute environment, listed by ID, name, cores, RAM, and disk size.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife hp flavor list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A ID\fP, \fB\-\-hp\-account ID\fP
The access key identifier for the HP Cloud Compute account.
.TP
.B \fB\-\-hp\-auth URI\fP
The URI used during authentication to the HP Cloud Compute account.
.TP
.B \fB\-K SECRET\fP, \fB\-\-hp\-secret SECRET\fP
The secret key for the HP Cloud Compute account.
.TP
.B \fB\-T ID\fP, \fB\-\-hp\-tenant ID\fP
The tenant identifier that represents a collection of service subscriptions and/or resources in the HP Cloud Compute account.
.TP
.B \fB\-Z ZONE\fP, \fB\-\-hp\-zone ZONE\fP
The name of the HP Cloud Compute availability zone.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, enter:
.sp
.nf
.ft C
$ knife hp flavor list
.ft P
.fi
.sp
to return:
.sp
.nf
.ft C
ID        Name              Cores     RAM          Disk
100       standard.xsmall   1         1024 MB      30 GB
101       standard.small    2         2048 MB      60 GB
102       standard.medium   2         4096 MB      120 GB
103       standard.large    4         8192 MB      240 GB
104       standard.xlarge   4         16384 MB     480 GB
105       standard.2xlarge  8         32768 MB     960 GB
.ft P
.fi
.SS image list
.sp
The \fBimage list\fP argument is used to list of images from the HP Cloud Compute environment, listed by ID and name.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife hp image list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A ID\fP, \fB\-\-hp\-account ID\fP
The access key identifier for the HP Cloud Compute account.
.TP
.B \fB\-\-hp\-auth URI\fP
The URI used during authentication to the HP Cloud Compute account.
.TP
.B \fB\-K SECRET\fP, \fB\-\-hp\-secret SECRET\fP
The secret key for the HP Cloud Compute account.
.TP
.B \fB\-T ID\fP, \fB\-\-hp\-tenant ID\fP
The tenant identifier that represents a collection of service subscriptions and/or resources in the HP Cloud Compute account.
.TP
.B \fB\-Z ZONE\fP, \fB\-\-hp\-zone ZONE\fP
The name of the HP Cloud Compute availability zone.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, enter:
.sp
.nf
.ft C
$ knife hp flavor list
.ft P
.fi
.sp
to return:
.sp
.nf
.ft C
ID                Name
1234              CentOS 5.6 Server 64\-bit
1358              CentOS 6.2 Server 64\-bit
1361              Debian Squeeze 6.0.3 Server 64\-bit
1236              Ubuntu Lucid 10.04 LTS Server 64\-bit
1238              Ubuntu Maverick 10.10 Server 64\-bit
1240              Ubuntu Natty 11.04 Server 64\-bit
1242              Ubuntu Oneiric 11.10 Server 64\-bit
.ft P
.fi
.SS server create
.sp
The \fBserver create\fP argument is used to create a new HP Cloud Compute cloud instance. This will provision a new image in HP Cloud Compute, perform a Chef bootstrap (using the SSH protocol), and then install Chef on the target system so that it can be run as a chef\-client and communicate with a Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife hp server create (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A ID\fP, \fB\-\-hp\-account ID\fP
The access key identifier for the HP Cloud Compute account.
.TP
.B \fB\-\-bootstrap\-proxy PROXY_URL\fP
The proxy server for the node that is the target of a bootstrap operation.
.TP
.B \fB\-\-bootstrap\-version VERSION\fP
The version of Chef to install.
.TP
.B \fB\-d DISTRO\fP, \fB\-\-distro DISTRO\fP
The template file to be used during a bootstrap operation. Use this option if the specific location of the template file is unknown. The following distributions are supported: \fBchef\-full\fP (the default bootstrap), \fBcentos5\-gems\fP, \fBfedora13\-gems\fP, \fBubuntu10.04\-gems\fP, \fBubuntu10.04\-apt\fP, and \fBubuntu12.04\-gems\fP. If this option is used, Knife will search for the template file in the following order: a \fBbootstrap/\fP folder in the current working directory, a \fBbootstrap/\fP folder in the Chef repository, a \fBbootstrap/\fP folder in \fB~/.chef/\fP, or a bootstrap file shipped with Chef. Do not use the \fB\-\-template\-file\fP option when \fB\-\-distro\fP is specified.
.TP
.B \fB\-f FLAVOR_ID\fP, \fB\-\-flavor FLAVOR_ID\fP
The name of the flavor that identifies the hardware configuration of the server, including disk space, memory capacity, and CPU priority.
.TP
.B \fB\-G X,Y,Z\fP, \fB\-\-groups X,Y,Z\fP
A comma\-separated list of security groups.
.TP
.B \fB\-\-hp\-auth URI\fP
The URI used during authentication to the HP Cloud Compute account.
.TP
.B \fB\-i IDENTITY_FILE\fP, \fB\-\-identity\-file IDENTITY_FILE\fP
The SSH identity file used for authentication. Key\-based authentication is recommended.
.TP
.B \fB\-I IMAGE_ID\fP, \fB\-\-image IMAGE_ID\fP
The name of the image that identifies the operating system (and version) that will be used to create the virtual machine.
.TP
.B \fB\-K SECRET\fP, \fB\-\-hp\-secret SECRET\fP
The secret key for the HP Cloud Compute account.
.TP
.B \fB\-N NODE_NAME\fP, \fB\-\-node\-name NODE_NAME\fP
The name of the node.
.TP
.B \fB\-\-[no\-]host\-key\-verify\fP
Use \fB\-\-no\-host\-key\-verify\fP to disable host key verification. Default setting: \fB\-\-host\-key\-verify\fP.
.TP
.B \fB\-P PASSWORD\fP, \fB\-\-ssh\-password PASSWORD\fP
The SSH password. This can be used to pass the password directly on the command line. If this option is not specified (and a password is required) Knife will prompt for the password.
.TP
.B \fB\-\-prerelease\fP
Indicates that pre\-release Chef gems should be installed.
.TP
.B \fB\-r RUN_LIST\fP, \fB\-\-run\-list RUN_LIST\fP
A comma\-separated list of roles and/or recipes to be applied.
.TP
.B \fB\-S KEY\fP, \fB\-\-ssh\-key KEY\fP
The SSH key for the HP Cloud Compute environment.
.TP
.B \fB\-T ID\fP, \fB\-\-hp\-tenant ID\fP
The tenant identifier that represents a collection of service subscriptions and/or resources in the HP Cloud Compute account.
.TP
.B \fB\-\-template\-file TEMPLATE\fP
The path to a template file that will be used during a bootstrap operation. Do not use the \fB\-\-distro\fP option when \fB\-\-template\-file\fP is specified.
.TP
.B \fB\-x USER_NAME\fP, \fB\-\-ssh\-user USER_NAME\fP
The SSH user name.
.TP
.B \fB\-Z ZONE\fP, \fB\-\-hp\-zone ZONE\fP
The name of the HP Cloud Compute availability zone.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to provision a server and then perform a bootstrap operation (using SSH), enter:
.sp
.nf
.ft C
$ knife hp server create \-f 101 \-I 1236 \-S hptesting \-x ubuntu \-i ~/.ssh/hptesting.pem \-d omnibus \-r \(aqrole[base]\(aq 2
.ft P
.fi
.sp
to return something like:
.sp
.nf
.ft C
Instance ID: 65646
Instance Name: hp15\-185\-114\-127
Flavor: 101
Image: 1236
SSH Key Pair: hptesting

Waiting for server............................................
Public IP Address: 15.185.114.127
Private IP Address: 10.4.21.238

Waiting for sshd..done
Bootstrapping Chef on 15.185.114.127
15.185.114.127 \-\-2012\-03\-09 18:18:17\-\-  http://opscode.com/chef/install.sh
\&............

\&............
15.185.114.127 [Fri, 09 Mar 2012 18:19:20 +0000] INFO: Chef Run complete in 25.468149268 seconds
15.185.114.127 [Fri, 09 Mar 2012 18:19:20 +0000] INFO: Running report handlers
15.185.114.127 [Fri, 09 Mar 2012 18:19:20 +0000] INFO: Report handlers complete

Instance ID: 65646
Instance Name: hp15\-185\-114\-127
Flavor: 101
Image: 1236
SSH Key Pair: hptesting
Public IP Address: 15.185.114.127
Private IP Address: 10.4.21.238
Environment: _default
Run List: role[base]
.ft P
.fi
.SS server delete
.sp
The \fBserver delete\fP argument is used to delete one or more instances that are running in the HP Cloud Compute cloud. To find a specific cloud instance, use the \fBknife hp server list\fP argument. Use the \fBknife node delete\fP and \fBknife client delete\fP sub\-commands to delete associated node and client objects (if required).
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife hp server delete [SERVER_NAME...]
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A ID\fP, \fB\-\-hp\-account ID\fP
The access key identifier for the HP Cloud Compute account.
.TP
.B \fB\-\-hp\-auth URI\fP
The URI used during authentication to the HP Cloud Compute account.
.TP
.B \fB\-K SECRET\fP, \fB\-\-hp\-secret SECRET\fP
The secret key for the HP Cloud Compute account.
.TP
.B \fB\-N NODE_NAME\fP, \fB\-\-node\-name NODE_NAME\fP
The name of the node to be deleted, if different from the server name. This must be used with the \fB\-\-purge\fP option.
.TP
.B \fB\-T ID\fP, \fB\-\-hp\-tenant ID\fP
The tenant identifier that represents a collection of service subscriptions and/or resources in the HP Cloud Compute account.
.TP
.B \fB\-Z ZONE\fP, \fB\-\-hp\-zone ZONE\fP
The name of the HP Cloud Compute availability zone.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to delete an instance named "65646", enter:
.sp
.nf
.ft C
$ knife hp server delete 65646
.ft P
.fi
.sp
to return:
.sp
.nf
.ft C
Instance ID: 65646
Instance Name: hp15\-185\-114\-127
Flavor: 101
Image: 1236
Public IP Address: 15.185.114.127
Private IP Address: 10.4.21.238

WARNING: Deleted server 65646
.ft P
.fi
.SS server list
.sp
The \fBserver list\fP argument is used to find instances that are associated with an HP Cloud Compute account. The results may show instances that are not currently managed by the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife hp server list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A ID\fP, \fB\-\-hp\-account ID\fP
The access key identifier for the HP Cloud Compute account.
.TP
.B \fB\-\-hp\-auth URI\fP
The URI used during authentication to the HP Cloud Compute account.
.TP
.B \fB\-K SECRET\fP, \fB\-\-hp\-secret SECRET\fP
The secret key for the HP Cloud Compute account.
.TP
.B \fB\-T ID\fP, \fB\-\-hp\-tenant ID\fP
The tenant identifier that represents a collection of service subscriptions and/or resources in the HP Cloud Compute account.
.TP
.B \fB\-Z ZONE\fP, \fB\-\-hp\-zone ZONE\fP
The name of the HP Cloud Compute availability zone.
.UNINDENT
.SS index rebuild
.sp
The \fBindex rebuild\fP sub\-command is used to rebuild the search indexes for the Open Source Chef server. This operation is destructive and may take some time.
.IP Note
This sub\-command ONLY works when run against the Open Source Chef server and will not run against any other flavor of Chef, including Hosted Chef and Private Chef.
.RE
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife index rebuild
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.SS linode (plug\-in)
.sp
Linode is a cloud hosting platform that provides virtual private server hosting from the kernal and root access on up. The \fBlinode\fP sub\-command is used to manage API\-driven cloud servers that are hosted by Linode.
.sp
This plugin should be installed using RubyGems.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife linode [ARGUMENT] (options)
.ft P
.fi
.SS datacenter list
.sp
The \fBdatacenter list\fP argument is used to view a list of available data centers, listed by data center ID and location.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife linode datacenter list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A KEY\fP, \fB\-\-linode\-api\-key KEY\fP
The Linode API key.
.UNINDENT
.SS flavor list
.sp
The \fBflavor list\fP argument is used to get a list of servers from the Linode environment, listed by ID, name, RAM, disk, and Price.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife linode flavor list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A KEY\fP, \fB\-\-linode\-api\-key KEY\fP
The Linode API key.
.UNINDENT
.SS image list
.sp
The \fBimage list\fP argument is used to list of images from the Linode environment, listed by ID, name, bits, and image size.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife linode image list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A KEY\fP, \fB\-\-linode\-api\-key KEY\fP
The Linode API key.
.UNINDENT
.SS kernel list
.sp
The \fBkernel list\fP argument is used to view a list of available kernels, listed by ID and name.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife linode kernel list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A KEY\fP, \fB\-\-linode\-api\-key KEY\fP
The Linode API key.
.UNINDENT
.SS server create
.sp
The \fBserver create\fP argument is used to create a new Linode cloud instance. This will provision a new image in Linode, perform a Chef bootstrap (using the SSH protocol), and then install Chef on the target system so that it can be run as a chef\-client and communicate with a Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife linode server create (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A KEY\fP, \fB\-\-linode\-api\-key KEY\fP
The Linode API key.
.TP
.B \fB\-\-bootstrap\-version VERSION\fP
The version of Chef to install.
.TP
.B \fB\-d DISTRO\fP, \fB\-\-distro DISTRO\fP
The template file to be used during a bootstrap operation. Use this option if the specific location of the template file is unknown. The following distributions are supported: \fBchef\-full\fP (the default bootstrap), \fBcentos5\-gems\fP, \fBfedora13\-gems\fP, \fBubuntu10.04\-gems\fP, \fBubuntu10.04\-apt\fP, and \fBubuntu12.04\-gems\fP. If this option is used, Knife will search for the template file in the following order: a \fBbootstrap/\fP folder in the current working directory, a \fBbootstrap/\fP folder in the Chef repository, a \fBbootstrap/\fP folder in \fB~/.chef/\fP, or a bootstrap file shipped with Chef. Do not use the \fB\-\-template\-file\fP option when \fB\-\-distro\fP is specified.
.TP
.B \fB\-D DATACENTER\fP, \fB\-\-linode\-datacenter DATACENTER\fP
The datacenter for the Linode server.
.TP
.B \fB\-f FLAVOR\fP, \fB\-\-linode\-flavor FLAVOR\fP
The flavor of the Linode server.
.TP
.B \fB\-i IDENTITY_FILE\fP, \fB\-\-identity\-file IDENTITY_FILE\fP
The SSH identity file used for authentication. Key\-based authentication is recommended.
.TP
.B \fB\-I IMAGE\fP, \fB\-\-linode\-image IMAGE\fP
The image for the Linode server.
.TP
.B \fB\-k KERNEL\fP, \fB\-\-linode\-kernel KERNEL\fP
The kernel for the Linode server.
.TP
.B \fB\-L NAME\fP, \fB\-\-linode\-node\-name NAME\fP
The name of the node in the Linode environment.
.TP
.B \fB\-N NAME\fP, \fB\-\-node\-name NAME\fP
The name of the node.
.TP
.B \fB\-\-[no\-]host\-key\-verify\fP
Use \fB\-\-no\-host\-key\-verify\fP to disable host key verification. Default setting: \fB\-\-host\-key\-verify\fP.
.TP
.B \fB\-P PASSWORD\fP, \fB\-\-ssh\-password PASSWORD\fP
The SSH password. This can be used to pass the password directly on the command line. If this option is not specified (and a password is required) Knife will prompt for the password.
.TP
.B \fB\-\-prerelease\fP
Indicates that pre\-release Chef gems should be installed.
.TP
.B \fB\-r RUN_LIST\fP, \fB\-\-run\-list RUN_LIST\fP
A comma\-separated list of roles and/or recipes to be applied.
.TP
.B \fB\-\-template\-file TEMPLATE\fP
The path to a template file that will be used during a bootstrap operation. Do not use the \fB\-\-distro\fP option when \fB\-\-template\-file\fP is specified.
.TP
.B \fB\-x USER_NAME\fP, \fB\-\-ssh\-user USER_NAME\fP
The SSH user name.
.UNINDENT
.SS server delete
.sp
The \fBserver delete\fP argument is used to delete one or more instances that are running in the Linode cloud. To find a specific cloud instance, use the \fBknife linode server list\fP argument. Use the \fBknife node delete\fP and \fBknife client delete\fP sub\-commands to delete associated node and client objects (if required).
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife linode server delete LINODE_ID
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A KEY\fP, \fB\-\-linode\-api\-key KEY\fP
The Linode API key.
.UNINDENT
.SS server list
.sp
The \fBserver list\fP argument is used to find instances that are associated with a Linode account. The results may show instances that are not currently managed by the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife linode server list
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.SS server reboot
.sp
The \fBserver reboot\fP argument is used to reboot all of the servers in a Linode environment.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife linode server reboot LINODE_ID
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.SS stackscript list
.sp
Linode StackScripts are customized distribution templates. This argument is used to view a list of Linode StackScripts that are currently being used.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife linode stackscript list
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.SS list
.sp
The \fBlist\fP sub\-command is used to view a list of objects on the Chef server. This sub\-command works similar to \fBknife cookbook list\fP, \fBknife data bag list\fP, \fBknife environment list\fP, \fBknife node list\fP, and \fBknife role list\fP, but with a single verb (and a single action).
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife list [PATTERN...] (options)
.ft P
.fi
.sp
This sub\-command has the following options:
.INDENT 0.0
.TP
.B \fB\-d\fP
Indicates that a directory\(aqs children will not be shown when a directory matches a pattern.
.TP
.B \fB\-R\fP
Indicates that directories will be listed recursively.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to view a list of roles on the Chef server:
.sp
.nf
.ft C
$ knife list roles/
.ft P
.fi
.sp
To view a list of roles and environments on the Chef server:
.sp
.nf
.ft C
$ knife list roles/ environments/
.ft P
.fi
.sp
To view a list of absolutely everything on the Chef server:
.sp
.nf
.ft C
$ knife list \-R /
.ft P
.fi
.SS node
.sp
A node is any server or virtual server that is configured to be maintained by a chef\-client. A node can be physical or cloud\-based. A Chef organization is comprised of any combination of physical and cloud\-based nodes. A chef\-client runs on each node. Ohai is used to collect data about the system so that it is available to the chef\-client during every Chef run.
.sp
The \fBnode\fP sub\-command is used to manage the nodes that exist on a Chef server.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife node [ARGUMENT] (options)
.ft P
.fi
.SS bulk delete
.sp
The \fBbulk delete\fP argument is used to delete one or more nodes that match a pattern defined by a regular expression. The regular expression must be within quotes and not be surrounded by forward slashes (/).
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife node bulk delete REGEX
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife node bulk delete "^[0\-9]{3}$"
.ft P
.fi
.sp
Type \fBY\fP to confirm a deletion.
.SS create
.sp
The \fBcreate\fP argument is used to add a node to the Chef server. Node data is stored as JSON on the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife node create NODE_NAME
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example, to add a node, enter:
.sp
.nf
.ft C
$ knife node create node1
.ft P
.fi
.sp
In the $EDITOR enter the node data in JSON:
.sp
.nf
.ft C
## sample:
{
   "normal": {
   },
   "name": "foobar",
   "override": {
   },
   "default": {
   },
   "json_class": "Chef::Node",
   "automatic": {
   },
   "run_list": [
      "recipe[zsh]",
      "role[webserver]"
   ],
   "chef_type": "node"
}
.ft P
.fi
.sp
When finished, save it.
.SS delete
.sp
The \fBdelete\fP argument is used to delete a node from the Chef server.
.IP Note
Deleting a node will not delete any corresponding API clients.
.RE
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife node delete NODE_NAME
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example, to delete a node called "dev", enter:
.sp
.nf
.ft C
$ knife node delete dev
.ft P
.fi
.SS edit
.sp
The \fBedit\fP argument is used to edit the details of a node on a Chef server. Node data is stored as JSON on the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife node edit NODE_NAME (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-a\fP, \fB\-\-all\fP
Displays a node in the $EDITOR. By default, attributes that are default, override, or automatic are not shown.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to edit the data for a node named "node1", enter:
.sp
.nf
.ft C
$ knife node edit node1 \-a
.ft P
.fi
.sp
Update the role data in JSON:
.sp
.nf
.ft C
## sample:
{
   "normal": {
   },
   "name": "node1",
   "override": {
   },
   "default": {
   },
   "json_class": "Chef::Node",
   "automatic": {
   },
   "run_list": [
      "recipe[devops]",
      "role[webserver]"
   ],
   "chef_type": "node"
}
.ft P
.fi
.sp
When finished, save it.
.SS from file
.sp
The \fBfrom file\fP argument is used to create a node using existing node data as a template.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife node from file FILE
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife node from file "path to JSON file"
.ft P
.fi
.SS list
.sp
The \fBlist\fP argument is used to view all of the nodes that exist on a Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife node list (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-w\fP, \fB\-\-with\-uri\fP
Indicates that the corresponding URIs will be shown.
.UNINDENT
.sp
\fBExamples\fP
.sp
To verify the list of nodes that are registered with the Chef server, enter:
.sp
.nf
.ft C
$ knife node list
.ft P
.fi
.sp
to return something similar to:
.sp
.nf
.ft C
i\-12345678
rs\-123456
.ft P
.fi
.SS run_list add
.sp
The \fBrun_list add\fP argument is used to add run list items (roles or recipes) to a node. A recipe must be in one of the following formats: fully qualified, cookbook, or default. Both roles and recipes must be in quotes, for example: \fB\(aqrole[ROLE_NAME]\(aq\fP or \fB\(aqrecipe[COOKBOOK::RECIPE_NAME]\(aq\fP. Use a comma to separate roles and recipes when adding more than one, like this: \fB\(aqrecipe[COOKBOOK::RECIPE_NAME],COOKBOOK::RECIPE_NAME,role[ROLE_NAME]\(aq\fP.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife node run_list add NODE_NAME RUN_LIST_ITEM (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-a ITEM\fP, \fB\-\-after ITEM\fP
Use this to add the run list item after the specified run list item.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to add a role to a run list, enter:
.sp
.nf
.ft C
$ knife node run_list add node \(aqrole[ROLE_NAME]\(aq
.ft P
.fi
.sp
To add a recipe to a run list using the fully qualified format, enter:
.sp
.nf
.ft C
$ knife node run_list add node \(aqrecipe[COOKBOOK::RECIPE_NAME]\(aq
.ft P
.fi
.sp
To add a recipe to a run list using the cookbook format, enter:
.sp
.nf
.ft C
$ knife node run_list add node \(aqCOOKBOOK::RECIPE_NAME\(aq
.ft P
.fi
.sp
To add the default recipe of a cookbook to a run list, enter:
.sp
.nf
.ft C
$ knife node run_list add node \(aqCOOKBOOK\(aq
.ft P
.fi
.sp
To add roles and recipes to a run list, enter:
.sp
.nf
.ft C
$ knife node run_list add node \(aqrecipe[COOKBOOK::RECIPE_NAME],COOKBOOK::RECIPE_NAME,role[ROLE_NAME]\(aq
.ft P
.fi
.SS run_list remove
.sp
The \fBrun_list remove\fP argument is used to remove run list items (roles or recipes) from a node. A recipe must be in one of the following formats: fully qualified, cookbook, or default. Both roles and recipes must be in quotes, for example: \fB\(aqrole[ROLE_NAME]\(aq\fP or \fB\(aqrecipe[COOKBOOK::RECIPE_NAME]\(aq\fP. Use a comma to separate roles and recipes when removing more than one, like this: \fB\(aqrecipe[COOKBOOK::RECIPE_NAME],COOKBOOK::RECIPE_NAME,role[ROLE_NAME]\(aq\fP.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife node run_list remove NODE_NAME RUN_LIST_ITEM
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example, to remove a role from a run list, enter:
.sp
.nf
.ft C
$ knife node run_list remove node \(aqrole[ROLE_NAME]\(aq
.ft P
.fi
.sp
To remove a recipe from a run list using the fully qualified format, enter:
.sp
.nf
.ft C
$ knife node run_list remove node \(aqrecipe[COOKBOOK::RECIPE_NAME]\(aq
.ft P
.fi
.SS show
.sp
The \fBshow\fP argument is used to display information about a node.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife node show NODE_NAME (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-a ATTR\fP, \fB\-\-attribute ATTR\fP
Indicates that only a single attribute is shown, as defined by the \fBATTR\fP value.
.TP
.B \fB\-l\fP, \fB\-\-long\fP
Display long output when searching nodes while using the default summary format.
.TP
.B \fB\-m\fP, \fB\-\-medium\fP
Display more, but not all, of a node\(aqs data when searching using the default summary format.
.TP
.B \fB\-r\fP, \fB\-\-run\-list\fP
Indicates that only the run\-list will be shown.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to view all data for a node named "build", enter:
.sp
.nf
.ft C
$ knife node show build
.ft P
.fi
.sp
to return:
.sp
.nf
.ft C
Node Name:   build
Environment: _default
FQDN:
IP:
Run List:
Roles:
Recipes:
Platform:
.ft P
.fi
.sp
To view the FQDN for a node named "i\-12345678", enter:
.sp
.nf
.ft C
$ knife node show i\-12345678 \-a fqdn
.ft P
.fi
.sp
to return:
.sp
.nf
.ft C
fqdn: ip\-10\-251\-75\-20.ec2.internal
.ft P
.fi
.sp
To view the run list for a node named "dev", enter:
.sp
.nf
.ft C
$ knife node show dev \-r
.ft P
.fi
.sp
To view information in JSON format, use the \fB\-F\fP common option as part of the command like this:
.sp
.nf
.ft C
$ knife node show i\-12345678 \-F json
.ft P
.fi
.sp
Other formats available include \fBtext\fP, \fByaml\fP, and \fBpp\fP.
.SS openstack (plug\-in)
.sp
OpenStack is a cloud operating system that provides support for provisioning large networks of virtual machines, pluggable and scalable network and IP management, and object and block storage. The \fBopenstack\fP sub\-command is used to manage API\-driven cloud servers that are hosted by OpenStack.
.sp
This plugin should be installed using RubyGems.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife openstack [ARGUMENT] (options)
.ft P
.fi
.SS flavor list
.sp
The \fBflavor list\fP argument is used to show a list of flavors in an OpenStack environment, including details such as ID, name, architecture, RAM, disk, and cores.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife openstack flavor list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A ID\fP, \fB\-\-openstack\-access\-key\-id ID\fP
The access key identifier used with the OpenStack environment.
.TP
.B \fB\-K SECRET\fP, \fB\-\-openstack\-secret\-access\-key SECRET\fP
The secret access key for the API endpoint used with the OpenStack environment.
.TP
.B \fB\-\-openstack\-api\-endpoint ENDPOINT\fP
The API endpoint used with the OpenStack environment.
.TP
.B \fB\-\-region REGION\fP
The name of the region from which instances of hosted applications are launched.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, enter:
.sp
.nf
.ft C
$ knife openstack flavor list
.ft P
.fi
.SS image list
.sp
The \fBimage list\fP argument is used to show a list of images in an OpenStack environment, including details such as ID, kernel ID, architecture, root store, name, and location.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife openstack image list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A ID\fP, \fB\-\-openstack\-access\-key\-id ID\fP
The access key identifier used with the OpenStack environment.
.TP
.B \fB\-K SECRET\fP, \fB\-\-openstack\-secret\-access\-key SECRET\fP
The secret access key for the API endpoint used with the OpenStack environment.
.TP
.B \fB\-\-openstack\-api\-endpoint ENDPOINT\fP
The API endpoint used with the OpenStack environment.
.TP
.B \fB\-\-region REGION\fP
The name of the region from which instances of hosted applications are launched.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to view a list of images, enter:
.sp
.nf
.ft C
$ knife openstack image list
.ft P
.fi
.SS server create
.sp
The \fBserver create\fP argument is used to create a new OpenStack cloud instance.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife openstack server create (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A ID\fP, \fB\-\-openstack\-access\-key\-id ID\fP
The access key identifier used with the OpenStack environment.
.TP
.B \fB\-\-bootstrap\-version VERSION\fP
The version of Chef to install.
.TP
.B \fB\-d DISTRO\fP, \fB\-\-distro DISTRO\fP
The template file to be used during a bootstrap operation. Use this option if the specific location of the template file is unknown. The following distributions are supported: \fBchef\-full\fP (the default bootstrap), \fBcentos5\-gems\fP, \fBfedora13\-gems\fP, \fBubuntu10.04\-gems\fP, \fBubuntu10.04\-apt\fP, and \fBubuntu12.04\-gems\fP. If this option is used, Knife will search for the template file in the following order: a \fBbootstrap/\fP folder in the current working directory, a \fBbootstrap/\fP folder in the Chef repository, a \fBbootstrap/\fP folder in \fB~/.chef/\fP, or a bootstrap file shipped with Chef. Do not use the \fB\-\-template\-file\fP option when \fB\-\-distro\fP is specified.
.TP
.B \fB\-f FLAVOR\fP, \fB\-\-flavor FLAVOR\fP
The name of the flavor that identifies the hardware configuration of the server, including disk space, memory capacity, and CPU priority.
.TP
.B \fB\-G X,Y,Z\fP, \fB\-\-groups X,Y,Z\fP
A comma\-separated list of security groups.
.TP
.B \fB\-i IDENTITY_FILE\fP, \fB\-\-identity\-file IDENTITY_FILE\fP
The SSH identity file used for authentication. Key\-based authentication is recommended.
.TP
.B \fB\-I IMAGE\fP, \fB\-\-image IMAGE\fP
The name of the image that identifies the operating system (and version) that will be used to create the virtual machine.
.TP
.B \fB\-K SECRET\fP, \fB\-\-openstack\-secret\-access\-key SECRET\fP
The secret access key for the API endpoint used with the OpenStack environment.
.TP
.B \fB\-N NAME\fP, \fB\-\-node\-name NAME\fP
The name of the node.
.TP
.B \fB\-\-[no\-]host\-key\-verify\fP
Use \fB\-\-no\-host\-key\-verify\fP to disable host key verification. Default setting: \fB\-\-host\-key\-verify\fP.
.TP
.B \fB\-\-openstack\-api\-endpoint ENDPOINT\fP
The API endpoint used with the OpenStack environment.
.TP
.B \fB\-P PASSWORD\fP, \fB\-\-ssh\-password PASSWORD\fP
The SSH password. This can be used to pass the password directly on the command line. If this option is not specified (and a password is required) Knife will prompt for the password.
.TP
.B \fB\-\-prerelease\fP
Indicates that pre\-release Chef gems should be installed.
.TP
.B \fB\-r RUN_LIST\fP, \fB\-\-run\-list RUN_LIST\fP
A comma\-separated list of roles and/or recipes to be applied.
.TP
.B \fB\-\-region REGION\fP
The name of the region from which instances of hosted applications are launched.
.TP
.B \fB\-S KEY\fP, \fB\-\-ssh\-key KEY\fP
The SSH key for the OpenStack environment.
.TP
.B \fB\-\-template\-file TEMPLATE\fP
The path to a template file that will be used during a bootstrap operation. Do not use the \fB\-\-distro\fP option when \fB\-\-template\-file\fP is specified.
.TP
.B \fB\-x USERNAME\fP, \fB\-\-ssh\-user USERNAME\fP
The SSH user name.
.TP
.B \fB\-Z ZONE"\fP, \fB\-\-availability\-zone ZONE\fP
The name of the OpenStack availability zone. Each availability zone is unique within a region. Default: \fBus\-east\-1b\fP.
.UNINDENT
.SS server delete
.sp
The \fBserver delete\fP argument is used to delete one or more instances that are running in the OpenStack cloud. To find a specific cloud instance, use the \fBknife openstack server list\fP argument. Use the \fBknife node delete\fP and \fBknife client delete\fP sub\-commands to delete associated node and client objects (if required).
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife openstack server delete [SERVER...]
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A ID\fP, \fB\-\-openstack\-access\-key\-id ID\fP
The access key identifier used with the OpenStack environment.
.TP
.B \fB\-K SECRET\fP, \fB\-\-openstack\-secret\-access\-key SECRET\fP
The secret access key for the API endpoint used with the OpenStack environment.
.TP
.B \fB\-\-openstack\-api\-endpoint ENDPOINT\fP
The API endpoint used with the OpenStack environment.
.TP
.B \fB\-\-region REGION\fP
The name of the region from which instances of hosted applications are launched.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to delete a server named "qa\-test\-01", enter:
.sp
.nf
.ft C
$ knife openstack server delete qa\-test\-01
.ft P
.fi
.SS server list
.sp
The \fBserver list\fP argument is used to find instances that are associated with an OpenStack account. The results may show instances that are not currently managed by the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife openstack server list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A ID\fP, \fB\-\-openstack\-access\-key\-id ID\fP
The access key identifier used with the OpenStack environment.
.TP
.B \fB\-K SECRET\fP, \fB\-\-openstack\-secret\-access\-key SECRET\fP
The secret access key for the API endpoint used with the OpenStack environment.
.TP
.B \fB\-\-openstack\-api\-endpoint ENDPOINT\fP
The API endpoint used with the OpenStack environment.
.TP
.B \fB\-\-region REGION\fP
The name of the region from which instances of hosted applications are launched.
.UNINDENT
.SS rackspace (plug\-in)
.sp
Rackspace is a cloud\-driven platform of virtualized servers that provide services for storage and data, platform and networking, and cloud computing. The \fBrackspace\fP sub\-command is used to manage API\-driven cloud servers that are hosted by Rackspace cloud services.
.sp
This plugin should be installed using RubyGems.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife rackspace [ARGUMENT] (options)
.ft P
.fi
.SS flavor list
.sp
The \fBflavor list\fP argument is used to view a list of flavors that are running on servers that are associated with a Rackspace account, including the server ID, server name, architecture, RAM, and disk. The results may show flavor that are not currently managed by the Chef Server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife rackspace flavor list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A USER_NAME\fP, \fB\-\-rackspace\-username USER_NAME\fP
The user name for the Rackspace account.
.TP
.B \fB\-K API_KEY\fP, \fB\-\-rackspace\-api\-key API_KEY\fP
The unique alphanumeric identifier that is associated with a Rackspace account.
.TP
.B \fB\-\-rackspace\-api\-auth\-url\fP
The URL used to authenticate the Rackspace API key. Default: \fBauth.api.rackspacecloud.com\fP.
.UNINDENT
.SS image list
.sp
The \fBimage list\fP argument is used to view a list of images that are running on servers that are hosted at a Rackspace cloud services, including returning a list of each server (and server ID).
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife rackspace image list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A USER_NAME\fP, \fB\-\-rackspace\-username USER_NAME\fP
The user name for the Rackspace account.
.TP
.B \fB\-K API_KEY\fP, \fB\-\-rackspace\-api\-key API_KEY\fP
The unique alphanumeric identifier that is associated with a Rackspace account.
.TP
.B \fB\-\-rackspace\-api\-auth\-url\fP
The URL used to authenticate the Rackspace API key. Default: \fBauth.api.rackspacecloud.com\fP.
.UNINDENT
.SS server create
.sp
The \fBserver create\fP argument is used to create a new Rackspace cloud instance. This will provision a new image in Rackspace, perform a Chef bootstrap (using the SSH protocol), and then install Chef on the target system so that it can be run as a chef\-client and communicate with a Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife rackspace server create (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A USER_NAME\fP, \fB\-\-rackspace\-username USER_NAME\fP
The user name for the Rackspace account.
.TP
.B \fB\-\-bootstrap\-version VERSION"\fP
The version of Chef to install.
.TP
.B \fB\-d DISTRO\fP, \fB\-\-distro DISTRO\fP
The template file to be used during a bootstrap operation. Use this option if the specific location of the template file is unknown. The following distributions are supported: \fBchef\-full\fP (the default bootstrap), \fBcentos5\-gems\fP, \fBfedora13\-gems\fP, \fBubuntu10.04\-gems\fP, \fBubuntu10.04\-apt\fP, and \fBubuntu12.04\-gems\fP. If this option is used, Knife will search for the template file in the following order: a \fBbootstrap/\fP folder in the current working directory, a \fBbootstrap/\fP folder in the Chef repository, a \fBbootstrap/\fP folder in \fB~/.chef/\fP, or a bootstrap file shipped with Chef. Do not use the \fB\-\-template\-file\fP option when \fB\-\-distro\fP is specified.
.TP
.B \fB\-f FLAVOR\fP, \fB\-\-flavor FLAVOR\fP
The name of the flavor that identifies the hardware configuration of the server, including disk space, memory capacity, and CPU priority.
.TP
.B \fB\-i IDENTITY_FILE\fP, \fB\-\-identity\-file IDENTITY_FILE\fP
The SSH identity file used for authentication. Key\-based authentication is recommended.
.TP
.B \fB\-I IMAGE\fP, \fB\-\-image IMAGE\fP
The name of the image that identifies the operating system (and version) that will be used to create the virtual machine.
.TP
.B \fB\-j JSON_ATTRIBS\fP, \fB\-\-json\-attributes\fP
A JSON string that is added to the first run of a chef\-client.
.TP
.B \fB\-K API_KEY\fP, \fB\-\-rackspace\-api\-key API_KEY\fP
The unique alphanumeric identifier that is associated with a Rackspace account.
.TP
.B \fB\-M JSON\fP, \fB\-\-rackspace\-metadata JSON\fP
A JSON string that contains a metadata hash.
.TP
.B \fB\-N NAME\fP, \fB\-\-node\-name NAME\fP
The name of the node.
.TP
.B \fB\-P PASSWORD\fP, \fB\-\-ssh\-password PASSWORD\fP
The SSH password. This can be used to pass the password directly on the command line. If this option is not specified (and a password is required) Knife will prompt for the password.
.TP
.B \fB\-\-prerelease\fP
Indicates that pre\-release Chef gems should be installed.
.TP
.B \fB\-r RUN_LIST\fP, \fB\-\-run\-list RUN_LIST\fP
A comma\-separated list of roles and/or recipes to be applied.
.TP
.B \fB\-\-rackspace\-api\-auth\-url\fP
The URL used to authenticate the Rackspace API key. Default: \fBauth.api.rackspacecloud.com\fP.
.TP
.B \fB\-S NAME\fP, \fB\-\-server\-name NAME\fP
The name of the server.
.TP
.B \fB\-\-template\-file TEMPLATE\fP
The path to a template file that will be used during a bootstrap operation. Do not use the \fB\-\-distro\fP option when \fB\-\-template\-file\fP is specified.
.TP
.B \fB\-x USERNAME\fP, \fB\-\-ssh\-user USERNAME\fP
The SSH user name.
.UNINDENT
.sp
\fBExamples\fP
.sp
To launch a new Rackspace instance with the "webserver" role, enter:
.sp
.nf
.ft C
$ knife rackspace server create \-r \(aqrole[webserver]\(aq \-\-server\-name server01 \-\-node\-name server01 \-\-image 49 \-\-flavor 2
.ft P
.fi
.sp
To launch a new Rackspace instance with multiple roles, enter:
.sp
.nf
.ft C
$ knife rackspace server create \-r \(aqrole[base],role[webserver]\(aq \-\-server\-name server01 \-N server01 \-\-image 49 \-\-flavor 2
.ft P
.fi
.SS server delete
.sp
The \fBserver delete\fP argument is used to delete one or more instances that are running in the Rackspace cloud. The corresponding node on the Chef server can also be deleted with the same action. To find a specific cloud instance, use the \fBknife rackspace server list\fP argument. Use the \fBknife node delete\fP and \fBknife client delete\fP sub\-commands to delete associated node and client objects (if required).
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife rackspace server delete [SERVER_ID...]
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A USER_NAME\fP, \fB\-\-rackspace\-username USER_NAME\fP
The user name for the Rackspace account.
.TP
.B \fB\-K API_KEY\fP, \fB\-\-rackspace\-api\-key API_KEY\fP
The unique alphanumeric identifier that is associated with a Rackspace account.
.TP
.B \fB\-N NODE_NAME\fP, \fB\-\-node\-name NODE_NAME\fP
The name of the node to be deleted, if different from the server name. This must be used with the \fB\-\-purge\fP option.
.TP
.B \fB\-p\fP, \fB\-\-purge\fP
Indicates that all corresponding nodes on the Chef server will be destroyed, in addition to the Rackspace node itself. This option (by itself) assumes that the node and client have the same name as the server. If they do not, use the \fB\-\-node\-name\fP option to specify the correct name for the node.
.TP
.B \fB\-\-rackspace\-api\-auth\-url\fP
The URL used to authenticate the Rackspace API key. Default: \fBauth.api.rackspacecloud.com\fP.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to delete a Rackspace instance with an Instance ID of "12345678", enter:
.sp
.nf
.ft C
$ knife rackspace server delete 12345678
.ft P
.fi
.sp
to return:
.sp
.nf
.ft C
Instance ID: 12345678
Host ID: testexample
Name: slice12345678
Flavor: 1GB server
Image: Ubuntu 10.04 LTS (lucid)
Public DNS Name: 1\-1\-1\-1.static.cloud\-ips.com
Public IP Address: 1.1.1.1
Private IP Address: 192.168.1.1
.ft P
.fi
.sp
Confirm the deletion:
.sp
.nf
.ft C
Do you really want to delete this server? (Y/N) Y
WARNING: Deleted server 12345678 named slice12345678
.ft P
.fi
.SS server list
.sp
The \fBserver list\fP argument is used to find instances that are associated with a Rackspace account. The results may show instances that are not currently managed by the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife rackspace server list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A USER_NAME\fP, \fB\-\-rackspace\-username USER_NAME\fP
The user name for the Rackspace account.
.TP
.B \fB\-K API_KEY\fP, \fB\-\-rackspace\-api\-key API_KEY\fP
The unique alphanumeric identifier that is associated with a Rackspace account.
.TP
.B \fB\-\-rackspace\-api\-auth\-url\fP
The URL used to authenticate the Rackspace API key. Default: \fBauth.api.rackspacecloud.com\fP.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to find all Rackspace instances, enter:
.sp
.nf
.ft C
$ knife cloud rackspace list
.ft P
.fi
.sp
to return:
.sp
.nf
.ft C
Instance ID    Public IP    Private IP    Flavor    Image     State     Name
12345678       1.1.1.1      192.168.1.1   3         49        active    slice12345678
.ft P
.fi
.SS raw
.sp
The \fBraw\fP sub\-command is used to send a REST request to a specified path using the Chef Server API.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife raw REQUEST_PATH (options)
.ft P
.fi
.sp
This sub\-command has the following options:
.INDENT 0.0
.TP
.B \fB\-i FILE\fP, \fB\-\-input FILE\fP
The name of a file to be used with the \fBPUT\fP or a \fBPOST\fP request.
.TP
.B \fB\-\-[no\-]pretty\fP
Use \fB\-\-no\-pretty\fP to disable pretty\-print output for JSON. pretty\-print output is enabled by default.
.TP
.B \fB\-m METHOD\fP, \fB\-\-method METHOD\fP
The request method: \fBDELETE\fP, \fBGET\fP, \fBPOST\fP, or \fBPUT\fP. Default value: \fBGET\fP.
.UNINDENT
.SS recipe list
.sp
The \fBrecipe list\fP sub\-command is used to view all of the recipes that are on a Chef server. A regular expression can be used to limit the results to recipes that match a specific pattern. The regular expression must be within quotes and not be surrounded by forward slashes (/).
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife recipe list REGEX
.ft P
.fi
.sp
\fBExamples\fP
.sp
For example, enter:
.sp
.nf
.ft C
$ knife recipe list \(aqcouchdb::*\(aq
.ft P
.fi
.sp
to return:
.sp
.nf
.ft C
couchdb::main_monitors
couchdb::master
couchdb::default
couchdb::org_cleanu
.ft P
.fi
.SS role
.sp
A role is a way to define certain patterns and processes that exist across nodes in a Chef organization as belonging to a single job function. Each role consists of zero (or more) attributes and a run list. Each node can have zero (or more) roles assigned to it. When a role is run against a node, the configuration details of that node are compared against the attributes of the role, and then the contents of that role\(aqs run list are applied to the node\(aqs configuration details. When a chef\-client runs, it merges its own attributes and run lists with those contained within each assigned role.
.sp
The \fBrole\fP sub\-command is used to manage the roles that are associated with one or more nodes on a Chef server.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife role [ARGUMENT] (options)
.ft P
.fi
.IP Note
Use the \fBnode\fP sub\-command (and the \fBrun_list add node\fP argument) to add a role to a node on the Chef server.
.RE
.SS bulk delete
.sp
The \fBbulk delete\fP argument is used to delete one or more roles that match a pattern defined by a regular expression. The regular expression must be within quotes and not be surrounded by forward slashes (/).
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife role bulk delete REGEX
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife role bulk delete "^[0\-9]{3}$"
.ft P
.fi
.SS create
.sp
The \fBcreate\fP argument is used to add a role to the Chef server. To add a role to a node, you must use the \fBnode\fP sub\-command and the \fBrun\-list add\fP argument. Role data is saved as JSON on the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife role create ROLE_NAME (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-d DESCRIPTION\fP, \fB\-\-description DESCRIPTION\fP
The description of the role. This value will populate the description field for the role on the Chef server.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to add a role named "role1", enter:
.sp
.nf
.ft C
$ knife role create role1
.ft P
.fi
.sp
In the $EDITOR enter the role data in JSON:
.sp
.nf
.ft C
## sample:
{
   "name": "role1",
   "default_attributes": {
   },
   "json_class": "Chef::Role",
   "run_list": [

   ],
   "description": "",
   "chef_type": "role",
   "override_attributes": {
   }
}
.ft P
.fi
.sp
When finished, save it.
.SS delete
.sp
The \fBdelete\fP argument is used to delete a role from the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife role delete ROLE_NAME
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife role delete devops
.ft P
.fi
.sp
Type \fBY\fP to confirm a deletion.
.SS edit
.sp
The \fBedit\fP argument is used to edit role details on the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife role edit ROLE_NAME
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example, to edit the data for a role named "role1", enter:
.sp
.nf
.ft C
$ knife role edit role1
.ft P
.fi
.sp
Update the role data in JSON:
.sp
.nf
.ft C
## sample:
{
   "name": "role1",
   "default_attributes": {
   },
   "json_class": "Chef::Role",
   "run_list": [

   ],
   "description": "This is the description for the role1 role.",
   "chef_type": "role",
   "override_attributes": {
   }
}
.ft P
.fi
.sp
When finished, save it.
.SS from file
.sp
The \fBfrom file\fP argument is used to create a role using existing JSON data as a template.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife role from file FILE
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife role from file "path to JSON file"
.ft P
.fi
.SS list
.sp
The \fBlist\fP argument is used to view a list of roles that are currently available on the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife role list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-w\fP, \fB\-\-with\-uri\fP
Indicates that the corresponding URIs will be shown.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to view a list of roles on the Chef server and display the URI for each role returned, enter:
.sp
.nf
.ft C
$ knife role list \-w
.ft P
.fi
.SS show
.sp
The \fBshow\fP argument is used to view the details of a role.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife role show ROLE_NAME
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-a ATTR\fP, \fB\-\-attribute ATTR\fP
Indicates that only a single attribute is shown, as defined by the \fBATTR\fP value.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife role show devops
.ft P
.fi
.sp
To view information in JSON format, use the \fB\-F\fP common option as part of the command like this:
.sp
.nf
.ft C
$ knife role show devops \-F json
.ft P
.fi
.sp
Other formats available include \fBtext\fP, \fByaml\fP, and \fBpp\fP.
.SS search
.sp
Search indexes allow queries to be made for any type of data that is indexed by the Chef server, including data bags (and data bag items), environments, nodes, and roles. Chef has a defined query syntax that supports search patterns like exact, wildcard, range, and fuzzy. A search is a full\-text query that can be done from several locations, including from within a recipe, by using the \fBsearch\fP sub\-command in Knife, by using the search functionality in the Management Console, or by using the \fB/search\fP or \fB/search/INDEX\fP endpoints in the Chef Server API. The search engine is based on Apache Solr and is run from the Chef server.
.sp
The \fBsearch\fP sub\-command is used run a search query for information that is indexed on a Chef server.
.sp
The sub\-command has the following syntax:
.sp
.nf
.ft C
knife search INDEX SEARCH_QUERY
.ft P
.fi
.sp
where \fBINDEX\fP is one of \fBclient\fP, \fBenvironment\fP, \fBnode\fP, \fBrole\fP, or the name of a data bag and SEARCH_QUERY is the search query syntax for the query that will be executed.
.sp
This sub\-command has the following options:
.INDENT 0.0
.TP
.B \fB\-a ATTR\fP, \fB\-\-attribute ATTR\fP
Indicates that only a single attribute is shown, as defined by the \fBATTR\fP value.
.TP
.B \fB\-b ROW\fP, \fB\-start ROW\fP
The row at which return results will begin.
.TP
.B \fB\-i\fP, \fB\-\-id\-only\fP
Indicates that only matching object IDs will be shown.
.TP
.B \fBINDEX\fP
The name of the index to be queried: \fBclient\fP, \fBenvironment\fP, \fBnode\fP, \fBrole\fP, or \fBDATA_BAG_NAME\fP.
.TP
.B \fB\-l\fP, \fB\-\-long\fP
Display long output when searching nodes while using the default summary format.
.TP
.B \fB\-m\fP, \fB\-\-medium\fP
Display more, but not all, of a node\(aqs data when searching using the default summary format.
.TP
.B \fB\-o SORT\fP, \fB\-\-sort SORT\fP
The order in which search results will be sorted.
.TP
.B \fB\-q SEARCH_QUERY\fP, \fB\-\-query SEARCH_QUERY\fP
Use to protect search queries that start with a hyphen (\-). A \fB\-q\fP query may be specified as an argument or an option, but not both.
.TP
.B \fB\-r\fP, \fB\-\-run\-list\fP
Indicates that only the run\-list will be shown.
.TP
.B \fB\-R INT\fP, \fB\-\-rows INT\fP
The number of rows to be returned.
.TP
.B \fBSEARCH_QUERY\fP
The search query used to identify a a list of items on a Chef server. This option uses the same syntax as the \fBsearch\fP sub\-command.
.UNINDENT
.sp
For example, to search for the IDs of all nodes running on the Amazon EC2 platform, enter:
.sp
.nf
.ft C
$ knife search node \(aqec2:*\(aq \-i
.ft P
.fi
.sp
to return something like:
.sp
.nf
.ft C
4 items found

ip\-0A7CA19F.ec2.internal

ip\-0A58CF8E.ec2.internal

ip\-0A58E134.ec2.internal

ip\-0A7CFFD5.ec2.internal
.ft P
.fi
.sp
To search for the instance type (flavor) of all nodes running on the Amazon EC2 platform, enter:
.sp
.nf
.ft C
$ knife search node \(aqec2:*\(aq \-a ec2.instance_type
.ft P
.fi
.sp
to return something like:
.sp
.nf
.ft C
4 items found

ec2.instance_type:  m1.large
id:                 ip\-0A7CA19F.ec2.internal

ec2.instance_type:  m1.large
id:                 ip\-0A58CF8E.ec2.internal

ec2.instance_type:  m1.large
id:                 ip\-0A58E134.ec2.internal

ec2.instance_type:  m1.large
id:                 ip\-0A7CFFD5.ec2.internal
.ft P
.fi
.sp
To search for all nodes running Ubuntu, enter:
.sp
.nf
.ft C
$ knife search node \(aqplatform:ubuntu\(aq
.ft P
.fi
.sp
To search for all nodes running CentOS in the production environment, enter:
.sp
.nf
.ft C
$ knife search node \(aqchef_environment:production AND platform:centos\(aq
.ft P
.fi
.SS show
.sp
The \fBshow\fP sub\-command is used to view the details of one (or more) objects on the Chef server. This sub\-command works similar to \fBknife cookbook show\fP, \fBknife data bag show\fP, \fBknife environment show\fP, \fBknife node show\fP, and \fBknife role show\fP, but with a single verb (and a single action).
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife show [PATTERN...] (options)
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example, to show all cookbooks in the \fBcookbooks/\fP directory:
.sp
.nf
.ft C
$ knife show cookbooks/
.ft P
.fi
.sp
or, (if already in the \fBcookbooks/\fP directory in the local Chef repository):
.sp
.nf
.ft C
$ knife show
.ft P
.fi
.sp
To show roles and environments:
.sp
.nf
.ft C
$ knife show roles/ environments/
.ft P
.fi
.SS ssh
.sp
The \fBssh\fP sub\-command is used to invoke SSH commands (in parallel) on a subset of nodes within an organization, based on the results of a search query.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife ssh SEARCH_QUERY SSH_COMMAND (options)
.ft P
.fi
.sp
This sub\-command has the following options:
.INDENT 0.0
.TP
.B \fB\-a SSH_ATTR\fP, \fB\-\-attribute SSH_ATTR\fP
The attribute that is used when opening the SSH connection. The default attribute is the FQDN of the host. Other possible values include a public IP address, a private IP address, or a hostname.
.TP
.B \fB\-C NUM\fP, \fB\-\-concurrency NUM\fP
The number of allowed concurrent connections.
.TP
.B \fB\-G GATEWAY\fP, \fB\-\-ssh\-gateway GATEWAY\fP
The SSH tunnel or gateway that is used to run a bootstrap action on a machine that is not accessible from the workstation.
.TP
.B \fB\-i IDENTITY_FILE\fP, \fB\-\-identity\-file IDENTIFY_FILE\fP
The SSH identity file used for authentication. Key\-based authentication is recommended.
.TP
.B \fB\-m\fP, \fB\-\-manual\-list\fP
Indicates that a search query is a space\-separated list of servers.
.TP
.B \fB\-\-[no\-]host\-key\-verify\fP
Use \fB\-\-no\-host\-key\-verify\fP to disable host key verification. Default setting: \fB\-\-host\-key\-verify\fP.
.TP
.B \fB\-p PORT\fP, \fB\-\-ssh\-port PORT\fP
The SSH port.
.TP
.B \fB\-P PASSWORD\fP, \fB\-\-ssh\-password PASSWORD\fP
The SSH password. This can be used to pass the password directly on the command line. If this option is not specified (and a password is required) Knife will prompt for the password.
.TP
.B \fBSEARCH_QUERY\fP
The search query used to return a list of servers to be accessed using SSH and the specified \fBSSH_COMMAND\fP. This option uses the same syntax as the search sub\-command.
.TP
.B \fBSSH_COMMAND\fP
The command that will be run against the results of a search query.
.TP
.B \fB\-x USER_NAME\fP, \fB\-\-ssh\-user USER_NAME\fP
The SSH user name.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to query for all nodes that have the "webserver" role and then use SSH to run the command "sudo chef\-client", enter:
.sp
.nf
.ft C
$ knife ssh "role:webserver" "sudo chef\-client"
.ft P
.fi
.sp
To run the chef\-client on all nodes, enter:
.sp
.nf
.ft C
$ knife ssh \(aqname:*\(aq \(aqsudo chef\-client\(aq
.ft P
.fi
.sp
To upgrade all nodes, enter:
.sp
.nf
.ft C
$ knife ssh name:* "sudo aptitude upgrade \-y"
.ft P
.fi
.sp
To find the uptime of all of your Web servers running Ubuntu on the Amazon EC2 platform, enter:
.sp
.nf
.ft C
$ knife ssh "role:web" "uptime" \-x ubuntu \-a ec2.public_hostname
.ft P
.fi
.sp
to return:
.sp
.nf
.ft C
ec2\-174\-129\-127\-206.compute\-1.amazonaws.com  13:50:47 up 1 day, 23:26,  1 user,  load average: 0.25, 0.18, 0.11
ec2\-67\-202\-63\-102.compute\-1.amazonaws.com    13:50:47 up 1 day, 23:33,  1 user,  load average: 0.12, 0.13, 0.10
ec2\-184\-73\-9\-250.compute\-1.amazonaws.com     13:50:48 up 16:45,  1 user,  load average: 0.30, 0.22, 0.13
ec2\-75\-101\-240\-230.compute\-1.amazonaws.com   13:50:48 up 1 day, 22:59,  1 user,  load average: 0.24, 0.17, 0.11
ec2\-184\-73\-60\-141.compute\-1.amazonaws.com    13:50:48 up 1 day, 23:30,  1 user,  load average: 0.32, 0.17, 0.15
.ft P
.fi
.sp
To force a chef\-client run on all of your Web servers running Ubuntu on the Amazon EC2 platform, enter:
.sp
.nf
.ft C
$ knife ssh "role:web" "sudo chef\-client" \-x ubuntu \-a ec2.public_hostname
.ft P
.fi
.sp
to return:
.sp
.nf
.ft C
ec2\-67\-202\-63\-102.compute\-1.amazonaws.com   [Fri, 22 Oct 2010 14:18:37 +0000] INFO: Starting Chef Run (Version 0.9.10)
ec2\-174\-129\-127\-206.compute\-1.amazonaws.com [Fri, 22 Oct 2010 14:18:37 +0000] INFO: Starting Chef Run (Version 0.9.10)
ec2\-184\-73\-9\-250.compute\-1.amazonaws.com    [Fri, 22 Oct 2010 14:18:38 +0000] INFO: Starting Chef Run (Version 0.9.10)
ec2\-75\-101\-240\-230.compute\-1.amazonaws.com  [Fri, 22 Oct 2010 14:18:38 +0000] INFO: Starting Chef Run (Version 0.9.10)
ec2\-184\-73\-60\-141.compute\-1.amazonaws.com   [Fri, 22 Oct 2010 14:18:38 +0000] INFO: Starting Chef Run (Version 0.9.10)
ec2\-174\-129\-127\-206.compute\-1.amazonaws.com [Fri, 22 Oct 2010 14:18:39 +0000] INFO: Chef Run complete in 1.419243 seconds
ec2\-174\-129\-127\-206.compute\-1.amazonaws.com [Fri, 22 Oct 2010 14:18:39 +0000] INFO: cleaning the checksum cache
ec2\-174\-129\-127\-206.compute\-1.amazonaws.com [Fri, 22 Oct 2010 14:18:39 +0000] INFO: Running report handlers
ec2\-174\-129\-127\-206.compute\-1.amazonaws.com [Fri, 22 Oct 2010 14:18:39 +0000] INFO: Report handlers complete
ec2\-67\-202\-63\-102.compute\-1.amazonaws.com   [Fri, 22 Oct 2010 14:18:39 +0000] INFO: Chef Run complete in 1.578265 seconds
ec2\-67\-202\-63\-102.compute\-1.amazonaws.com   [Fri, 22 Oct 2010 14:18:39 +0000] INFO: cleaning the checksum cache
ec2\-67\-202\-63\-102.compute\-1.amazonaws.com   [Fri, 22 Oct 2010 14:18:39 +0000] INFO: Running report handlers
ec2\-67\-202\-63\-102.compute\-1.amazonaws.com   [Fri, 22 Oct 2010 14:18:39 +0000] INFO: Report handlers complete
ec2\-184\-73\-9\-250.compute\-1.amazonaws.com    [Fri, 22 Oct 2010 14:18:40 +0000] INFO: Chef Run complete in 1.638884 seconds
ec2\-184\-73\-9\-250.compute\-1.amazonaws.com    [Fri, 22 Oct 2010 14:18:40 +0000] INFO: cleaning the checksum cache
ec2\-184\-73\-9\-250.compute\-1.amazonaws.com    [Fri, 22 Oct 2010 14:18:40 +0000] INFO: Running report handlers
ec2\-184\-73\-9\-250.compute\-1.amazonaws.com    [Fri, 22 Oct 2010 14:18:40 +0000] INFO: Report handlers complete
ec2\-75\-101\-240\-230.compute\-1.amazonaws.com  [Fri, 22 Oct 2010 14:18:40 +0000] INFO: Chef Run complete in 1.540257 seconds
ec2\-75\-101\-240\-230.compute\-1.amazonaws.com  [Fri, 22 Oct 2010 14:18:40 +0000] INFO: cleaning the checksum cache
ec2\-75\-101\-240\-230.compute\-1.amazonaws.com  [Fri, 22 Oct 2010 14:18:40 +0000] INFO: Running report handlers
ec2\-75\-101\-240\-230.compute\-1.amazonaws.com  [Fri, 22 Oct 2010 14:18:40 +0000] INFO: Report handlers complete
ec2\-184\-73\-60\-141.compute\-1.amazonaws.com   [Fri, 22 Oct 2010 14:18:40 +0000] INFO: Chef Run complete in 1.502489 seconds
ec2\-184\-73\-60\-141.compute\-1.amazonaws.com   [Fri, 22 Oct 2010 14:18:40 +0000] INFO: cleaning the checksum cache
ec2\-184\-73\-60\-141.compute\-1.amazonaws.com   [Fri, 22 Oct 2010 14:18:40 +0000] INFO: Running report handlers
ec2\-184\-73\-60\-141.compute\-1.amazonaws.com   [Fri, 22 Oct 2010 14:18:40 +0000] INFO: Report handlers complete
.ft P
.fi
.SS status
.sp
The \fBstatus\fP sub\-command is used to display a brief summary of the nodes on a Chef server, including the time of the most recent successful chef\-client run.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife status (options)
.ft P
.fi
.sp
This sub\-command has the following options:
.INDENT 0.0
.TP
.B \fBQUERY\fP
The search query used to identify a a list of items on a Chef server. This option uses the same syntax as the \fBsearch\fP sub\-command.
.TP
.B \fB\-r RUN_LIST\fP, \fB\-\-run\-list RUN_LIST\fP
A comma\-separated list of roles and/or recipes to be applied.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to view the status of all nodes in the organization, enter:
.sp
.nf
.ft C
$ knife status
.ft P
.fi
.sp
to return something like:
.sp
.nf
.ft C
20 hours ago, dev\-vm.chisamore.com, ubuntu 10.04, dev\-vm.chisamore.com, 10.66.44.126
3 hours ago, i\-225f954f, ubuntu 10.04, ec2\-67\-202\-63\-102.compute\-1.amazonaws.com, 67.202.63.102
3 hours ago, i\-a45298c9, ubuntu 10.04, ec2\-174\-129\-127\-206.compute\-1.amazonaws.com, 174.129.127.206
3 hours ago, i\-5272a43f, ubuntu 10.04, ec2\-184\-73\-9\-250.compute\-1.amazonaws.com, 184.73.9.250
3 hours ago, i\-226ca64f, ubuntu 10.04, ec2\-75\-101\-240\-230.compute\-1.amazonaws.com, 75.101.240.230
3 hours ago, i\-f65c969b, ubuntu 10.04, ec2\-184\-73\-60\-141.compute\-1.amazonaws.com, 184.73.60.141
.ft P
.fi
.sp
To include run lists in the status, enter:
.sp
.nf
.ft C
$ knife status \-\-run\-list
.ft P
.fi
.sp
to return something like:
.sp
.nf
.ft C
20 hours ago, dev\-vm.chisamore.com, ubuntu 10.04, dev\-vm.chisamore.com, 10.66.44.126, role[lb].
3 hours ago, i\-225f954f, ubuntu 10.04, ec2\-67\-202\-63\-102.compute\-1.amazonaws.com, 67.202.63.102, role[web].
3 hours ago, i\-a45298c9, ubuntu 10.04, ec2\-174\-129\-127\-206.compute\-1.amazonaws.com, 174.129.127.206, role[web].
3 hours ago, i\-5272a43f, ubuntu 10.04, ec2\-184\-73\-9\-250.compute\-1.amazonaws.com, 184.73.9.250, role[web].
3 hours ago, i\-226ca64f, ubuntu 10.04, ec2\-75\-101\-240\-230.compute\-1.amazonaws.com, 75.101.240.230, role[web].
3 hours ago, i\-f65c969b, ubuntu 10.04, ec2\-184\-73\-60\-141.compute\-1.amazonaws.com, 184.73.60.141, role[web].
.ft P
.fi
.sp
To show the status of a subset of nodes that are returned by a specific query, enter:
.sp
.nf
.ft C
$ knife status "role:web" \-\-run\-list
.ft P
.fi
.sp
to return something like:
.sp
.nf
.ft C
3 hours ago, i\-225f954f, ubuntu 10.04, ec2\-67\-202\-63\-102.compute\-1.amazonaws.com, 67.202.63.102, role[web].
3 hours ago, i\-a45298c9, ubuntu 10.04, ec2\-174\-129\-127\-206.compute\-1.amazonaws.com, 174.129.127.206, role[web].
3 hours ago, i\-5272a43f, ubuntu 10.04, ec2\-184\-73\-9\-250.compute\-1.amazonaws.com, 184.73.9.250, role[web].
3 hours ago, i\-226ca64f, ubuntu 10.04, ec2\-75\-101\-240\-230.compute\-1.amazonaws.com, 75.101.240.230, role[web].
3 hours ago, i\-f65c969b, ubuntu 10.04, ec2\-184\-73\-60\-141.compute\-1.amazonaws.com, 184.73.60.141, role[web].
.ft P
.fi
.SS tag
.sp
A tag is a custom description that is applied to a node. A tag, once applied, can be helpful when managing nodes using Knife or when building recipes by providing alternate methods of grouping similar types of information.
.sp
The \fBtag\fP sub\-command is used to apply tags to nodes on a Chef server.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife tag [ARGUMENT]
.ft P
.fi
.SS create
.sp
The \fBcreate\fP argument is used to add one or more tags to a node.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife tag create NODE_NAME [TAG...]
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
To create tags named "seattle", "portland", and "vancouver", enter:
.sp
.nf
.ft C
$ knife tag create node seattle portland vancouver
.ft P
.fi
.SS delete
.sp
The \fBdelete\fP argument is used to delete one or more tags from a node.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife tag delete NODE_NAME [TAG...]
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
To delete tags named "denver" and "phoenix", enter:
.sp
.nf
.ft C
$ knife tag delete node denver phoenix
.ft P
.fi
.sp
Type \fBY\fP to confirm a deletion.
.SS list
.sp
The \fBlist\fP argument is used to list all of the tags that have been applied to a node.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife tag list [NODE_NAME...]
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
To view the tags for a node named "devops_prod1", enter:
.sp
.nf
.ft C
$ knife tag list devops_prod1
.ft P
.fi
.SS upload
.sp
The \fBupload\fP sub\-command is used to upload roles, cookbooks, environments, and data bags to the Chef server from the current working directory in the Chef repository. This sub\-command is often used in conjunction with \fBknife diff\fP, which can be used to see exactly what changes will be uploaded, and then \fBknife download\fP, which does the opposite of \fBknife upload\fP.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife upload [PATTERN...] (options)
.ft P
.fi
.sp
This sub\-command has the following options:
.INDENT 0.0
.TP
.B \fB\-n\fP, \fB\-\-dry\-run\fP
Indicates that no action is taken and that results are only printed out.
.TP
.B \fB\-\-purge\fP
Use \fB\-\-purge\fP to delete roles, cookbooks, etc. from the Chef server if their corresponding files do not exist in the chef repository (ED. that ought to be a link). By default, such objects are left alone and NOT purged.  Default: \fB\-\-no\-purge\fP.
.TP
.B \fB\-\-recurse\fP
Use \fB\-\-no\-recurse\fP to disable uploading a directory recursively. Default: \fB\-\-recurse\fP.
.TP
.B \fB\-\-force\fP
Use \fB\-\-force\fP to upload roles, cookbooks, etc. even if the file in the directory is identical (by default, no POST or PUT is performed unless an actual change would be made). Default: \fB\-\-no\-force\fP.
.UNINDENT
.sp
\fBExamples\fP
.sp
To upload the entire Chef repository to the Chef server, browse to the top level of the Chef repository and enter:
.sp
.nf
.ft C
$ knife upload
.ft P
.fi
.sp
or from anywhere in the Chef repository, enter:
.sp
.nf
.ft C
$ knife upload /
.ft P
.fi
.sp
To upload the \fBcookbooks/\fP directory to the Chef server, browse to the top level of the Chef repository and enter:
.sp
.nf
.ft C
$ knife upload cookbooks
.ft P
.fi
.sp
or from anywhere in the Chef repository, enter:
.sp
.nf
.ft C
$ knife upload /cookbooks
.ft P
.fi
.sp
To upload the \fBenvironments/\fP directory to the Chef server, browse to the top level of the Chef repository and enter:
.sp
.nf
.ft C
$ knife upload environments
.ft P
.fi
.sp
or from anywhere in the Chef repository, enter:
.sp
.nf
.ft C
$ knife upload /environments
.ft P
.fi
.sp
To upload an environment named "production" to the Chef server, browse to the top level of the Chef repository and enter:
.sp
.nf
.ft C
$ knife upload environments/production.json
.ft P
.fi
.sp
or from the \fBenvironments/\fP directory, enter:
.sp
.nf
.ft C
$ knife upload production.json
.ft P
.fi
.sp
To upload the \fBroles/\fP directory to the Chef server, browse to the top level of the Chef repository and enter:
.sp
.nf
.ft C
$ knife upload roles
.ft P
.fi
.sp
or from anywhere in the Chef repository, enter:
.sp
.nf
.ft C
$ knife upload /roles
.ft P
.fi
.sp
To upload all cookbooks that start with "apache" and belong to the "webserver" role, browse to the top level of the Chef repository and enter:
.sp
.nf
.ft C
$ knife upload cookbooks/apache\e* roles/webserver.json
.ft P
.fi
.SS terremark (plug\-in)
.sp
Terremark is a cloud hosting platform that provides cloud, IT infrastructure, and managed hosting services. The \fBterremark\fP sub\-command is used to manage API\-driven cloud servers that are hosted by Terremark.
.sp
This plugin should be installed using RubyGems.
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife terremark [ARGUMENT] (options)
.ft P
.fi
.SS server create
.sp
The \fBserver create\fP argument is used to create a new Terremark instance.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife terremark server create SERVER_NAME [RUN_LIST] (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A USER_NAME\fP, \fB\-\-terremark\-username USER_NAME\fP
A user name with permission to access a Terremark service.
.TP
.B \fB\-K PASSWORD\fP, \fB\-\-terremark\-password PASSWORD\fP
The password for the Terremark service.
.TP
.B \fB\-S SERVICE\fP, \fB\-\-terremark\-service SERVICE\fP
The name of the Terremark service.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to create a new instance, enter:
.sp
.nf
.ft C
$ knife terremark server list server_name \-A useraccount \-K password \-S service_name
.ft P
.fi
.sp
To provision a new dual\-core 1.0 GB Ubuntu 10.04 web server with three attached disks with sizes of "25G", "50G", and "50G", enter something like:
.sp
.nf
.ft C
$ knife terremark server create \-\-vcpus 2 \-m 1024 \-I 40 \-A \(aqusername\(aq \-K "password"
  \-r \(aqrole[webserver]\(aq \-i ~/.ssh/ssh\-identity\-file.pem \-N web\-server\-nginx \-\-tcp 80,8080
  \-\-udp 5050 \-\-disks 25,50,50
.ft P
.fi
.SS server delete
.sp
The \fBserver delete\fP argument is used to delete one or more instances that are running in the Terremark cloud. To find a specific cloud instance, use the \fBknife terremark server list\fP argument. Use the \fBknife node delete\fP and \fBknife client delete\fP sub\-commands to delete associated node and client objects (if required).
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife terremark server delete SERVER_ID
.ft P
.fi
.sp
This argument does not have any argument\-specific options.
.sp
\fBExamples\fP
.sp
For example, to delete an instance with an identifier of "abcdefg", enter:
.sp
.nf
.ft C
$ knife terremark server delete abcdefg
.ft P
.fi
.SS server list
.sp
The \fBserver list\fP argument is used to find instances that are associated with a Terremark account. The results may show instances that are not currently managed by the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife terremark server list (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A USER_NAME\fP, \fB\-\-terremark\-username USER_NAME\fP
A user name with permission to access a Terremark service.
.TP
.B \fB\-K PASSWORD\fP, \fB\-\-terremark\-password PASSWORD\fP
The password for the Terremark service.
.TP
.B \fB\-\-print\-after\fP
Indicates that data will be shown after a destructive operation.
.TP
.B \fB\-S SERVICE_NAME\fP, \fB\-\-terremark\-service SERVICE_NAME\fP
The name of the Terremark service.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, enter:
.sp
.nf
.ft C
$ knife terremark server list \-A useraccount \-K password \-S service_name
.ft P
.fi
.SS windows (plug\-in)
.sp
The \fBwindows\fP sub\-command is used to configure and interact with nodes that exist on server and/or desktop machines that are running Microsoft Windows. Nodes are configured using Windows Remote Management, which allows native objects\-\-\-batch scripts, Windows PowerShell scripts, or scripting library variables\-\-\-to be called by external applications.
.sp
This plugin should be installed using RubyGems.
.sp
This sub\-command has the following syntax when connecting to one (or more) machines that run Microsoft Windows:
.sp
.nf
.ft C
knife winrm [ARGUMENT] (options)
.ft P
.fi
.sp
And the following syntax when performing a bootstrap:
.sp
.nf
.ft C
knife bootstrap windows [ARGUMENT] (options)
.ft P
.fi
.SS bootstrap windows ssh
.sp
The \fBbootstrap windows ssh\fP argument is used to bootstrap Chef installations in a Microsoft Windows environment, using a command shell that is native to Microsoft Windows.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife bootstrap windows ssh (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-\-bootstrap\-proxy PROXY_URL\fP
The proxy server for the node that is the target of a bootstrap operation.
.TP
.B \fB\-\-bootstrap\-version VERSION\fP
The version of Chef to install.
.TP
.B \fB\-d DISTRO\fP, \fB\-\-distro DISTRO\fP
The template file to be used during a bootstrap operation. Use this option if the specific location of the template file is unknown. The following distributions are supported: \fBchef\-full\fP (the default bootstrap), \fBcentos5\-gems\fP, \fBfedora13\-gems\fP, \fBubuntu10.04\-gems\fP, \fBubuntu10.04\-apt\fP, and \fBubuntu12.04\-gems\fP. If this option is used, Knife will search for the template file in the following order: a \fBbootstrap/\fP folder in the current working directory, a \fBbootstrap/\fP folder in the Chef repository, a \fBbootstrap/\fP folder in \fB~/.chef/\fP, or a bootstrap file shipped with Chef. Do not use the \fB\-\-template\-file\fP option when \fB\-\-distro\fP is specified.
.TP
.B \fB\-i IDENTITY_FILE\fP, \fB\-\-identity\-file IDENTITY_FILE\fP
The SSH identity file used for authentication. Key\-based authentication is recommended.
.TP
.B \fB\-\-N NAME\fP, \fB\-\-node\-name NAME\fP
The name of the node.
.TP
.B \fB\-\-[no\-]host\-key\-verify\fP
Use \fB\-\-no\-host\-key\-verify\fP to disable host key verification. Default setting: \fB\-\-host\-key\-verify\fP.
.TP
.B \fB\-p PORT\fP, \fB\-\-ssh\-port PORT\fP
The SSH port.
.TP
.B \fB\-P PASSWORD\fP, \fB\-\-ssh\-password PASSWORD\fP
The SSH password. This can be used to pass the password directly on the command line. If this option is not specified (and a password is required) Knife will prompt for the password.
.TP
.B \fB\-\-prerelease\fP
Indicates that pre\-release Chef gems should be installed.
.TP
.B \fB\-r RUN_LIST\fP, \fB\-\-run\-list RUN_LIST\fP
A comma\-separated list of roles and/or recipes to be applied.
.TP
.B \fB\-s SECRET\fP, \fB\-\-secret SECRET\fP
The encryption key that is used for values contained within a data bag.
.TP
.B \fB\-\-secret\-file FILE\fP
The path to the file that contains the encryption key.
.TP
.B \fB\-\-template\-file TEMPLATE\fP
The path to a template file that will be used during a bootstrap operation. Do not use the \fB\-\-distro\fP option when \fB\-\-template\-file\fP is specified.
.TP
.B \fB\-x USER_NAME\fP, \fB\-\-ssh\-user USER_NAME\fP
The SSH user name.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife bootstrap windows ssh ec2\-50\-xx\-xx\-124.compute\-1.amazonaws.com \-r \(aqrole[webserver],role[production]\(aq \-x Administrator \-i ~/.ssh/id_rsa
.ft P
.fi
.SS bootstrap windows winrm
.sp
The \fBbootstrap windows winrm\fP argument is used to bootstrap Chef installations in a Microsoft Windows environment, using Windows Remote Management and the WS\-Management protocol for communication. This argument requires the FQDN of the host machine to be specified.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife bootstrap windows winrm FQDN
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-\-bootstrap\-proxy PROXY_URL\fP
The proxy server for the node that is the target of a bootstrap operation.
.TP
.B \fB\-\-bootstrap\-version VERSION\fP
The version of Chef to install.
.TP
.B \fB\-d DISTRO\fP, \fB\-\-distro DISTRO\fP
The template file to be used during a bootstrap operation. Use this option if the specific location of the template file is unknown. The following distributions are supported: \fBchef\-full\fP (the default bootstrap), \fBcentos5\-gems\fP, \fBfedora13\-gems\fP, \fBubuntu10.04\-gems\fP, \fBubuntu10.04\-apt\fP, and \fBubuntu12.04\-gems\fP. If this option is used, Knife will search for the template file in the following order: a \fBbootstrap/\fP folder in the current working directory, a \fBbootstrap/\fP folder in the Chef repository, a \fBbootstrap/\fP folder in \fB~/.chef/\fP, or a bootstrap file shipped with Chef. Do not use the \fB\-\-template\-file\fP option when \fB\-\-distro\fP is specified.
.TP
.B \fB\-\-N NAME\fP, \fB\-\-node\-name NAME\fP
The name of the node.
.TP
.B \fB\-\-prerelease\fP
Indicates that pre\-release Chef gems should be installed.
.TP
.B \fB\-r RUN_LIST\fP, \fB\-\-run\-list RUN_LIST\fP
A comma\-separated list of roles and/or recipes to be applied.
.TP
.B \fB\-s SECRET\fP, \fB\-\-secret SECRET\fP
The encryption key that is used for values contained within a data bag.
.TP
.B \fB\-\-secret\-file FILE\fP
The path to the file that contains the encryption key.
.TP
.B \fB\-\-template\-file TEMPLATE\fP
The path to a template file that will be used during a bootstrap operation. Do not use the \fB\-\-distro\fP option when \fB\-\-template\-file\fP is specified.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example:
.sp
.nf
.ft C
$ knife bootstrap windows winrm ec2\-50\-xx\-xx\-124.compute\-1.amazonaws.com \-r \(aqrole[webserver],role[production]\(aq \-x Administrator \-P \(aqsuper_secret_password\(aq
.ft P
.fi
.SS winrm
.sp
The \fBwinrm\fP argument is used to create a connection to one or more remote machines. As each connection is created, a password must be provided. This argument uses the same syntax as the \fBsearch\fP sub\-command.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife winrm SEARCH_QUERY SSH_COMMAND (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-a ATTR\fP, \fB\-\-attribute ATTR\fP
The attribute that is used when opening the SSH connection. The default attribute is the fully\-qualified domain name of the host. Other possible values include a public IP address, a private IP address, or a hostname.
.TP
.B \fB\-f CA_TRUST_FILE\fP, \fB\-\-ca\-trust\-file CA_TRUST_FILE\fP
The certificate authority (CA) trust file used for SSL transport.
.TP
.B \fB\-i IDENTITY_FILE\fP, \fB\-\-identity\-file IDENTITY_FILE\fP
The SSH identity file used for authentication. Key\-based authentication is recommended.
.TP
.B \fB\-i KEYTAB_FILE\fP, \fB\-\-keytab\-file KEYTAB_FILE\fP
The keytab file that contains the encryption key required by Kerberos\-based authentication.
.TP
.B \fB\-m\fP, \fB\-\-manual\-list\fP
Indicates that a search query is a space\-separated list of servers.
.TP
.B \fB\-p PORT\fP, \fB\-\-winrm\-port PORT\fP
The Windows Remote Management port. Default: \fB5985\fP.
.TP
.B \fB\-P PASSWORD\fP, \fB\-\-winrm\-password PASSWORD\fP
The Windows Remote Management password.
.TP
.B \fB\-R KERBEROS_REALM\fP, \fB\-\-kerberos\-realm KERBEROS_REALM\fP
The administrative domain to which a user belongs.
.TP
.B \fB\-\-returns CODES\fP
A comma\-delimited list of return codes, which indicate the success or failure for the command that was run remotely.
.TP
.B \fB\-S KERBEROS_SERVICE\fP, \fB\-\-kerberos\-service KERBEROS_SERVICE\fP
The service principal used during Kerberos\-based authentication.
.TP
.B \fBSEARCH_QUERY\fP
The search query used to return a list of servers to be accessed using SSH and the specified \fBSSH_COMMAND\fP. This option uses the same syntax as the search sub\-command.
.TP
.B \fBSSH_COMMAND\fP
The command that will be run against the results of a search query.
.TP
.B \fB\-t TRANSPORT\fP, \fB\-\-winrm\-transport TRANSPORT\fP
The Windows Remote Management transport type: \fBssl\fP or \fBplaintext\fP.
.TP
.B \fB\-x USERNAME\fP, \fB\-\-winrm\-user USERNAME\fP
The Windows Remote Management user name.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to find the uptime of all web servers, enter:
.sp
.nf
.ft C
$ knife winrm "role:web" "net stats srv" \-x Administrator \-P password
.ft P
.fi
.sp
Or, to force a Chef run:
.sp
.nf
.ft C
knife winrm \(aqec2\-50\-xx\-xx\-124.amazonaws.com\(aq \(aqchef\-client \-c c:/chef/client.rb\(aq \-m \-x admin \-P \(aqpassword\(aq
ec2\-50\-xx\-xx\-124.amazonaws.com [date] INFO: Starting Chef Run (Version 0.9.12)
ec2\-50\-xx\-xx\-124.amazonaws.com [date] WARN: Node ip\-0A502FFB has an empty run list.
ec2\-50\-xx\-xx\-124.amazonaws.com [date] INFO: Chef Run complete in 4.383966 seconds
ec2\-50\-xx\-xx\-124.amazonaws.com [date] INFO: cleaning the checksum cache
ec2\-50\-xx\-xx\-124.amazonaws.com [date] INFO: Running report handlers
ec2\-50\-xx\-xx\-124.amazonaws.com [date] INFO: Report handlers complete
.ft P
.fi
.sp
Where in the examples above, \fB[date]\fP represents the date and time the long entry was created. For example: \fB[Fri, 04 Mar 2011 22:00:53 +0000]\fP.
.SH AUTHOR
Opscode
.SH COPYRIGHT
2012, Opscode, Inc
.\" Generated by docutils manpage writer.
.
