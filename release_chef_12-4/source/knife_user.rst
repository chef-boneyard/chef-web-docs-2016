.. THIS PAGE IS IDENTICAL TO docs.chef.io/knife_user.html BY DESIGN
.. THIS PAGE DOCUMENTS chef-client version 12.4

=====================================================
knife user
=====================================================

.. include:: ../../includes_knife/includes_knife_user.rst

.. warning:: The ``knife user create`` namespace is being deprecated for open source 11 |chef server|.
             Backwards compatibility will be preserved until Chef 13 is released, but to avoid deprecation warnings, please use the ``knife osc_user`` commands if you are running knife against open source 11 |chef server|.

.. warning:: This subcommand requires |chef server| superuser privileges on |chef server oec| (including hosted |chef server oec|) and Chef 12 server.
             On Chef 12 server, it is recommended you use the `chef-server-ctl user-* <http://docs.chef.io/ctl_chef_server.html#user-create>` commands for user management for the time being.

.. note:: Review the list of :doc:`common options </knife_common_options>` available to this (and all) |knife| subcommands and plugins.

create
=====================================================
.. include:: ../../includes_knife/includes_knife_user_create.rst

Syntax
-----------------------------------------------------
This argument has the following syntax:


On Chef 12 server and |chef server oec|
+++++++++++++++++++++++++++++++++++++++++++++++++++++

.. code-block:: bash

   $ knife user key create USER_NAME DISPLAY_NAME FIRST_NAME LAST_NAME EMAIL PASSWORD (options)

On open source 11 |chef server|
+++++++++++++++++++++++++++++++++++++++++++++++++++++

.. include:: ../../includes_knife/includes_knife_user_key_create_syntax.rst

Options
-----------------------------------------------------
``-a``, ``--admin``
   Open source 11 |chef server| only. |admin client|
   This option will have no effect when used with |chef server oec| server or Chef 12 server.

``-p PASSWORD``, ``--password PASSWORD``
   Open source 11 |chef server| only. |password user|
   This option will have no effect when used with |chef server oec| server or Chef 12 server.

``-f FILE``, ``--file FILE``
   Write the private key to a file if the server generated one.

``--user-key FILE_NAME``
   Set the initial public key for the user from a file on disk (cannot be passed with ``--prevent-keygen``).
   On open source 11 |chef server|, a default key will be generated for you if this is not passed.
   See ``--prevent-keygen`` for initial key generation details on Chef 12 Server.

``-k``, ``--prevent-keygen``
   API V1 only (API V1 was released with Chef 12.1 server).
   On Chef 12.1 server or later, users can be created without an initial public key.
   Use this option to create a user without a public key. Keys for this user can be managed later be added via the ``knife user key`` subcommand.
   If neither this option nor ``--user-key`` are passed, a Chef 12.1+ server will create a new user with a public key named "default" and return the private key.
   If only ``--user-key`` is passed, a Chef 12 server will use the public key in the file you passed as the "default" public key for the new user.
   On servers before 12.1, this option is not valid, and a public key will always be generated by the server for a new user unless ``--user-key`` is passed, in which case the passed key will be used instead.

.. note:: See :doc:`knife.rb </config_rb_knife_optional_settings>` for more information about how to add certain |knife| options as settings in the |knife rb| file.

Examples
-----------------------------------------------------
The following examples show how to use this |knife| subcommand:

**Create a user**

.. include:: ../../step_knife/step_knife_user_create.rst

delete
=====================================================
.. include:: ../../includes_knife/includes_knife_user_delete.rst

Syntax
-----------------------------------------------------
.. include:: ../../includes_knife/includes_knife_user_delete_syntax.rst

Options
-----------------------------------------------------
|no_options|

Examples
-----------------------------------------------------
The following examples show how to use this |knife| subcommand:

**Delete a user**

.. include:: ../../step_knife/step_knife_user_delete.rst

edit
=====================================================
.. include:: ../../includes_knife/includes_knife_user_edit.rst

Syntax
-----------------------------------------------------
.. include:: ../../includes_knife/includes_knife_user_edit_syntax.rst

Options
-----------------------------------------------------
|no_options|

Examples
-----------------------------------------------------
None.


key create
=====================================================
.. include:: ../../includes_knife/includes_knife_user_key_create.rst

Syntax
-----------------------------------------------------
.. include:: ../../includes_knife/includes_knife_user_key_create_syntax.rst

Options
-----------------------------------------------------
.. include:: ../../includes_knife/includes_knife_user_key_create_options.rst

Examples
-----------------------------------------------------
None.

key delete
=====================================================
.. include:: ../../includes_knife/includes_knife_user_key_delete.rst

Syntax
-----------------------------------------------------
.. include:: ../../includes_knife/includes_knife_user_key_delete_syntax.rst

Examples
-----------------------------------------------------
None.

key edit
=====================================================
.. include:: ../../includes_knife/includes_knife_user_key_edit.rst

Syntax
-----------------------------------------------------
.. include:: ../../includes_knife/includes_knife_user_key_edit_syntax.rst

Options
-----------------------------------------------------
.. include:: ../../includes_knife/includes_knife_user_key_edit_options.rst

Examples
-----------------------------------------------------
None.

key list
=====================================================
.. include:: ../../includes_knife/includes_knife_user_key_list.rst

Syntax
-----------------------------------------------------
.. include:: ../../includes_knife/includes_knife_user_key_list_syntax.rst

Options
-----------------------------------------------------
.. include:: ../../includes_knife/includes_knife_user_key_list_options.rst

Examples
-----------------------------------------------------
None.

key show
=====================================================
.. include:: ../../includes_knife/includes_knife_user_key_show.rst

Syntax
-----------------------------------------------------
.. include:: ../../includes_knife/includes_knife_user_key_show_syntax.rst

Examples
-----------------------------------------------------
None.


list
=====================================================
.. include:: ../../includes_knife/includes_knife_user_list.rst

Syntax
-----------------------------------------------------
.. include:: ../../includes_knife/includes_knife_user_list_syntax.rst

Options
-----------------------------------------------------
.. include:: ../../includes_knife/includes_knife_user_list_options.rst

Examples
-----------------------------------------------------
None.

reregister
=====================================================
.. include:: ../../includes_knife/includes_knife_user_reregister.rst

Syntax
-----------------------------------------------------
.. include:: ../../includes_knife/includes_knife_user_reregister_syntax.rst

Options
-----------------------------------------------------
.. include:: ../../includes_knife/includes_knife_user_reregister_options.rst

.. note:: See :doc:`knife.rb </config_rb_knife_optional_settings>` for more information about how to add certain |knife| options as settings in the |knife rb| file.

Examples
-----------------------------------------------------
The following examples show how to use this |knife| subcommand:

**Regenerate the RSA key-pair**

.. include:: ../../step_knife/step_knife_user_reregister.rst

show
=====================================================
.. include:: ../../includes_knife/includes_knife_user_show.rst

Syntax
-----------------------------------------------------
.. include:: ../../includes_knife/includes_knife_user_show_syntax.rst

Options
-----------------------------------------------------
.. include:: ../../includes_knife/includes_knife_user_show_options.rst

Examples
-----------------------------------------------------
The following examples show how to use this |knife| subcommand:

**Show user data**

.. include:: ../../step_knife/step_knife_user_show.rst

**Show user data as JSON**

.. include:: ../../step_knife/step_knife_user_show_json.rst
